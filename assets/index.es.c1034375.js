import{b as U_,r as F_,c as Ji,g as $_,e as Dr,_ as L_}from"./index.e06fa583.js";import{x as Kr,q as M_,r as j_,t as z_,u as q_,b as kf,o as H_,f as B_,m as K_,g as k_,n as Jc,y as bl,v as V_,z as G_,s as Vf,w as Xc,A as W_,J as Ai,B as Zc,C as Qc,D as eu,E as Ii,F as pi,G as tu,K as Gf,H as Zi}from"./index.c4ba62b7.js";var ru={},Na={},$e={},Wf={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});function t(p,g){var w=p>>>16&65535,S=p&65535,$=g>>>16&65535,z=g&65535;return S*z+(w*z+S*$<<16>>>0)|0}n.mul=Math.imul||t;function r(p,g){return p+g|0}n.add=r;function s(p,g){return p-g|0}n.sub=s;function o(p,g){return p<<g|p>>>32-g}n.rotl=o;function l(p,g){return p<<32-g|p>>>g}n.rotr=l;function d(p){return typeof p=="number"&&isFinite(p)&&Math.floor(p)===p}n.isInteger=Number.isInteger||d,n.MAX_SAFE_INTEGER=9007199254740991,n.isSafeInteger=function(p){return n.isInteger(p)&&p>=-n.MAX_SAFE_INTEGER&&p<=n.MAX_SAFE_INTEGER}})(Wf);Object.defineProperty($e,"__esModule",{value:!0});var Yf=Wf;function Y_(n,t){return t===void 0&&(t=0),(n[t+0]<<8|n[t+1])<<16>>16}$e.readInt16BE=Y_;function J_(n,t){return t===void 0&&(t=0),(n[t+0]<<8|n[t+1])>>>0}$e.readUint16BE=J_;function X_(n,t){return t===void 0&&(t=0),(n[t+1]<<8|n[t])<<16>>16}$e.readInt16LE=X_;function Z_(n,t){return t===void 0&&(t=0),(n[t+1]<<8|n[t])>>>0}$e.readUint16LE=Z_;function Jf(n,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=n>>>8,t[r+1]=n>>>0,t}$e.writeUint16BE=Jf;$e.writeInt16BE=Jf;function Xf(n,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=n>>>0,t[r+1]=n>>>8,t}$e.writeUint16LE=Xf;$e.writeInt16LE=Xf;function Nc(n,t){return t===void 0&&(t=0),n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3]}$e.readInt32BE=Nc;function Tc(n,t){return t===void 0&&(t=0),(n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3])>>>0}$e.readUint32BE=Tc;function Rc(n,t){return t===void 0&&(t=0),n[t+3]<<24|n[t+2]<<16|n[t+1]<<8|n[t]}$e.readInt32LE=Rc;function Uc(n,t){return t===void 0&&(t=0),(n[t+3]<<24|n[t+2]<<16|n[t+1]<<8|n[t])>>>0}$e.readUint32LE=Uc;function Sa(n,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=n>>>24,t[r+1]=n>>>16,t[r+2]=n>>>8,t[r+3]=n>>>0,t}$e.writeUint32BE=Sa;$e.writeInt32BE=Sa;function Ia(n,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=n>>>0,t[r+1]=n>>>8,t[r+2]=n>>>16,t[r+3]=n>>>24,t}$e.writeUint32LE=Ia;$e.writeInt32LE=Ia;function Q_(n,t){t===void 0&&(t=0);var r=Nc(n,t),s=Nc(n,t+4);return r*4294967296+s-(s>>31)*4294967296}$e.readInt64BE=Q_;function eb(n,t){t===void 0&&(t=0);var r=Tc(n,t),s=Tc(n,t+4);return r*4294967296+s}$e.readUint64BE=eb;function tb(n,t){t===void 0&&(t=0);var r=Rc(n,t),s=Rc(n,t+4);return s*4294967296+r-(r>>31)*4294967296}$e.readInt64LE=tb;function rb(n,t){t===void 0&&(t=0);var r=Uc(n,t),s=Uc(n,t+4);return s*4294967296+r}$e.readUint64LE=rb;function Zf(n,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Sa(n/4294967296>>>0,t,r),Sa(n>>>0,t,r+4),t}$e.writeUint64BE=Zf;$e.writeInt64BE=Zf;function Qf(n,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Ia(n>>>0,t,r),Ia(n/4294967296>>>0,t,r+4),t}$e.writeUint64LE=Qf;$e.writeInt64LE=Qf;function ib(n,t,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,l=n/8+r-1;l>=r;l--)s+=t[l]*o,o*=256;return s}$e.readUintBE=ib;function nb(n,t,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,l=r;l<r+n/8;l++)s+=t[l]*o,o*=256;return s}$e.readUintLE=nb;function sb(n,t,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Yf.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var o=1,l=n/8+s-1;l>=s;l--)r[l]=t/o&255,o*=256;return r}$e.writeUintBE=sb;function ab(n,t,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Yf.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var o=1,l=s;l<s+n/8;l++)r[l]=t/o&255,o*=256;return r}$e.writeUintLE=ab;function ob(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(t)}$e.readFloat32BE=ob;function cb(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(t,!0)}$e.readFloat32LE=cb;function ub(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(t)}$e.readFloat64BE=ub;function hb(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(t,!0)}$e.readFloat64LE=hb;function lb(n,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat32(r,n),t}$e.writeFloat32BE=lb;function fb(n,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat32(r,n,!0),t}$e.writeFloat32LE=fb;function pb(n,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat64(r,n),t}$e.writeFloat64BE=pb;function db(n,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat64(r,n,!0),t}$e.writeFloat64LE=db;var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});function gb(n){for(var t=0;t<n.length;t++)n[t]=0;return n}Sr.wipe=gb;Object.defineProperty(Na,"__esModule",{value:!0});var Zt=$e,Fc=Sr,vb=20;function yb(n,t,r){for(var s=1634760805,o=857760878,l=2036477234,d=1797285236,p=r[3]<<24|r[2]<<16|r[1]<<8|r[0],g=r[7]<<24|r[6]<<16|r[5]<<8|r[4],w=r[11]<<24|r[10]<<16|r[9]<<8|r[8],S=r[15]<<24|r[14]<<16|r[13]<<8|r[12],$=r[19]<<24|r[18]<<16|r[17]<<8|r[16],z=r[23]<<24|r[22]<<16|r[21]<<8|r[20],F=r[27]<<24|r[26]<<16|r[25]<<8|r[24],M=r[31]<<24|r[30]<<16|r[29]<<8|r[28],B=t[3]<<24|t[2]<<16|t[1]<<8|t[0],J=t[7]<<24|t[6]<<16|t[5]<<8|t[4],se=t[11]<<24|t[10]<<16|t[9]<<8|t[8],O=t[15]<<24|t[14]<<16|t[13]<<8|t[12],R=s,D=o,x=l,b=d,c=p,_=g,K=w,V=S,ae=$,ce=z,ge=F,P=M,q=B,le=J,te=se,G=O,ee=0;ee<vb;ee+=2)R=R+c|0,q^=R,q=q>>>32-16|q<<16,ae=ae+q|0,c^=ae,c=c>>>32-12|c<<12,D=D+_|0,le^=D,le=le>>>32-16|le<<16,ce=ce+le|0,_^=ce,_=_>>>32-12|_<<12,x=x+K|0,te^=x,te=te>>>32-16|te<<16,ge=ge+te|0,K^=ge,K=K>>>32-12|K<<12,b=b+V|0,G^=b,G=G>>>32-16|G<<16,P=P+G|0,V^=P,V=V>>>32-12|V<<12,x=x+K|0,te^=x,te=te>>>32-8|te<<8,ge=ge+te|0,K^=ge,K=K>>>32-7|K<<7,b=b+V|0,G^=b,G=G>>>32-8|G<<8,P=P+G|0,V^=P,V=V>>>32-7|V<<7,D=D+_|0,le^=D,le=le>>>32-8|le<<8,ce=ce+le|0,_^=ce,_=_>>>32-7|_<<7,R=R+c|0,q^=R,q=q>>>32-8|q<<8,ae=ae+q|0,c^=ae,c=c>>>32-7|c<<7,R=R+_|0,G^=R,G=G>>>32-16|G<<16,ge=ge+G|0,_^=ge,_=_>>>32-12|_<<12,D=D+K|0,q^=D,q=q>>>32-16|q<<16,P=P+q|0,K^=P,K=K>>>32-12|K<<12,x=x+V|0,le^=x,le=le>>>32-16|le<<16,ae=ae+le|0,V^=ae,V=V>>>32-12|V<<12,b=b+c|0,te^=b,te=te>>>32-16|te<<16,ce=ce+te|0,c^=ce,c=c>>>32-12|c<<12,x=x+V|0,le^=x,le=le>>>32-8|le<<8,ae=ae+le|0,V^=ae,V=V>>>32-7|V<<7,b=b+c|0,te^=b,te=te>>>32-8|te<<8,ce=ce+te|0,c^=ce,c=c>>>32-7|c<<7,D=D+K|0,q^=D,q=q>>>32-8|q<<8,P=P+q|0,K^=P,K=K>>>32-7|K<<7,R=R+_|0,G^=R,G=G>>>32-8|G<<8,ge=ge+G|0,_^=ge,_=_>>>32-7|_<<7;Zt.writeUint32LE(R+s|0,n,0),Zt.writeUint32LE(D+o|0,n,4),Zt.writeUint32LE(x+l|0,n,8),Zt.writeUint32LE(b+d|0,n,12),Zt.writeUint32LE(c+p|0,n,16),Zt.writeUint32LE(_+g|0,n,20),Zt.writeUint32LE(K+w|0,n,24),Zt.writeUint32LE(V+S|0,n,28),Zt.writeUint32LE(ae+$|0,n,32),Zt.writeUint32LE(ce+z|0,n,36),Zt.writeUint32LE(ge+F|0,n,40),Zt.writeUint32LE(P+M|0,n,44),Zt.writeUint32LE(q+B|0,n,48),Zt.writeUint32LE(le+J|0,n,52),Zt.writeUint32LE(te+se|0,n,56),Zt.writeUint32LE(G+O|0,n,60)}function ep(n,t,r,s,o){if(o===void 0&&(o=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<r.length)throw new Error("ChaCha: destination is shorter than source");var l,d;if(o===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");l=new Uint8Array(16),d=l.length-t.length,l.set(t,d)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");l=t,d=o}for(var p=new Uint8Array(64),g=0;g<r.length;g+=64){yb(p,l,n);for(var w=g;w<g+64&&w<r.length;w++)s[w]=r[w]^p[w-g];bb(l,0,d)}return Fc.wipe(p),o===0&&Fc.wipe(l),s}Na.streamXOR=ep;function _b(n,t,r,s){return s===void 0&&(s=0),Fc.wipe(r),ep(n,t,r,r,s)}Na.stream=_b;function bb(n,t,r){for(var s=1;r--;)s=s+(n[t]&255)|0,n[t]=s&255,s>>>=8,t++;if(s>0)throw new Error("ChaCha: counter overflow")}var tp={},Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});function mb(n,t,r){return~(n-1)&t|n-1&r}Pi.select=mb;function wb(n,t){return(n|0)-(t|0)-1>>>31&1}Pi.lessOrEqual=wb;function rp(n,t){if(n.length!==t.length)return 0;for(var r=0,s=0;s<n.length;s++)r|=n[s]^t[s];return 1&r-1>>>8}Pi.compare=rp;function Eb(n,t){return n.length===0||t.length===0?!1:rp(n,t)!==0}Pi.equal=Eb;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=Pi,r=Sr;n.DIGEST_LENGTH=16;var s=function(){function d(p){this.digestLength=n.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var g=p[0]|p[1]<<8;this._r[0]=g&8191;var w=p[2]|p[3]<<8;this._r[1]=(g>>>13|w<<3)&8191;var S=p[4]|p[5]<<8;this._r[2]=(w>>>10|S<<6)&7939;var $=p[6]|p[7]<<8;this._r[3]=(S>>>7|$<<9)&8191;var z=p[8]|p[9]<<8;this._r[4]=($>>>4|z<<12)&255,this._r[5]=z>>>1&8190;var F=p[10]|p[11]<<8;this._r[6]=(z>>>14|F<<2)&8191;var M=p[12]|p[13]<<8;this._r[7]=(F>>>11|M<<5)&8065;var B=p[14]|p[15]<<8;this._r[8]=(M>>>8|B<<8)&8191,this._r[9]=B>>>5&127,this._pad[0]=p[16]|p[17]<<8,this._pad[1]=p[18]|p[19]<<8,this._pad[2]=p[20]|p[21]<<8,this._pad[3]=p[22]|p[23]<<8,this._pad[4]=p[24]|p[25]<<8,this._pad[5]=p[26]|p[27]<<8,this._pad[6]=p[28]|p[29]<<8,this._pad[7]=p[30]|p[31]<<8}return d.prototype._blocks=function(p,g,w){for(var S=this._fin?0:2048,$=this._h[0],z=this._h[1],F=this._h[2],M=this._h[3],B=this._h[4],J=this._h[5],se=this._h[6],O=this._h[7],R=this._h[8],D=this._h[9],x=this._r[0],b=this._r[1],c=this._r[2],_=this._r[3],K=this._r[4],V=this._r[5],ae=this._r[6],ce=this._r[7],ge=this._r[8],P=this._r[9];w>=16;){var q=p[g+0]|p[g+1]<<8;$+=q&8191;var le=p[g+2]|p[g+3]<<8;z+=(q>>>13|le<<3)&8191;var te=p[g+4]|p[g+5]<<8;F+=(le>>>10|te<<6)&8191;var G=p[g+6]|p[g+7]<<8;M+=(te>>>7|G<<9)&8191;var ee=p[g+8]|p[g+9]<<8;B+=(G>>>4|ee<<12)&8191,J+=ee>>>1&8191;var W=p[g+10]|p[g+11]<<8;se+=(ee>>>14|W<<2)&8191;var re=p[g+12]|p[g+13]<<8;O+=(W>>>11|re<<5)&8191;var xe=p[g+14]|p[g+15]<<8;R+=(re>>>8|xe<<8)&8191,D+=xe>>>5|S;var ie=0,me=ie;me+=$*x,me+=z*(5*P),me+=F*(5*ge),me+=M*(5*ce),me+=B*(5*ae),ie=me>>>13,me&=8191,me+=J*(5*V),me+=se*(5*K),me+=O*(5*_),me+=R*(5*c),me+=D*(5*b),ie+=me>>>13,me&=8191;var he=ie;he+=$*b,he+=z*x,he+=F*(5*P),he+=M*(5*ge),he+=B*(5*ce),ie=he>>>13,he&=8191,he+=J*(5*ae),he+=se*(5*V),he+=O*(5*K),he+=R*(5*_),he+=D*(5*c),ie+=he>>>13,he&=8191;var _e=ie;_e+=$*c,_e+=z*b,_e+=F*x,_e+=M*(5*P),_e+=B*(5*ge),ie=_e>>>13,_e&=8191,_e+=J*(5*ce),_e+=se*(5*ae),_e+=O*(5*V),_e+=R*(5*K),_e+=D*(5*_),ie+=_e>>>13,_e&=8191;var j=ie;j+=$*_,j+=z*c,j+=F*b,j+=M*x,j+=B*(5*P),ie=j>>>13,j&=8191,j+=J*(5*ge),j+=se*(5*ce),j+=O*(5*ae),j+=R*(5*V),j+=D*(5*K),ie+=j>>>13,j&=8191;var L=ie;L+=$*K,L+=z*_,L+=F*c,L+=M*b,L+=B*x,ie=L>>>13,L&=8191,L+=J*(5*P),L+=se*(5*ge),L+=O*(5*ce),L+=R*(5*ae),L+=D*(5*V),ie+=L>>>13,L&=8191;var A=ie;A+=$*V,A+=z*K,A+=F*_,A+=M*c,A+=B*b,ie=A>>>13,A&=8191,A+=J*x,A+=se*(5*P),A+=O*(5*ge),A+=R*(5*ce),A+=D*(5*ae),ie+=A>>>13,A&=8191;var h=ie;h+=$*ae,h+=z*V,h+=F*K,h+=M*_,h+=B*c,ie=h>>>13,h&=8191,h+=J*b,h+=se*x,h+=O*(5*P),h+=R*(5*ge),h+=D*(5*ce),ie+=h>>>13,h&=8191;var I=ie;I+=$*ce,I+=z*ae,I+=F*V,I+=M*K,I+=B*_,ie=I>>>13,I&=8191,I+=J*c,I+=se*b,I+=O*x,I+=R*(5*P),I+=D*(5*ge),ie+=I>>>13,I&=8191;var ne=ie;ne+=$*ge,ne+=z*ce,ne+=F*ae,ne+=M*V,ne+=B*K,ie=ne>>>13,ne&=8191,ne+=J*_,ne+=se*c,ne+=O*b,ne+=R*x,ne+=D*(5*P),ie+=ne>>>13,ne&=8191;var fe=ie;fe+=$*P,fe+=z*ge,fe+=F*ce,fe+=M*ae,fe+=B*V,ie=fe>>>13,fe&=8191,fe+=J*K,fe+=se*_,fe+=O*c,fe+=R*b,fe+=D*x,ie+=fe>>>13,fe&=8191,ie=(ie<<2)+ie|0,ie=ie+me|0,me=ie&8191,ie=ie>>>13,he+=ie,$=me,z=he,F=_e,M=j,B=L,J=A,se=h,O=I,R=ne,D=fe,g+=16,w-=16}this._h[0]=$,this._h[1]=z,this._h[2]=F,this._h[3]=M,this._h[4]=B,this._h[5]=J,this._h[6]=se,this._h[7]=O,this._h[8]=R,this._h[9]=D},d.prototype.finish=function(p,g){g===void 0&&(g=0);var w=new Uint16Array(10),S,$,z,F;if(this._leftover){for(F=this._leftover,this._buffer[F++]=1;F<16;F++)this._buffer[F]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(S=this._h[1]>>>13,this._h[1]&=8191,F=2;F<10;F++)this._h[F]+=S,S=this._h[F]>>>13,this._h[F]&=8191;for(this._h[0]+=S*5,S=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=S,S=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=S,w[0]=this._h[0]+5,S=w[0]>>>13,w[0]&=8191,F=1;F<10;F++)w[F]=this._h[F]+S,S=w[F]>>>13,w[F]&=8191;for(w[9]-=1<<13,$=(S^1)-1,F=0;F<10;F++)w[F]&=$;for($=~$,F=0;F<10;F++)this._h[F]=this._h[F]&$|w[F];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,z=this._h[0]+this._pad[0],this._h[0]=z&65535,F=1;F<8;F++)z=(this._h[F]+this._pad[F]|0)+(z>>>16)|0,this._h[F]=z&65535;return p[g+0]=this._h[0]>>>0,p[g+1]=this._h[0]>>>8,p[g+2]=this._h[1]>>>0,p[g+3]=this._h[1]>>>8,p[g+4]=this._h[2]>>>0,p[g+5]=this._h[2]>>>8,p[g+6]=this._h[3]>>>0,p[g+7]=this._h[3]>>>8,p[g+8]=this._h[4]>>>0,p[g+9]=this._h[4]>>>8,p[g+10]=this._h[5]>>>0,p[g+11]=this._h[5]>>>8,p[g+12]=this._h[6]>>>0,p[g+13]=this._h[6]>>>8,p[g+14]=this._h[7]>>>0,p[g+15]=this._h[7]>>>8,this._finished=!0,this},d.prototype.update=function(p){var g=0,w=p.length,S;if(this._leftover){S=16-this._leftover,S>w&&(S=w);for(var $=0;$<S;$++)this._buffer[this._leftover+$]=p[g+$];if(w-=S,g+=S,this._leftover+=S,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(w>=16&&(S=w-w%16,this._blocks(p,g,S),g+=S,w-=S),w){for(var $=0;$<w;$++)this._buffer[this._leftover+$]=p[g+$];this._leftover+=w}return this},d.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var p=new Uint8Array(16);return this.finish(p),p},d.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},d}();n.Poly1305=s;function o(d,p){var g=new s(d);g.update(p);var w=g.digest();return g.clean(),w}n.oneTimeAuth=o;function l(d,p){return d.length!==n.DIGEST_LENGTH||p.length!==n.DIGEST_LENGTH?!1:t.equal(d,p)}n.equal=l})(tp);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=Na,r=tp,s=Sr,o=$e,l=Pi;n.KEY_LENGTH=32,n.NONCE_LENGTH=12,n.TAG_LENGTH=16;var d=new Uint8Array(16),p=function(){function g(w){if(this.nonceLength=n.NONCE_LENGTH,this.tagLength=n.TAG_LENGTH,w.length!==n.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(w)}return g.prototype.seal=function(w,S,$,z){if(w.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var F=new Uint8Array(16);F.set(w,F.length-w.length);var M=new Uint8Array(32);t.stream(this._key,F,M,4);var B=S.length+this.tagLength,J;if(z){if(z.length!==B)throw new Error("ChaCha20Poly1305: incorrect destination length");J=z}else J=new Uint8Array(B);return t.streamXOR(this._key,F,S,J,4),this._authenticate(J.subarray(J.length-this.tagLength,J.length),M,J.subarray(0,J.length-this.tagLength),$),s.wipe(F),J},g.prototype.open=function(w,S,$,z){if(w.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(S.length<this.tagLength)return null;var F=new Uint8Array(16);F.set(w,F.length-w.length);var M=new Uint8Array(32);t.stream(this._key,F,M,4);var B=new Uint8Array(this.tagLength);if(this._authenticate(B,M,S.subarray(0,S.length-this.tagLength),$),!l.equal(B,S.subarray(S.length-this.tagLength,S.length)))return null;var J=S.length-this.tagLength,se;if(z){if(z.length!==J)throw new Error("ChaCha20Poly1305: incorrect destination length");se=z}else se=new Uint8Array(J);return t.streamXOR(this._key,F,S.subarray(0,S.length-this.tagLength),se,4),s.wipe(F),se},g.prototype.clean=function(){return s.wipe(this._key),this},g.prototype._authenticate=function(w,S,$,z){var F=new r.Poly1305(S);z&&(F.update(z),z.length%16>0&&F.update(d.subarray(z.length%16))),F.update($),$.length%16>0&&F.update(d.subarray($.length%16));var M=new Uint8Array(8);z&&o.writeUint64LE(z.length,M),F.update(M),o.writeUint64LE($.length,M),F.update(M);for(var B=F.digest(),J=0;J<B.length;J++)w[J]=B[J];F.clean(),s.wipe(B),s.wipe(M)},g}();n.ChaCha20Poly1305=p})(ru);var ip={},us={},iu={};Object.defineProperty(iu,"__esModule",{value:!0});function Db(n){return typeof n.saveState<"u"&&typeof n.restoreState<"u"&&typeof n.cleanSavedState<"u"}iu.isSerializableHash=Db;Object.defineProperty(us,"__esModule",{value:!0});var Xr=iu,Sb=Pi,Ib=Sr,np=function(){function n(t,r){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(s).clean():s.set(r);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),Xr.isSerializableHash(this._inner)&&Xr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Ib.wipe(s)}return n.prototype.reset=function(){if(!Xr.isSerializableHash(this._inner)||!Xr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.clean=function(){Xr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Xr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},n.prototype.update=function(t){return this._inner.update(t),this},n.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},n.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},n.prototype.saveState=function(){if(!Xr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},n.prototype.restoreState=function(t){if(!Xr.isSerializableHash(this._inner)||!Xr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.cleanSavedState=function(t){if(!Xr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},n}();us.HMAC=np;function xb(n,t,r){var s=new np(n,t);s.update(r);var o=s.digest();return s.clean(),o}us.hmac=xb;us.equal=Sb.equal;Object.defineProperty(ip,"__esModule",{value:!0});var ml=us,wl=Sr,Cb=function(){function n(t,r,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=o;var l=ml.hmac(this._hash,s,r);this._hmac=new ml.HMAC(t,l),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return n.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},n.prototype.expand=function(t){for(var r=new Uint8Array(t),s=0;s<r.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[s]=this._buffer[this._bufpos++];return r},n.prototype.clean=function(){this._hmac.clean(),wl.wipe(this._buffer),wl.wipe(this._counter),this._bufpos=0},n}(),Ob=ip.HKDF=Cb,Cn={},Ta={},Ra={};Object.defineProperty(Ra,"__esModule",{value:!0});Ra.BrowserRandomSource=void 0;const El=65536;class Ab{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(t);for(let s=0;s<r.length;s+=El)this._crypto.getRandomValues(r.subarray(s,s+Math.min(r.length-s,El)));return r}}Ra.BrowserRandomSource=Ab;var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.NodeRandomSource=void 0;const Pb=Sr;class Nb{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof U_<"u"){const t=F_;t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(t);for(let o=0;o<s.length;o++)s[o]=r[o];return(0,Pb.wipe)(r),s}}Ua.NodeRandomSource=Nb;Object.defineProperty(Ta,"__esModule",{value:!0});Ta.SystemRandomSource=void 0;const Tb=Ra,Rb=Ua;class Ub{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Tb.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Rb.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}Ta.SystemRandomSource=Ub;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;const t=Ta,r=$e,s=Sr;n.defaultRandomSource=new t.SystemRandomSource;function o(w,S=n.defaultRandomSource){return S.randomBytes(w)}n.randomBytes=o;function l(w=n.defaultRandomSource){const S=o(4,w),$=(0,r.readUint32LE)(S);return(0,s.wipe)(S),$}n.randomUint32=l;const d="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function p(w,S=d,$=n.defaultRandomSource){if(S.length<2)throw new Error("randomString charset is too short");if(S.length>256)throw new Error("randomString charset is too long");let z="";const F=S.length,M=256-256%F;for(;w>0;){const B=o(Math.ceil(w*256/M),$);for(let J=0;J<B.length&&w>0;J++){const se=B[J];se<M&&(z+=S.charAt(se%F),w--)}(0,s.wipe)(B)}return z}n.randomString=p;function g(w,S=d,$=n.defaultRandomSource){const z=Math.ceil(w/(Math.log(S.length)/Math.LN2));return p(z,S,$)}n.randomStringForEntropy=g})(Cn);var Fa={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=$e,r=Sr;n.DIGEST_LENGTH=32,n.BLOCK_SIZE=64;var s=function(){function p(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return p.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},p.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},p.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},p.prototype.update=function(g,w){if(w===void 0&&(w=g.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var S=0;if(this._bytesHashed+=w,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&w>0;)this._buffer[this._bufferLength++]=g[S++],w--;this._bufferLength===this.blockSize&&(l(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(w>=this.blockSize&&(S=l(this._temp,this._state,g,S,w),w%=this.blockSize);w>0;)this._buffer[this._bufferLength++]=g[S++],w--;return this},p.prototype.finish=function(g){if(!this._finished){var w=this._bytesHashed,S=this._bufferLength,$=w/536870912|0,z=w<<3,F=w%64<56?64:128;this._buffer[S]=128;for(var M=S+1;M<F-8;M++)this._buffer[M]=0;t.writeUint32BE($,this._buffer,F-8),t.writeUint32BE(z,this._buffer,F-4),l(this._temp,this._state,this._buffer,0,F),this._finished=!0}for(var M=0;M<this.digestLength/4;M++)t.writeUint32BE(this._state[M],g,M*4);return this},p.prototype.digest=function(){var g=new Uint8Array(this.digestLength);return this.finish(g),g},p.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},p.prototype.restoreState=function(g){return this._state.set(g.state),this._bufferLength=g.bufferLength,g.buffer&&this._buffer.set(g.buffer),this._bytesHashed=g.bytesHashed,this._finished=!1,this},p.prototype.cleanSavedState=function(g){r.wipe(g.state),g.buffer&&r.wipe(g.buffer),g.bufferLength=0,g.bytesHashed=0},p}();n.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function l(p,g,w,S,$){for(;$>=64;){for(var z=g[0],F=g[1],M=g[2],B=g[3],J=g[4],se=g[5],O=g[6],R=g[7],D=0;D<16;D++){var x=S+D*4;p[D]=t.readUint32BE(w,x)}for(var D=16;D<64;D++){var b=p[D-2],c=(b>>>17|b<<32-17)^(b>>>19|b<<32-19)^b>>>10;b=p[D-15];var _=(b>>>7|b<<32-7)^(b>>>18|b<<32-18)^b>>>3;p[D]=(c+p[D-7]|0)+(_+p[D-16]|0)}for(var D=0;D<64;D++){var c=(((J>>>6|J<<26)^(J>>>11|J<<21)^(J>>>25|J<<7))+(J&se^~J&O)|0)+(R+(o[D]+p[D]|0)|0)|0,_=((z>>>2|z<<32-2)^(z>>>13|z<<32-13)^(z>>>22|z<<32-22))+(z&F^z&M^F&M)|0;R=O,O=se,se=J,J=B+c|0,B=M,M=F,F=z,z=c+_|0}g[0]+=z,g[1]+=F,g[2]+=M,g[3]+=B,g[4]+=J,g[5]+=se,g[6]+=O,g[7]+=R,S+=64,$-=64}return S}function d(p){var g=new s;g.update(p);var w=g.digest();return g.clean(),w}n.hash=d})(Fa);var nu={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;const t=Cn,r=Sr;n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=32,n.SHARED_KEY_LENGTH=32;function s(D){const x=new Float64Array(16);if(D)for(let b=0;b<D.length;b++)x[b]=D[b];return x}const o=new Uint8Array(32);o[0]=9;const l=s([56129,1]);function d(D){let x=1;for(let b=0;b<16;b++){let c=D[b]+x+65535;x=Math.floor(c/65536),D[b]=c-x*65536}D[0]+=x-1+37*(x-1)}function p(D,x,b){const c=~(b-1);for(let _=0;_<16;_++){const K=c&(D[_]^x[_]);D[_]^=K,x[_]^=K}}function g(D,x){const b=s(),c=s();for(let _=0;_<16;_++)c[_]=x[_];d(c),d(c),d(c);for(let _=0;_<2;_++){b[0]=c[0]-65517;for(let V=1;V<15;V++)b[V]=c[V]-65535-(b[V-1]>>16&1),b[V-1]&=65535;b[15]=c[15]-32767-(b[14]>>16&1);const K=b[15]>>16&1;b[14]&=65535,p(c,b,1-K)}for(let _=0;_<16;_++)D[2*_]=c[_]&255,D[2*_+1]=c[_]>>8}function w(D,x){for(let b=0;b<16;b++)D[b]=x[2*b]+(x[2*b+1]<<8);D[15]&=32767}function S(D,x,b){for(let c=0;c<16;c++)D[c]=x[c]+b[c]}function $(D,x,b){for(let c=0;c<16;c++)D[c]=x[c]-b[c]}function z(D,x,b){let c,_,K=0,V=0,ae=0,ce=0,ge=0,P=0,q=0,le=0,te=0,G=0,ee=0,W=0,re=0,xe=0,ie=0,me=0,he=0,_e=0,j=0,L=0,A=0,h=0,I=0,ne=0,fe=0,Se=0,He=0,ke=0,Le=0,pt=0,dt=0,je=b[0],Ie=b[1],Re=b[2],Ue=b[3],ze=b[4],Oe=b[5],Fe=b[6],De=b[7],Ae=b[8],Be=b[9],Ce=b[10],Ve=b[11],We=b[12],et=b[13],tt=b[14],Je=b[15];c=x[0],K+=c*je,V+=c*Ie,ae+=c*Re,ce+=c*Ue,ge+=c*ze,P+=c*Oe,q+=c*Fe,le+=c*De,te+=c*Ae,G+=c*Be,ee+=c*Ce,W+=c*Ve,re+=c*We,xe+=c*et,ie+=c*tt,me+=c*Je,c=x[1],V+=c*je,ae+=c*Ie,ce+=c*Re,ge+=c*Ue,P+=c*ze,q+=c*Oe,le+=c*Fe,te+=c*De,G+=c*Ae,ee+=c*Be,W+=c*Ce,re+=c*Ve,xe+=c*We,ie+=c*et,me+=c*tt,he+=c*Je,c=x[2],ae+=c*je,ce+=c*Ie,ge+=c*Re,P+=c*Ue,q+=c*ze,le+=c*Oe,te+=c*Fe,G+=c*De,ee+=c*Ae,W+=c*Be,re+=c*Ce,xe+=c*Ve,ie+=c*We,me+=c*et,he+=c*tt,_e+=c*Je,c=x[3],ce+=c*je,ge+=c*Ie,P+=c*Re,q+=c*Ue,le+=c*ze,te+=c*Oe,G+=c*Fe,ee+=c*De,W+=c*Ae,re+=c*Be,xe+=c*Ce,ie+=c*Ve,me+=c*We,he+=c*et,_e+=c*tt,j+=c*Je,c=x[4],ge+=c*je,P+=c*Ie,q+=c*Re,le+=c*Ue,te+=c*ze,G+=c*Oe,ee+=c*Fe,W+=c*De,re+=c*Ae,xe+=c*Be,ie+=c*Ce,me+=c*Ve,he+=c*We,_e+=c*et,j+=c*tt,L+=c*Je,c=x[5],P+=c*je,q+=c*Ie,le+=c*Re,te+=c*Ue,G+=c*ze,ee+=c*Oe,W+=c*Fe,re+=c*De,xe+=c*Ae,ie+=c*Be,me+=c*Ce,he+=c*Ve,_e+=c*We,j+=c*et,L+=c*tt,A+=c*Je,c=x[6],q+=c*je,le+=c*Ie,te+=c*Re,G+=c*Ue,ee+=c*ze,W+=c*Oe,re+=c*Fe,xe+=c*De,ie+=c*Ae,me+=c*Be,he+=c*Ce,_e+=c*Ve,j+=c*We,L+=c*et,A+=c*tt,h+=c*Je,c=x[7],le+=c*je,te+=c*Ie,G+=c*Re,ee+=c*Ue,W+=c*ze,re+=c*Oe,xe+=c*Fe,ie+=c*De,me+=c*Ae,he+=c*Be,_e+=c*Ce,j+=c*Ve,L+=c*We,A+=c*et,h+=c*tt,I+=c*Je,c=x[8],te+=c*je,G+=c*Ie,ee+=c*Re,W+=c*Ue,re+=c*ze,xe+=c*Oe,ie+=c*Fe,me+=c*De,he+=c*Ae,_e+=c*Be,j+=c*Ce,L+=c*Ve,A+=c*We,h+=c*et,I+=c*tt,ne+=c*Je,c=x[9],G+=c*je,ee+=c*Ie,W+=c*Re,re+=c*Ue,xe+=c*ze,ie+=c*Oe,me+=c*Fe,he+=c*De,_e+=c*Ae,j+=c*Be,L+=c*Ce,A+=c*Ve,h+=c*We,I+=c*et,ne+=c*tt,fe+=c*Je,c=x[10],ee+=c*je,W+=c*Ie,re+=c*Re,xe+=c*Ue,ie+=c*ze,me+=c*Oe,he+=c*Fe,_e+=c*De,j+=c*Ae,L+=c*Be,A+=c*Ce,h+=c*Ve,I+=c*We,ne+=c*et,fe+=c*tt,Se+=c*Je,c=x[11],W+=c*je,re+=c*Ie,xe+=c*Re,ie+=c*Ue,me+=c*ze,he+=c*Oe,_e+=c*Fe,j+=c*De,L+=c*Ae,A+=c*Be,h+=c*Ce,I+=c*Ve,ne+=c*We,fe+=c*et,Se+=c*tt,He+=c*Je,c=x[12],re+=c*je,xe+=c*Ie,ie+=c*Re,me+=c*Ue,he+=c*ze,_e+=c*Oe,j+=c*Fe,L+=c*De,A+=c*Ae,h+=c*Be,I+=c*Ce,ne+=c*Ve,fe+=c*We,Se+=c*et,He+=c*tt,ke+=c*Je,c=x[13],xe+=c*je,ie+=c*Ie,me+=c*Re,he+=c*Ue,_e+=c*ze,j+=c*Oe,L+=c*Fe,A+=c*De,h+=c*Ae,I+=c*Be,ne+=c*Ce,fe+=c*Ve,Se+=c*We,He+=c*et,ke+=c*tt,Le+=c*Je,c=x[14],ie+=c*je,me+=c*Ie,he+=c*Re,_e+=c*Ue,j+=c*ze,L+=c*Oe,A+=c*Fe,h+=c*De,I+=c*Ae,ne+=c*Be,fe+=c*Ce,Se+=c*Ve,He+=c*We,ke+=c*et,Le+=c*tt,pt+=c*Je,c=x[15],me+=c*je,he+=c*Ie,_e+=c*Re,j+=c*Ue,L+=c*ze,A+=c*Oe,h+=c*Fe,I+=c*De,ne+=c*Ae,fe+=c*Be,Se+=c*Ce,He+=c*Ve,ke+=c*We,Le+=c*et,pt+=c*tt,dt+=c*Je,K+=38*he,V+=38*_e,ae+=38*j,ce+=38*L,ge+=38*A,P+=38*h,q+=38*I,le+=38*ne,te+=38*fe,G+=38*Se,ee+=38*He,W+=38*ke,re+=38*Le,xe+=38*pt,ie+=38*dt,_=1,c=K+_+65535,_=Math.floor(c/65536),K=c-_*65536,c=V+_+65535,_=Math.floor(c/65536),V=c-_*65536,c=ae+_+65535,_=Math.floor(c/65536),ae=c-_*65536,c=ce+_+65535,_=Math.floor(c/65536),ce=c-_*65536,c=ge+_+65535,_=Math.floor(c/65536),ge=c-_*65536,c=P+_+65535,_=Math.floor(c/65536),P=c-_*65536,c=q+_+65535,_=Math.floor(c/65536),q=c-_*65536,c=le+_+65535,_=Math.floor(c/65536),le=c-_*65536,c=te+_+65535,_=Math.floor(c/65536),te=c-_*65536,c=G+_+65535,_=Math.floor(c/65536),G=c-_*65536,c=ee+_+65535,_=Math.floor(c/65536),ee=c-_*65536,c=W+_+65535,_=Math.floor(c/65536),W=c-_*65536,c=re+_+65535,_=Math.floor(c/65536),re=c-_*65536,c=xe+_+65535,_=Math.floor(c/65536),xe=c-_*65536,c=ie+_+65535,_=Math.floor(c/65536),ie=c-_*65536,c=me+_+65535,_=Math.floor(c/65536),me=c-_*65536,K+=_-1+37*(_-1),_=1,c=K+_+65535,_=Math.floor(c/65536),K=c-_*65536,c=V+_+65535,_=Math.floor(c/65536),V=c-_*65536,c=ae+_+65535,_=Math.floor(c/65536),ae=c-_*65536,c=ce+_+65535,_=Math.floor(c/65536),ce=c-_*65536,c=ge+_+65535,_=Math.floor(c/65536),ge=c-_*65536,c=P+_+65535,_=Math.floor(c/65536),P=c-_*65536,c=q+_+65535,_=Math.floor(c/65536),q=c-_*65536,c=le+_+65535,_=Math.floor(c/65536),le=c-_*65536,c=te+_+65535,_=Math.floor(c/65536),te=c-_*65536,c=G+_+65535,_=Math.floor(c/65536),G=c-_*65536,c=ee+_+65535,_=Math.floor(c/65536),ee=c-_*65536,c=W+_+65535,_=Math.floor(c/65536),W=c-_*65536,c=re+_+65535,_=Math.floor(c/65536),re=c-_*65536,c=xe+_+65535,_=Math.floor(c/65536),xe=c-_*65536,c=ie+_+65535,_=Math.floor(c/65536),ie=c-_*65536,c=me+_+65535,_=Math.floor(c/65536),me=c-_*65536,K+=_-1+37*(_-1),D[0]=K,D[1]=V,D[2]=ae,D[3]=ce,D[4]=ge,D[5]=P,D[6]=q,D[7]=le,D[8]=te,D[9]=G,D[10]=ee,D[11]=W,D[12]=re,D[13]=xe,D[14]=ie,D[15]=me}function F(D,x){z(D,x,x)}function M(D,x){const b=s();for(let c=0;c<16;c++)b[c]=x[c];for(let c=253;c>=0;c--)F(b,b),c!==2&&c!==4&&z(b,b,x);for(let c=0;c<16;c++)D[c]=b[c]}function B(D,x){const b=new Uint8Array(32),c=new Float64Array(80),_=s(),K=s(),V=s(),ae=s(),ce=s(),ge=s();for(let te=0;te<31;te++)b[te]=D[te];b[31]=D[31]&127|64,b[0]&=248,w(c,x);for(let te=0;te<16;te++)K[te]=c[te];_[0]=ae[0]=1;for(let te=254;te>=0;--te){const G=b[te>>>3]>>>(te&7)&1;p(_,K,G),p(V,ae,G),S(ce,_,V),$(_,_,V),S(V,K,ae),$(K,K,ae),F(ae,ce),F(ge,_),z(_,V,_),z(V,K,ce),S(ce,_,V),$(_,_,V),F(K,_),$(V,ae,ge),z(_,V,l),S(_,_,ae),z(V,V,_),z(_,ae,ge),z(ae,K,c),F(K,ce),p(_,K,G),p(V,ae,G)}for(let te=0;te<16;te++)c[te+16]=_[te],c[te+32]=V[te],c[te+48]=K[te],c[te+64]=ae[te];const P=c.subarray(32),q=c.subarray(16);M(P,P),z(q,q,P);const le=new Uint8Array(32);return g(le,q),le}n.scalarMult=B;function J(D){return B(D,o)}n.scalarMultBase=J;function se(D){if(D.length!==n.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`);const x=new Uint8Array(D);return{publicKey:J(x),secretKey:x}}n.generateKeyPairFromSeed=se;function O(D){const x=(0,t.randomBytes)(32,D),b=se(x);return(0,r.wipe)(x),b}n.generateKeyPair=O;function R(D,x,b=!1){if(D.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(x.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const c=B(D,x);if(b){let _=0;for(let K=0;K<c.length;K++)_|=c[K];if(_===0)throw new Error("X25519: invalid shared key")}return c}n.sharedKey=R})(nu);function su(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function sp(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?su(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function $c(n,t){t||(t=n.reduce((o,l)=>o+l.length,0));const r=sp(t);let s=0;for(const o of n)r.set(o,s),s+=o.length;return su(r)}function Fb(n,t){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var o=0;o<n.length;o++){var l=n.charAt(o),d=l.charCodeAt(0);if(r[d]!==255)throw new TypeError(l+" is ambiguous");r[d]=o}var p=n.length,g=n.charAt(0),w=Math.log(p)/Math.log(256),S=Math.log(256)/Math.log(p);function $(M){if(M instanceof Uint8Array||(ArrayBuffer.isView(M)?M=new Uint8Array(M.buffer,M.byteOffset,M.byteLength):Array.isArray(M)&&(M=Uint8Array.from(M))),!(M instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(M.length===0)return"";for(var B=0,J=0,se=0,O=M.length;se!==O&&M[se]===0;)se++,B++;for(var R=(O-se)*S+1>>>0,D=new Uint8Array(R);se!==O;){for(var x=M[se],b=0,c=R-1;(x!==0||b<J)&&c!==-1;c--,b++)x+=256*D[c]>>>0,D[c]=x%p>>>0,x=x/p>>>0;if(x!==0)throw new Error("Non-zero carry");J=b,se++}for(var _=R-J;_!==R&&D[_]===0;)_++;for(var K=g.repeat(B);_<R;++_)K+=n.charAt(D[_]);return K}function z(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return new Uint8Array;var B=0;if(M[B]!==" "){for(var J=0,se=0;M[B]===g;)J++,B++;for(var O=(M.length-B)*w+1>>>0,R=new Uint8Array(O);M[B];){var D=r[M.charCodeAt(B)];if(D===255)return;for(var x=0,b=O-1;(D!==0||x<se)&&b!==-1;b--,x++)D+=p*R[b]>>>0,R[b]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");se=x,B++}if(M[B]!==" "){for(var c=O-se;c!==O&&R[c]===0;)c++;for(var _=new Uint8Array(J+(O-c)),K=J;c!==O;)_[K++]=R[c++];return _}}}function F(M){var B=z(M);if(B)return B;throw new Error(`Non-${t} character`)}return{encode:$,decodeUnsafe:z,decode:F}}var $b=Fb,Lb=$b;const ap=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},Mb=n=>new TextEncoder().encode(n),jb=n=>new TextDecoder().decode(n);class zb{constructor(t,r,s){this.name=t,this.prefix=r,this.baseEncode=s}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class qb{constructor(t,r,s){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return op(this,t)}}class Hb{constructor(t){this.decoders=t}or(t){return op(this,t)}decode(t){const r=t[0],s=this.decoders[r];if(s)return s.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const op=(n,t)=>new Hb({...n.decoders||{[n.prefix]:n},...t.decoders||{[t.prefix]:t}});class Bb{constructor(t,r,s,o){this.name=t,this.prefix=r,this.baseEncode=s,this.baseDecode=o,this.encoder=new zb(t,r,s),this.decoder=new qb(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const $a=({name:n,prefix:t,encode:r,decode:s})=>new Bb(n,t,r,s),hs=({prefix:n,name:t,alphabet:r})=>{const{encode:s,decode:o}=Lb(r,t);return $a({prefix:n,name:t,encode:s,decode:l=>ap(o(l))})},Kb=(n,t,r,s)=>{const o={};for(let S=0;S<t.length;++S)o[t[S]]=S;let l=n.length;for(;n[l-1]==="=";)--l;const d=new Uint8Array(l*r/8|0);let p=0,g=0,w=0;for(let S=0;S<l;++S){const $=o[n[S]];if($===void 0)throw new SyntaxError(`Non-${s} character`);g=g<<r|$,p+=r,p>=8&&(p-=8,d[w++]=255&g>>p)}if(p>=r||255&g<<8-p)throw new SyntaxError("Unexpected end of data");return d},kb=(n,t,r)=>{const s=t[t.length-1]==="=",o=(1<<r)-1;let l="",d=0,p=0;for(let g=0;g<n.length;++g)for(p=p<<8|n[g],d+=8;d>r;)d-=r,l+=t[o&p>>d];if(d&&(l+=t[o&p<<r-d]),s)for(;l.length*r&7;)l+="=";return l},Wt=({name:n,prefix:t,bitsPerChar:r,alphabet:s})=>$a({prefix:t,name:n,encode(o){return kb(o,s,r)},decode(o){return Kb(o,s,r,n)}}),Vb=$a({prefix:"\0",name:"identity",encode:n=>jb(n),decode:n=>Mb(n)}),Gb=Object.freeze(Object.defineProperty({__proto__:null,identity:Vb},Symbol.toStringTag,{value:"Module"})),Wb=Wt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Yb=Object.freeze(Object.defineProperty({__proto__:null,base2:Wb},Symbol.toStringTag,{value:"Module"})),Jb=Wt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Xb=Object.freeze(Object.defineProperty({__proto__:null,base8:Jb},Symbol.toStringTag,{value:"Module"})),Zb=hs({prefix:"9",name:"base10",alphabet:"0123456789"}),Qb=Object.freeze(Object.defineProperty({__proto__:null,base10:Zb},Symbol.toStringTag,{value:"Module"})),em=Wt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),tm=Wt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),rm=Object.freeze(Object.defineProperty({__proto__:null,base16:em,base16upper:tm},Symbol.toStringTag,{value:"Module"})),im=Wt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),nm=Wt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),sm=Wt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),am=Wt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),om=Wt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),cm=Wt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),um=Wt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hm=Wt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),lm=Wt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),fm=Object.freeze(Object.defineProperty({__proto__:null,base32:im,base32upper:nm,base32pad:sm,base32padupper:am,base32hex:om,base32hexupper:cm,base32hexpad:um,base32hexpadupper:hm,base32z:lm},Symbol.toStringTag,{value:"Module"})),pm=hs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),dm=hs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),gm=Object.freeze(Object.defineProperty({__proto__:null,base36:pm,base36upper:dm},Symbol.toStringTag,{value:"Module"})),vm=hs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ym=hs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),_m=Object.freeze(Object.defineProperty({__proto__:null,base58btc:vm,base58flickr:ym},Symbol.toStringTag,{value:"Module"})),bm=Wt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),mm=Wt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),wm=Wt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Em=Wt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Dm=Object.freeze(Object.defineProperty({__proto__:null,base64:bm,base64pad:mm,base64url:wm,base64urlpad:Em},Symbol.toStringTag,{value:"Module"})),cp=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Sm=cp.reduce((n,t,r)=>(n[r]=t,n),[]),Im=cp.reduce((n,t,r)=>(n[t.codePointAt(0)]=r,n),[]);function xm(n){return n.reduce((t,r)=>(t+=Sm[r],t),"")}function Cm(n){const t=[];for(const r of n){const s=Im[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(s)}return new Uint8Array(t)}const Om=$a({prefix:"\u{1F680}",name:"base256emoji",encode:xm,decode:Cm}),Am=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Om},Symbol.toStringTag,{value:"Module"}));var Pm=up,Dl=128,Nm=127,Tm=~Nm,Rm=Math.pow(2,31);function up(n,t,r){t=t||[],r=r||0;for(var s=r;n>=Rm;)t[r++]=n&255|Dl,n/=128;for(;n&Tm;)t[r++]=n&255|Dl,n>>>=7;return t[r]=n|0,up.bytes=r-s+1,t}var Um=Lc,Fm=128,Sl=127;function Lc(n,s){var r=0,s=s||0,o=0,l=s,d,p=n.length;do{if(l>=p)throw Lc.bytes=0,new RangeError("Could not decode varint");d=n[l++],r+=o<28?(d&Sl)<<o:(d&Sl)*Math.pow(2,o),o+=7}while(d>=Fm);return Lc.bytes=l-s,r}var $m=Math.pow(2,7),Lm=Math.pow(2,14),Mm=Math.pow(2,21),jm=Math.pow(2,28),zm=Math.pow(2,35),qm=Math.pow(2,42),Hm=Math.pow(2,49),Bm=Math.pow(2,56),Km=Math.pow(2,63),km=function(n){return n<$m?1:n<Lm?2:n<Mm?3:n<jm?4:n<zm?5:n<qm?6:n<Hm?7:n<Bm?8:n<Km?9:10},Vm={encode:Pm,decode:Um,encodingLength:km},hp=Vm;const Il=(n,t,r=0)=>(hp.encode(n,t,r),t),xl=n=>hp.encodingLength(n),Mc=(n,t)=>{const r=t.byteLength,s=xl(n),o=s+xl(r),l=new Uint8Array(o+r);return Il(n,l,0),Il(r,l,s),l.set(t,o),new Gm(n,r,t,l)};class Gm{constructor(t,r,s,o){this.code=t,this.size=r,this.digest=s,this.bytes=o}}const lp=({name:n,code:t,encode:r})=>new Wm(n,t,r);class Wm{constructor(t,r,s){this.name=t,this.code=r,this.encode=s}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?Mc(this.code,r):r.then(s=>Mc(this.code,s))}else throw Error("Unknown type, must be binary type")}}const fp=n=>async t=>new Uint8Array(await crypto.subtle.digest(n,t)),Ym=lp({name:"sha2-256",code:18,encode:fp("SHA-256")}),Jm=lp({name:"sha2-512",code:19,encode:fp("SHA-512")}),Xm=Object.freeze(Object.defineProperty({__proto__:null,sha256:Ym,sha512:Jm},Symbol.toStringTag,{value:"Module"})),pp=0,Zm="identity",dp=ap,Qm=n=>Mc(pp,dp(n)),ew={code:pp,name:Zm,encode:dp,digest:Qm},tw=Object.freeze(Object.defineProperty({__proto__:null,identity:ew},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Cl={...Gb,...Yb,...Xb,...Qb,...rm,...fm,...gm,..._m,...Dm,...Am};({...Xm,...tw});function gp(n,t,r,s){return{name:n,prefix:t,encoder:{name:n,prefix:t,encode:r},decoder:{decode:s}}}const Ol=gp("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),lc=gp("ascii","a",n=>{let t="a";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},n=>{n=n.substring(1);const t=sp(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),vp={utf8:Ol,"utf-8":Ol,hex:Cl.base16,latin1:lc,ascii:lc,binary:lc,...Cl};function vr(n,t="utf8"){const r=vp[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?su(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}function cr(n,t="utf8"){const r=vp[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):r.encoder.encode(n).substring(1)}var ye={},fc={},Yn={},Al;function rw(){if(Al)return Yn;Al=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.delay=void 0;function n(t){return new Promise(r=>{setTimeout(()=>{r(!0)},t)})}return Yn.delay=n,Yn}var Vi={},pc={},Gi={},Pl;function iw(){return Pl||(Pl=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.ONE_THOUSAND=Gi.ONE_HUNDRED=void 0,Gi.ONE_HUNDRED=100,Gi.ONE_THOUSAND=1e3),Gi}var dc={},Nl;function nw(){return Nl||(Nl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(dc)),dc}var Tl;function yp(){return Tl||(Tl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Kr.exports;t.__exportStar(iw(),n),t.__exportStar(nw(),n)}(pc)),pc}var Rl;function sw(){if(Rl)return Vi;Rl=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.fromMiliseconds=Vi.toMiliseconds=void 0;const n=yp();function t(s){return s*n.ONE_THOUSAND}Vi.toMiliseconds=t;function r(s){return Math.floor(s/n.ONE_THOUSAND)}return Vi.fromMiliseconds=r,Vi}var Ul;function aw(){return Ul||(Ul=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Kr.exports;t.__exportStar(rw(),n),t.__exportStar(sw(),n)}(fc)),fc}var En={},Fl;function ow(){if(Fl)return En;Fl=1,Object.defineProperty(En,"__esModule",{value:!0}),En.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const s=this.get(r);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const o=Date.now()-s.started;this.timestamps.set(r,{started:s.started,elapsed:o})}get(r){const s=this.timestamps.get(r);if(typeof s>"u")throw new Error(`No timestamp found for label: ${r}`);return s}elapsed(r){const s=this.get(r);return s.elapsed||Date.now()-s.started}}return En.Watch=n,En.default=n,En}var gc={},Jn={},$l;function cw(){if($l)return Jn;$l=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.IWatch=void 0;class n{}return Jn.IWatch=n,Jn}var Ll;function uw(){return Ll||(Ll=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Kr.exports.__exportStar(cw(),n)}(gc)),gc}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Kr.exports;t.__exportStar(aw(),n),t.__exportStar(ow(),n),t.__exportStar(uw(),n),t.__exportStar(yp(),n)})(ye);var cs={};(function(n){const t=z_,r=q_,s=M_,o=j_,l=O=>O==null,d=Symbol("encodeFragmentIdentifier");function p(O){switch(O.arrayFormat){case"index":return R=>(D,x)=>{const b=D.length;return x===void 0||O.skipNull&&x===null||O.skipEmptyString&&x===""?D:x===null?[...D,[S(R,O),"[",b,"]"].join("")]:[...D,[S(R,O),"[",S(b,O),"]=",S(x,O)].join("")]};case"bracket":return R=>(D,x)=>x===void 0||O.skipNull&&x===null||O.skipEmptyString&&x===""?D:x===null?[...D,[S(R,O),"[]"].join("")]:[...D,[S(R,O),"[]=",S(x,O)].join("")];case"colon-list-separator":return R=>(D,x)=>x===void 0||O.skipNull&&x===null||O.skipEmptyString&&x===""?D:x===null?[...D,[S(R,O),":list="].join("")]:[...D,[S(R,O),":list=",S(x,O)].join("")];case"comma":case"separator":case"bracket-separator":{const R=O.arrayFormat==="bracket-separator"?"[]=":"=";return D=>(x,b)=>b===void 0||O.skipNull&&b===null||O.skipEmptyString&&b===""?x:(b=b===null?"":b,x.length===0?[[S(D,O),R,S(b,O)].join("")]:[[x,S(b,O)].join(O.arrayFormatSeparator)])}default:return R=>(D,x)=>x===void 0||O.skipNull&&x===null||O.skipEmptyString&&x===""?D:x===null?[...D,S(R,O)]:[...D,[S(R,O),"=",S(x,O)].join("")]}}function g(O){let R;switch(O.arrayFormat){case"index":return(D,x,b)=>{if(R=/\[(\d*)\]$/.exec(D),D=D.replace(/\[\d*\]$/,""),!R){b[D]=x;return}b[D]===void 0&&(b[D]={}),b[D][R[1]]=x};case"bracket":return(D,x,b)=>{if(R=/(\[\])$/.exec(D),D=D.replace(/\[\]$/,""),!R){b[D]=x;return}if(b[D]===void 0){b[D]=[x];return}b[D]=[].concat(b[D],x)};case"colon-list-separator":return(D,x,b)=>{if(R=/(:list)$/.exec(D),D=D.replace(/:list$/,""),!R){b[D]=x;return}if(b[D]===void 0){b[D]=[x];return}b[D]=[].concat(b[D],x)};case"comma":case"separator":return(D,x,b)=>{const c=typeof x=="string"&&x.includes(O.arrayFormatSeparator),_=typeof x=="string"&&!c&&$(x,O).includes(O.arrayFormatSeparator);x=_?$(x,O):x;const K=c||_?x.split(O.arrayFormatSeparator).map(V=>$(V,O)):x===null?x:$(x,O);b[D]=K};case"bracket-separator":return(D,x,b)=>{const c=/(\[\])$/.test(D);if(D=D.replace(/\[\]$/,""),!c){b[D]=x&&$(x,O);return}const _=x===null?[]:x.split(O.arrayFormatSeparator).map(K=>$(K,O));if(b[D]===void 0){b[D]=_;return}b[D]=[].concat(b[D],_)};default:return(D,x,b)=>{if(b[D]===void 0){b[D]=x;return}b[D]=[].concat(b[D],x)}}}function w(O){if(typeof O!="string"||O.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function S(O,R){return R.encode?R.strict?t(O):encodeURIComponent(O):O}function $(O,R){return R.decode?r(O):O}function z(O){return Array.isArray(O)?O.sort():typeof O=="object"?z(Object.keys(O)).sort((R,D)=>Number(R)-Number(D)).map(R=>O[R]):O}function F(O){const R=O.indexOf("#");return R!==-1&&(O=O.slice(0,R)),O}function M(O){let R="";const D=O.indexOf("#");return D!==-1&&(R=O.slice(D)),R}function B(O){O=F(O);const R=O.indexOf("?");return R===-1?"":O.slice(R+1)}function J(O,R){return R.parseNumbers&&!Number.isNaN(Number(O))&&typeof O=="string"&&O.trim()!==""?O=Number(O):R.parseBooleans&&O!==null&&(O.toLowerCase()==="true"||O.toLowerCase()==="false")&&(O=O.toLowerCase()==="true"),O}function se(O,R){R=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},R),w(R.arrayFormatSeparator);const D=g(R),x=Object.create(null);if(typeof O!="string"||(O=O.trim().replace(/^[?#&]/,""),!O))return x;for(const b of O.split("&")){if(b==="")continue;let[c,_]=s(R.decode?b.replace(/\+/g," "):b,"=");_=_===void 0?null:["comma","separator","bracket-separator"].includes(R.arrayFormat)?_:$(_,R),D($(c,R),_,x)}for(const b of Object.keys(x)){const c=x[b];if(typeof c=="object"&&c!==null)for(const _ of Object.keys(c))c[_]=J(c[_],R);else x[b]=J(c,R)}return R.sort===!1?x:(R.sort===!0?Object.keys(x).sort():Object.keys(x).sort(R.sort)).reduce((b,c)=>{const _=x[c];return Boolean(_)&&typeof _=="object"&&!Array.isArray(_)?b[c]=z(_):b[c]=_,b},Object.create(null))}n.extract=B,n.parse=se,n.stringify=(O,R)=>{if(!O)return"";R=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},R),w(R.arrayFormatSeparator);const D=_=>R.skipNull&&l(O[_])||R.skipEmptyString&&O[_]==="",x=p(R),b={};for(const _ of Object.keys(O))D(_)||(b[_]=O[_]);const c=Object.keys(b);return R.sort!==!1&&c.sort(R.sort),c.map(_=>{const K=O[_];return K===void 0?"":K===null?S(_,R):Array.isArray(K)?K.length===0&&R.arrayFormat==="bracket-separator"?S(_,R)+"[]":K.reduce(x(_),[]).join("&"):S(_,R)+"="+S(K,R)}).filter(_=>_.length>0).join("&")},n.parseUrl=(O,R)=>{R=Object.assign({decode:!0},R);const[D,x]=s(O,"#");return Object.assign({url:D.split("?")[0]||"",query:se(B(O),R)},R&&R.parseFragmentIdentifier&&x?{fragmentIdentifier:$(x,R)}:{})},n.stringifyUrl=(O,R)=>{R=Object.assign({encode:!0,strict:!0,[d]:!0},R);const D=F(O.url).split("?")[0]||"",x=n.extract(O.url),b=n.parse(x,{sort:!1}),c=Object.assign(b,O.query);let _=n.stringify(c,R);_&&(_=`?${_}`);let K=M(O.url);return O.fragmentIdentifier&&(K=`#${R[d]?S(O.fragmentIdentifier,R):O.fragmentIdentifier}`),`${D}${_}${K}`},n.pick=(O,R,D)=>{D=Object.assign({parseFragmentIdentifier:!0,[d]:!1},D);const{url:x,query:b,fragmentIdentifier:c}=n.parseUrl(O,D);return n.stringifyUrl({url:x,query:o(b,R),fragmentIdentifier:c},D)},n.exclude=(O,R,D)=>{const x=Array.isArray(R)?b=>!R.includes(b):(b,c)=>!R(b,c);return n.pick(O,x,D)}})(cs);const hw={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function lw(n,t=[]){const r=[];return Object.keys(n).forEach(s=>{if(t.length&&!t.includes(s))return;const o=n[s];r.push(...o.accounts)}),r}function _p(n,t){return n.includes(":")?[n]:t.chains||[]}const bp="base10",or="base16",jc="base64pad",au="utf8",mp=0,Qi=1,fw=0,Ml=1,zc=12,ou=32;function pw(){const n=nu.generateKeyPair();return{privateKey:cr(n.secretKey,or),publicKey:cr(n.publicKey,or)}}function qc(){const n=Cn.randomBytes(ou);return cr(n,or)}function dw(n,t){const r=nu.sharedKey(vr(n,or),vr(t,or)),s=new Ob(Fa.SHA256,r).expand(ou);return cr(s,or)}function gw(n){const t=Fa.hash(vr(n,or));return cr(t,or)}function In(n){const t=Fa.hash(vr(n,au));return cr(t,or)}function vw(n){return vr(`${n}`,bp)}function ls(n){return Number(cr(n,bp))}function yw(n){const t=vw(typeof n.type<"u"?n.type:mp);if(ls(t)===Qi&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof n.senderPublicKey<"u"?vr(n.senderPublicKey,or):void 0,s=typeof n.iv<"u"?vr(n.iv,or):Cn.randomBytes(zc),o=new ru.ChaCha20Poly1305(vr(n.symKey,or)).seal(s,vr(n.message,au));return bw({type:t,sealed:o,iv:s,senderPublicKey:r})}function _w(n){const t=new ru.ChaCha20Poly1305(vr(n.symKey,or)),{sealed:r,iv:s}=xa(n.encoded),o=t.open(s,r);if(o===null)throw new Error("Failed to decrypt");return cr(o,au)}function bw(n){if(ls(n.type)===Qi){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return cr($c([n.type,n.senderPublicKey,n.iv,n.sealed]),jc)}return cr($c([n.type,n.iv,n.sealed]),jc)}function xa(n){const t=vr(n,jc),r=t.slice(fw,Ml),s=Ml;if(ls(r)===Qi){const p=s+ou,g=p+zc,w=t.slice(s,p),S=t.slice(p,g),$=t.slice(g);return{type:r,sealed:$,iv:S,senderPublicKey:w}}const o=s+zc,l=t.slice(s,o),d=t.slice(o);return{type:r,sealed:d,iv:l}}function mw(n,t){const r=xa(n);return wp({type:ls(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?cr(r.senderPublicKey,or):void 0,receiverPublicKey:t==null?void 0:t.receiverPublicKey})}function wp(n){const t=(n==null?void 0:n.type)||mp;if(t===Qi){if(typeof(n==null?void 0:n.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(n==null?void 0:n.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:n==null?void 0:n.senderPublicKey,receiverPublicKey:n==null?void 0:n.receiverPublicKey}}function jl(n){return n.type===Qi&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}var ww=Object.defineProperty,zl=Object.getOwnPropertySymbols,Ew=Object.prototype.hasOwnProperty,Dw=Object.prototype.propertyIsEnumerable,ql=(n,t,r)=>t in n?ww(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Hl=(n,t)=>{for(var r in t||(t={}))Ew.call(t,r)&&ql(n,r,t[r]);if(zl)for(var r of zl(t))Dw.call(t,r)&&ql(n,r,t[r]);return n};const Sw="ReactNative",Ci={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Iw="js";function cu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ep(){return!B_()&&!!kf()&&navigator.product===Sw}function uu(){return!cu()&&!!kf()}function hu(){return Ep()?Ci.reactNative:cu()?Ci.node:uu()?Ci.browser:Ci.unknown}function xw(n,t){let r=cs.parse(n);return r=Hl(Hl({},r),t),n=cs.stringify(r),n}function Cw(){return H_()||{name:"",description:"",url:"",icons:[""]}}function Ow(){if(hu()===Ci.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:s}=global.Platform;return[r,s].join("-")}const n=K_();if(n===null)return"unknown";const t=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[t,n.name,n.version].join("-"):[t,n.version].join("-")}function Aw(){var n;const t=hu();return t===Ci.browser?[t,((n=k_())==null?void 0:n.host)||"unknown"].join(":"):t}function Pw(n,t,r){const s=Ow(),o=Aw();return[[n,t].join("-"),[Iw,r].join("-"),s,o].join("/")}function Nw({protocol:n,version:t,relayUrl:r,sdkVersion:s,auth:o,projectId:l,useOnCloseEvent:d}){const p=r.split("?"),g=Pw(n,t,s),w={auth:o,ua:g,projectId:l,useOnCloseEvent:d||void 0},S=xw(p[1]||"",w);return p[0]+"?"+S}function Xi(n,t){return n.filter(r=>t.includes(r)).length===n.length}function Dp(n){return Object.fromEntries(n.entries())}function Sp(n){return new Map(Object.entries(n))}function Dn(n=ye.FIVE_MINUTES,t){const r=ye.toMiliseconds(n||ye.FIVE_MINUTES);let s,o,l;return{resolve:d=>{l&&s&&(clearTimeout(l),s(d))},reject:d=>{l&&o&&(clearTimeout(l),o(d))},done:()=>new Promise((d,p)=>{l=setTimeout(()=>{p(new Error(t))},r),s=d,o=p})}}function Ca(n,t,r){return new Promise(async(s,o)=>{const l=setTimeout(()=>o(new Error(r)),t);try{const d=await n;s(d)}catch(d){o(d)}clearTimeout(l)})}function Ip(n,t){if(typeof t=="string"&&t.startsWith(`${n}:`))return t;if(n.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(n.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${n}`)}function Tw(n){return Ip("topic",n)}function Rw(n){return Ip("id",n)}function xp(n){const[t,r]=n.split(":"),s={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")s.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))s.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return s}function Br(n,t){return ye.fromMiliseconds((t||Date.now())+ye.toMiliseconds(n))}function xi(n){return Date.now()>=ye.toMiliseconds(n)}function qt(n,t){return`${n}${t?`:${t}`:""}`}function vc(n=[],t=[]){return[...new Set([...n,...t])]}async function Uw({id:n,topic:t,wcDeepLink:r}){try{if(!r)return;const s=typeof r=="string"?JSON.parse(r):r;let o=s==null?void 0:s.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const l=`${o}/wc?requestId=${n}&sessionTopic=${t}`,d=hu();d===Ci.browser?l.startsWith("https://")?window.open(l,"_blank","noreferrer noopener"):window.open(l,"_self","noreferrer noopener"):d===Ci.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(l)}catch(s){console.error(s)}}const Fw="irn";function Hc(n){return(n==null?void 0:n.relay)||{protocol:Fw}}function wa(n){const t=hw[n];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${n}`);return t}var $w=Object.defineProperty,Bl=Object.getOwnPropertySymbols,Lw=Object.prototype.hasOwnProperty,Mw=Object.prototype.propertyIsEnumerable,Kl=(n,t,r)=>t in n?$w(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,jw=(n,t)=>{for(var r in t||(t={}))Lw.call(t,r)&&Kl(n,r,t[r]);if(Bl)for(var r of Bl(t))Mw.call(t,r)&&Kl(n,r,t[r]);return n};function zw(n,t="-"){const r={},s="relay"+t;return Object.keys(n).forEach(o=>{if(o.startsWith(s)){const l=o.replace(s,""),d=n[o];r[l]=d}}),r}function qw(n){const t=n.indexOf(":"),r=n.indexOf("?")!==-1?n.indexOf("?"):void 0,s=n.substring(0,t),o=n.substring(t+1,r).split("@"),l=typeof r<"u"?n.substring(r):"",d=cs.parse(l);return{protocol:s,topic:Hw(o[0]),version:parseInt(o[1],10),symKey:d.symKey,relay:zw(d)}}function Hw(n){return n.startsWith("//")?n.substring(2):n}function Bw(n,t="-"){const r="relay",s={};return Object.keys(n).forEach(o=>{const l=r+t+o;n[o]&&(s[l]=n[o])}),s}function Kw(n){return`${n.protocol}:${n.topic}@${n.version}?`+cs.stringify(jw({symKey:n.symKey},Bw(n.relay)))}function On(n){const t=[];return n.forEach(r=>{const[s,o]=r.split(":");t.push(`${s}:${o}`)}),t}function kw(n){const t=[];return Object.values(n).forEach(r=>{t.push(...On(r.accounts))}),t}function Vw(n,t){const r=[];return Object.values(n).forEach(s=>{On(s.accounts).includes(t)&&r.push(...s.methods)}),r}function Gw(n,t){const r=[];return Object.values(n).forEach(s=>{On(s.accounts).includes(t)&&r.push(...s.events)}),r}function Ww(n,t){const r=Da(n,t);if(r)throw new Error(r.message);const s={};for(const[o,l]of Object.entries(n))s[o]={methods:l.methods,events:l.events,chains:l.accounts.map(d=>`${d.split(":")[0]}:${d.split(":")[1]}`)};return s}function lu(n){return n.includes(":")}function Ea(n){return lu(n)?n.split(":")[0]:n}const Yw={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Jw={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ue(n,t){const{message:r,code:s}=Jw[n];return{message:t?`${r} ${t}`:r,code:s}}function Tt(n,t){const{message:r,code:s}=Yw[n];return{message:t?`${r} ${t}`:r,code:s}}function ei(n,t){return Array.isArray(n)?typeof t<"u"&&n.length?n.every(t):!0:!1}function xn(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function ar(n){return typeof n>"u"}function Vt(n,t){return t&&ar(n)?!0:typeof n=="string"&&!!n.trim().length}function fu(n,t){return t&&ar(n)?!0:typeof n=="number"&&!isNaN(n)}function Xw(n,t){const{requiredNamespaces:r}=t,s=Object.keys(n.namespaces),o=Object.keys(r);let l=!0;return Xi(o,s)?(s.forEach(d=>{const{accounts:p,methods:g,events:w}=n.namespaces[d],S=On(p),$=r[d];(!Xi(_p(d,$),S)||!Xi($.methods,g)||!Xi($.events,w))&&(l=!1)}),l):!1}function Oa(n){return Vt(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function Zw(n){if(Vt(n,!1)&&n.includes(":")){const t=n.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&Oa(r)}}return!1}function Qw(n){if(Vt(n,!1))try{return typeof new URL(n)<"u"}catch{return!1}return!1}function eE(n){var t;return(t=n==null?void 0:n.proposer)==null?void 0:t.publicKey}function tE(n){return n==null?void 0:n.topic}function rE(n,t){let r=null;return Vt(n==null?void 0:n.publicKey,!1)||(r=ue("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function kl(n){let t=!0;return ei(n)?n.length&&(t=n.every(r=>Vt(r,!1))):t=!1,t}function iE(n,t,r){let s=null;return ei(t)&&t.length?t.forEach(o=>{s||Oa(o)||(s=Tt("UNSUPPORTED_CHAINS",`${r}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):Oa(n)||(s=Tt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function nE(n,t,r){let s=null;return Object.entries(n).forEach(([o,l])=>{if(s)return;const d=iE(o,_p(o,l),`${t} ${r}`);d&&(s=d)}),s}function sE(n,t){let r=null;return ei(n)?n.forEach(s=>{r||Zw(s)||(r=Tt("UNSUPPORTED_ACCOUNTS",`${t}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):r=Tt("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function aE(n,t){let r=null;return Object.values(n).forEach(s=>{if(r)return;const o=sE(s==null?void 0:s.accounts,`${t} namespace`);o&&(r=o)}),r}function oE(n,t){let r=null;return kl(n==null?void 0:n.methods)?kl(n==null?void 0:n.events)||(r=Tt("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Tt("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function Cp(n,t){let r=null;return Object.values(n).forEach(s=>{if(r)return;const o=oE(s,`${t}, namespace`);o&&(r=o)}),r}function cE(n,t,r){let s=null;if(n&&xn(n)){const o=Cp(n,t);o&&(s=o);const l=nE(n,t,r);l&&(s=l)}else s=ue("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return s}function Da(n,t){let r=null;if(n&&xn(n)){const s=Cp(n,t);s&&(r=s);const o=aE(n,t);o&&(r=o)}else r=ue("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function Op(n){return Vt(n.protocol,!0)}function uE(n,t){let r=!1;return t&&!n?r=!0:n&&ei(n)&&n.length&&n.forEach(s=>{r=Op(s)}),r}function hE(n){return typeof n=="number"}function gr(n){return typeof n<"u"&&typeof n!==null}function lE(n){return!(!n||typeof n!="object"||!n.code||!fu(n.code,!1)||!n.message||!Vt(n.message,!1))}function fE(n){return!(ar(n)||!Vt(n.method,!1))}function pE(n){return!(ar(n)||ar(n.result)&&ar(n.error)||!fu(n.id,!1)||!Vt(n.jsonrpc,!1))}function dE(n){return!(ar(n)||!Vt(n.name,!1))}function Vl(n,t){return!(!Oa(t)||!kw(n).includes(t))}function gE(n,t,r){return Vt(r,!1)?Vw(n,t).includes(r):!1}function vE(n,t,r){return Vt(r,!1)?Gw(n,t).includes(r):!1}function Gl(n,t,r){let s=null;const o=yE(n),l=_E(t),d=Object.keys(o),p=Object.keys(l),g=Wl(Object.keys(n)),w=Wl(Object.keys(t)),S=g.filter($=>!w.includes($));return S.length&&(s=ue("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${S.toString()}
      Received: ${Object.keys(t).toString()}`)),Xi(d,p)||(s=ue("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${d.toString()}
      Approved: ${p.toString()}`)),Object.keys(t).forEach($=>{if(!$.includes(":")||s)return;const z=On(t[$].accounts);z.includes($)||(s=ue("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${$}
        Required: ${$}
        Approved: ${z.toString()}`))}),d.forEach($=>{s||(Xi(o[$].methods,l[$].methods)?Xi(o[$].events,l[$].events)||(s=ue("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${$}`)):s=ue("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${$}`))}),s}function yE(n){const t={};return Object.keys(n).forEach(r=>{var s;r.includes(":")?t[r]=n[r]:(s=n[r].chains)==null||s.forEach(o=>{t[o]={methods:n[r].methods,events:n[r].events}})}),t}function Wl(n){return[...new Set(n.map(t=>t.includes(":")?t.split(":")[0]:t))]}function _E(n){const t={};return Object.keys(n).forEach(r=>{if(r.includes(":"))t[r]=n[r];else{const s=On(n[r].accounts);s==null||s.forEach(o=>{t[o]={accounts:n[r].accounts.filter(l=>l.includes(`${o}:`)),methods:n[r].methods,events:n[r].events}})}}),t}function bE(n,t){return fu(n,!1)&&n<=t.max&&n>=t.min}var La={},fs={};Object.defineProperty(fs,"__esModule",{value:!0});function mE(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return JSON.parse(n)}catch{return n}}fs.safeJsonParse=mE;function wE(n){return typeof n=="string"?n:JSON.stringify(n,(t,r)=>typeof r>"u"?null:r)}fs.safeJsonStringify=wE;var Xn={exports:{}},Yl;function EE(){return Yl||(Yl=1,function(){let n;function t(){}n=t,n.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},n.prototype.setItem=function(r,s){this[r]=String(s)},n.prototype.removeItem=function(r){delete this[r]},n.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(s){r[s]=void 0,delete r[s]})},n.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Ji<"u"&&Ji.localStorage?Xn.exports=Ji.localStorage:typeof window<"u"&&window.localStorage?Xn.exports=window.localStorage:Xn.exports=new t}()),Xn.exports}var yc={},Zn={},Jl;function DE(){if(Jl)return Zn;Jl=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.IKeyValueStorage=void 0;class n{}return Zn.IKeyValueStorage=n,Zn}var Qn={},Xl;function SE(){if(Xl)return Qn;Xl=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.parseEntry=void 0;const n=fs;function t(r){var s;return[r[0],n.safeJsonParse((s=r[1])!==null&&s!==void 0?s:"")]}return Qn.parseEntry=t,Qn}var Zl;function IE(){return Zl||(Zl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Kr.exports;t.__exportStar(DE(),n),t.__exportStar(SE(),n)}(yc)),yc}Object.defineProperty(La,"__esModule",{value:!0});La.KeyValueStorage=void 0;const Sn=Kr.exports,Ql=fs,xE=Sn.__importDefault(EE()),CE=IE();class Ap{constructor(){this.localStorage=xE.default}getKeys(){return Sn.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Sn.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(CE.parseEntry)})}getItem(t){return Sn.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(t);if(r!==null)return Ql.safeJsonParse(r)})}setItem(t,r){return Sn.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(t,Ql.safeJsonStringify(r))})}removeItem(t){return Sn.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(t)})}}La.KeyValueStorage=Ap;var OE=La.default=Ap,An={},es={},_c={},ts={};class en{}const AE=Object.freeze(Object.defineProperty({__proto__:null,IEvents:en},Symbol.toStringTag,{value:"Module"})),PE=$_(AE);var ef;function NE(){if(ef)return ts;ef=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.IHeartBeat=void 0;const n=PE;class t extends n.IEvents{constructor(s){super()}}return ts.IHeartBeat=t,ts}var tf;function Pp(){return tf||(tf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Kr.exports.__exportStar(NE(),n)}(_c)),_c}var bc={},Wi={},rf;function TE(){if(rf)return Wi;rf=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.HEARTBEAT_EVENTS=Wi.HEARTBEAT_INTERVAL=void 0;const n=ye;return Wi.HEARTBEAT_INTERVAL=n.FIVE_SECONDS,Wi.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Wi}var nf;function Np(){return nf||(nf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Kr.exports.__exportStar(TE(),n)}(bc)),bc}var sf;function RE(){if(sf)return es;sf=1,Object.defineProperty(es,"__esModule",{value:!0}),es.HeartBeat=void 0;const n=Kr.exports,t=Dr.exports,r=ye,s=Pp(),o=Np();class l extends s.IHeartBeat{constructor(p){super(p),this.events=new t.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=(p==null?void 0:p.interval)||o.HEARTBEAT_INTERVAL}static init(p){return n.__awaiter(this,void 0,void 0,function*(){const g=new l(p);return yield g.init(),g})}init(){return n.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(p,g){this.events.on(p,g)}once(p,g){this.events.once(p,g)}off(p,g){this.events.off(p,g)}removeListener(p,g){this.events.removeListener(p,g)}initialize(){return n.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return es.HeartBeat=l,es}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Kr.exports;t.__exportStar(RE(),n),t.__exportStar(Pp(),n),t.__exportStar(Np(),n)})(An);var Qe={},mc,af;function UE(){if(af)return mc;af=1;function n(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}mc=t;function t(r,s,o){var l=o&&o.stringify||n,d=1;if(typeof r=="object"&&r!==null){var p=s.length+d;if(p===1)return r;var g=new Array(p);g[0]=l(r);for(var w=1;w<p;w++)g[w]=l(s[w]);return g.join(" ")}if(typeof r!="string")return r;var S=s.length;if(S===0)return r;for(var $="",z=1-d,F=-1,M=r&&r.length||0,B=0;B<M;){if(r.charCodeAt(B)===37&&B+1<M){switch(F=F>-1?F:0,r.charCodeAt(B+1)){case 100:case 102:if(z>=S||s[z]==null)break;F<B&&($+=r.slice(F,B)),$+=Number(s[z]),F=B+2,B++;break;case 105:if(z>=S||s[z]==null)break;F<B&&($+=r.slice(F,B)),$+=Math.floor(Number(s[z])),F=B+2,B++;break;case 79:case 111:case 106:if(z>=S||s[z]===void 0)break;F<B&&($+=r.slice(F,B));var J=typeof s[z];if(J==="string"){$+="'"+s[z]+"'",F=B+2,B++;break}if(J==="function"){$+=s[z].name||"<anonymous>",F=B+2,B++;break}$+=l(s[z]),F=B+2,B++;break;case 115:if(z>=S)break;F<B&&($+=r.slice(F,B)),$+=String(s[z]),F=B+2,B++;break;case 37:F<B&&($+=r.slice(F,B)),$+="%",F=B+2,B++,z--;break}++z}++B}return F===-1?r:(F<M&&($+=r.slice(F)),$)}return mc}var wc,of;function FE(){if(of)return wc;of=1;const n=UE();wc=o;const t=x().console||{},r={mapHttpRequest:M,mapHttpResponse:M,wrapRequestSerializer:B,wrapResponseSerializer:B,wrapErrorSerializer:B,req:M,res:M,err:z};function s(b,c){return Array.isArray(b)?b.filter(function(K){return K!=="!stdSerializers.err"}):b===!0?Object.keys(c):!1}function o(b){b=b||{},b.browser=b.browser||{};const c=b.browser.transmit;if(c&&typeof c.send!="function")throw Error("pino: transmit option must have a send function");const _=b.browser.write||t;b.browser.write&&(b.browser.asObject=!0);const K=b.serializers||{},V=s(b.browser.serialize,K);let ae=b.browser.serialize;Array.isArray(b.browser.serialize)&&b.browser.serialize.indexOf("!stdSerializers.err")>-1&&(ae=!1);const ce=["error","fatal","warn","info","debug","trace"];typeof _=="function"&&(_.error=_.fatal=_.warn=_.info=_.debug=_.trace=_),b.enabled===!1&&(b.level="silent");const ge=b.level||"info",P=Object.create(_);P.log||(P.log=J),Object.defineProperty(P,"levelVal",{get:le}),Object.defineProperty(P,"level",{get:te,set:G});const q={transmit:c,serialize:V,asObject:b.browser.asObject,levels:ce,timestamp:F(b)};P.levels=o.levels,P.level=ge,P.setMaxListeners=P.getMaxListeners=P.emit=P.addListener=P.on=P.prependListener=P.once=P.prependOnceListener=P.removeListener=P.removeAllListeners=P.listeners=P.listenerCount=P.eventNames=P.write=P.flush=J,P.serializers=K,P._serialize=V,P._stdErrSerialize=ae,P.child=ee,c&&(P._logEvent=$());function le(){return this.level==="silent"?1/0:this.levels.values[this.level]}function te(){return this._level}function G(W){if(W!=="silent"&&!this.levels.values[W])throw Error("unknown level "+W);this._level=W,l(q,P,"error","log"),l(q,P,"fatal","error"),l(q,P,"warn","error"),l(q,P,"info","log"),l(q,P,"debug","log"),l(q,P,"trace","log")}function ee(W,re){if(!W)throw new Error("missing bindings for child Pino");re=re||{},V&&W.serializers&&(re.serializers=W.serializers);const xe=re.serializers;if(V&&xe){var ie=Object.assign({},K,xe),me=b.browser.serialize===!0?Object.keys(ie):V;delete W.serializers,g([W],me,ie,this._stdErrSerialize)}function he(_e){this._childLevel=(_e._childLevel|0)+1,this.error=w(_e,W,"error"),this.fatal=w(_e,W,"fatal"),this.warn=w(_e,W,"warn"),this.info=w(_e,W,"info"),this.debug=w(_e,W,"debug"),this.trace=w(_e,W,"trace"),ie&&(this.serializers=ie,this._serialize=me),c&&(this._logEvent=$([].concat(_e._logEvent.bindings,W)))}return he.prototype=this,new he(this)}return P}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=r,o.stdTimeFunctions=Object.assign({},{nullTime:se,epochTime:O,unixTime:R,isoTime:D});function l(b,c,_,K){const V=Object.getPrototypeOf(c);c[_]=c.levelVal>c.levels.values[_]?J:V[_]?V[_]:t[_]||t[K]||J,d(b,c,_)}function d(b,c,_){!b.transmit&&c[_]===J||(c[_]=function(K){return function(){const ae=b.timestamp(),ce=new Array(arguments.length),ge=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var P=0;P<ce.length;P++)ce[P]=arguments[P];if(b.serialize&&!b.asObject&&g(ce,this._serialize,this.serializers,this._stdErrSerialize),b.asObject?K.call(ge,p(this,_,ce,ae)):K.apply(ge,ce),b.transmit){const q=b.transmit.level||c.level,le=o.levels.values[q],te=o.levels.values[_];if(te<le)return;S(this,{ts:ae,methodLevel:_,methodValue:te,transmitLevel:q,transmitValue:o.levels.values[b.transmit.level||c.level],send:b.transmit.send,val:c.levelVal},ce)}}}(c[_]))}function p(b,c,_,K){b._serialize&&g(_,b._serialize,b.serializers,b._stdErrSerialize);const V=_.slice();let ae=V[0];const ce={};K&&(ce.time=K),ce.level=o.levels.values[c];let ge=(b._childLevel|0)+1;if(ge<1&&(ge=1),ae!==null&&typeof ae=="object"){for(;ge--&&typeof V[0]=="object";)Object.assign(ce,V.shift());ae=V.length?n(V.shift(),V):void 0}else typeof ae=="string"&&(ae=n(V.shift(),V));return ae!==void 0&&(ce.msg=ae),ce}function g(b,c,_,K){for(const V in b)if(K&&b[V]instanceof Error)b[V]=o.stdSerializers.err(b[V]);else if(typeof b[V]=="object"&&!Array.isArray(b[V]))for(const ae in b[V])c&&c.indexOf(ae)>-1&&ae in _&&(b[V][ae]=_[ae](b[V][ae]))}function w(b,c,_){return function(){const K=new Array(1+arguments.length);K[0]=c;for(var V=1;V<K.length;V++)K[V]=arguments[V-1];return b[_].apply(this,K)}}function S(b,c,_){const K=c.send,V=c.ts,ae=c.methodLevel,ce=c.methodValue,ge=c.val,P=b._logEvent.bindings;g(_,b._serialize||Object.keys(b.serializers),b.serializers,b._stdErrSerialize===void 0?!0:b._stdErrSerialize),b._logEvent.ts=V,b._logEvent.messages=_.filter(function(q){return P.indexOf(q)===-1}),b._logEvent.level.label=ae,b._logEvent.level.value=ce,K(ae,b._logEvent,ge),b._logEvent=$(P)}function $(b){return{ts:0,messages:[],bindings:b||[],level:{label:"",value:0}}}function z(b){const c={type:b.constructor.name,msg:b.message,stack:b.stack};for(const _ in b)c[_]===void 0&&(c[_]=b[_]);return c}function F(b){return typeof b.timestamp=="function"?b.timestamp:b.timestamp===!1?se:O}function M(){return{}}function B(b){return b}function J(){}function se(){return!1}function O(){return Date.now()}function R(){return Math.round(Date.now()/1e3)}function D(){return new Date(Date.now()).toISOString()}function x(){function b(c){return typeof c<"u"&&c}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return b(self)||b(window)||b(this)||{}}}return wc}var Yi={},cf;function Tp(){return cf||(cf=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.PINO_CUSTOM_CONTEXT_KEY=Yi.PINO_LOGGER_DEFAULTS=void 0,Yi.PINO_LOGGER_DEFAULTS={level:"info"},Yi.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Yi}var sr={},uf;function $E(){if(uf)return sr;uf=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.generateChildLogger=sr.formatChildLoggerContext=sr.getLoggerContext=sr.setBrowserLoggerContext=sr.getBrowserLoggerContext=sr.getDefaultLoggerOptions=void 0;const n=Tp();function t(p){return Object.assign(Object.assign({},p),{level:(p==null?void 0:p.level)||n.PINO_LOGGER_DEFAULTS.level})}sr.getDefaultLoggerOptions=t;function r(p,g=n.PINO_CUSTOM_CONTEXT_KEY){return p[g]||""}sr.getBrowserLoggerContext=r;function s(p,g,w=n.PINO_CUSTOM_CONTEXT_KEY){return p[w]=g,p}sr.setBrowserLoggerContext=s;function o(p,g=n.PINO_CUSTOM_CONTEXT_KEY){let w="";return typeof p.bindings>"u"?w=r(p,g):w=p.bindings().context||"",w}sr.getLoggerContext=o;function l(p,g,w=n.PINO_CUSTOM_CONTEXT_KEY){const S=o(p,w);return S.trim()?`${S}/${g}`:g}sr.formatChildLoggerContext=l;function d(p,g,w=n.PINO_CUSTOM_CONTEXT_KEY){const S=l(p,g,w),$=p.child({context:S});return s($,S,w)}return sr.generateChildLogger=d,sr}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.pino=void 0;const t=Kr.exports,r=t.__importDefault(FE());Object.defineProperty(n,"pino",{enumerable:!0,get:function(){return r.default}}),t.__exportStar(Tp(),n),t.__exportStar($E(),n)})(Qe);class LE extends en{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}class ME extends en{constructor(t,r){super(),this.core=t,this.logger=r,this.records=new Map}}class jE{constructor(t,r){this.logger=t,this.core=r}}class zE extends en{constructor(t,r){super(),this.relayer=t,this.logger=r}}class qE extends en{constructor(t){super()}}class HE{constructor(t,r,s,o){this.core=t,this.logger=r,this.name=s}}class BE extends en{constructor(t,r){super(),this.relayer=t,this.logger=r}}class KE extends en{constructor(t,r){super(),this.core=t,this.logger=r}}class kE{constructor(t,r){this.projectId=t,this.logger=r}}class VE{constructor(t){this.opts=t,this.protocol="wc",this.version=2}}class GE{constructor(t){this.client=t}}var pu={},Rp={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=$e,r=Sr;n.DIGEST_LENGTH=64,n.BLOCK_SIZE=128;var s=function(){function p(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return p.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},p.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},p.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},p.prototype.update=function(g,w){if(w===void 0&&(w=g.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var S=0;if(this._bytesHashed+=w,this._bufferLength>0){for(;this._bufferLength<n.BLOCK_SIZE&&w>0;)this._buffer[this._bufferLength++]=g[S++],w--;this._bufferLength===this.blockSize&&(l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(w>=this.blockSize&&(S=l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,g,S,w),w%=this.blockSize);w>0;)this._buffer[this._bufferLength++]=g[S++],w--;return this},p.prototype.finish=function(g){if(!this._finished){var w=this._bytesHashed,S=this._bufferLength,$=w/536870912|0,z=w<<3,F=w%128<112?128:256;this._buffer[S]=128;for(var M=S+1;M<F-8;M++)this._buffer[M]=0;t.writeUint32BE($,this._buffer,F-8),t.writeUint32BE(z,this._buffer,F-4),l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,F),this._finished=!0}for(var M=0;M<this.digestLength/8;M++)t.writeUint32BE(this._stateHi[M],g,M*8),t.writeUint32BE(this._stateLo[M],g,M*8+4);return this},p.prototype.digest=function(){var g=new Uint8Array(this.digestLength);return this.finish(g),g},p.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},p.prototype.restoreState=function(g){return this._stateHi.set(g.stateHi),this._stateLo.set(g.stateLo),this._bufferLength=g.bufferLength,g.buffer&&this._buffer.set(g.buffer),this._bytesHashed=g.bytesHashed,this._finished=!1,this},p.prototype.cleanSavedState=function(g){r.wipe(g.stateHi),r.wipe(g.stateLo),g.buffer&&r.wipe(g.buffer),g.bufferLength=0,g.bytesHashed=0},p}();n.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function l(p,g,w,S,$,z,F){for(var M=w[0],B=w[1],J=w[2],se=w[3],O=w[4],R=w[5],D=w[6],x=w[7],b=S[0],c=S[1],_=S[2],K=S[3],V=S[4],ae=S[5],ce=S[6],ge=S[7],P,q,le,te,G,ee,W,re;F>=128;){for(var xe=0;xe<16;xe++){var ie=8*xe+z;p[xe]=t.readUint32BE($,ie),g[xe]=t.readUint32BE($,ie+4)}for(var xe=0;xe<80;xe++){var me=M,he=B,_e=J,j=se,L=O,A=R,h=D,I=x,ne=b,fe=c,Se=_,He=K,ke=V,Le=ae,pt=ce,dt=ge;if(P=x,q=ge,G=q&65535,ee=q>>>16,W=P&65535,re=P>>>16,P=(O>>>14|V<<32-14)^(O>>>18|V<<32-18)^(V>>>41-32|O<<32-(41-32)),q=(V>>>14|O<<32-14)^(V>>>18|O<<32-18)^(O>>>41-32|V<<32-(41-32)),G+=q&65535,ee+=q>>>16,W+=P&65535,re+=P>>>16,P=O&R^~O&D,q=V&ae^~V&ce,G+=q&65535,ee+=q>>>16,W+=P&65535,re+=P>>>16,P=o[xe*2],q=o[xe*2+1],G+=q&65535,ee+=q>>>16,W+=P&65535,re+=P>>>16,P=p[xe%16],q=g[xe%16],G+=q&65535,ee+=q>>>16,W+=P&65535,re+=P>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,le=W&65535|re<<16,te=G&65535|ee<<16,P=le,q=te,G=q&65535,ee=q>>>16,W=P&65535,re=P>>>16,P=(M>>>28|b<<32-28)^(b>>>34-32|M<<32-(34-32))^(b>>>39-32|M<<32-(39-32)),q=(b>>>28|M<<32-28)^(M>>>34-32|b<<32-(34-32))^(M>>>39-32|b<<32-(39-32)),G+=q&65535,ee+=q>>>16,W+=P&65535,re+=P>>>16,P=M&B^M&J^B&J,q=b&c^b&_^c&_,G+=q&65535,ee+=q>>>16,W+=P&65535,re+=P>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,I=W&65535|re<<16,dt=G&65535|ee<<16,P=j,q=He,G=q&65535,ee=q>>>16,W=P&65535,re=P>>>16,P=le,q=te,G+=q&65535,ee+=q>>>16,W+=P&65535,re+=P>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,j=W&65535|re<<16,He=G&65535|ee<<16,B=me,J=he,se=_e,O=j,R=L,D=A,x=h,M=I,c=ne,_=fe,K=Se,V=He,ae=ke,ce=Le,ge=pt,b=dt,xe%16===15)for(var ie=0;ie<16;ie++)P=p[ie],q=g[ie],G=q&65535,ee=q>>>16,W=P&65535,re=P>>>16,P=p[(ie+9)%16],q=g[(ie+9)%16],G+=q&65535,ee+=q>>>16,W+=P&65535,re+=P>>>16,le=p[(ie+1)%16],te=g[(ie+1)%16],P=(le>>>1|te<<32-1)^(le>>>8|te<<32-8)^le>>>7,q=(te>>>1|le<<32-1)^(te>>>8|le<<32-8)^(te>>>7|le<<32-7),G+=q&65535,ee+=q>>>16,W+=P&65535,re+=P>>>16,le=p[(ie+14)%16],te=g[(ie+14)%16],P=(le>>>19|te<<32-19)^(te>>>61-32|le<<32-(61-32))^le>>>6,q=(te>>>19|le<<32-19)^(le>>>61-32|te<<32-(61-32))^(te>>>6|le<<32-6),G+=q&65535,ee+=q>>>16,W+=P&65535,re+=P>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,p[ie]=W&65535|re<<16,g[ie]=G&65535|ee<<16}P=M,q=b,G=q&65535,ee=q>>>16,W=P&65535,re=P>>>16,P=w[0],q=S[0],G+=q&65535,ee+=q>>>16,W+=P&65535,re+=P>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,w[0]=M=W&65535|re<<16,S[0]=b=G&65535|ee<<16,P=B,q=c,G=q&65535,ee=q>>>16,W=P&65535,re=P>>>16,P=w[1],q=S[1],G+=q&65535,ee+=q>>>16,W+=P&65535,re+=P>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,w[1]=B=W&65535|re<<16,S[1]=c=G&65535|ee<<16,P=J,q=_,G=q&65535,ee=q>>>16,W=P&65535,re=P>>>16,P=w[2],q=S[2],G+=q&65535,ee+=q>>>16,W+=P&65535,re+=P>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,w[2]=J=W&65535|re<<16,S[2]=_=G&65535|ee<<16,P=se,q=K,G=q&65535,ee=q>>>16,W=P&65535,re=P>>>16,P=w[3],q=S[3],G+=q&65535,ee+=q>>>16,W+=P&65535,re+=P>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,w[3]=se=W&65535|re<<16,S[3]=K=G&65535|ee<<16,P=O,q=V,G=q&65535,ee=q>>>16,W=P&65535,re=P>>>16,P=w[4],q=S[4],G+=q&65535,ee+=q>>>16,W+=P&65535,re+=P>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,w[4]=O=W&65535|re<<16,S[4]=V=G&65535|ee<<16,P=R,q=ae,G=q&65535,ee=q>>>16,W=P&65535,re=P>>>16,P=w[5],q=S[5],G+=q&65535,ee+=q>>>16,W+=P&65535,re+=P>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,w[5]=R=W&65535|re<<16,S[5]=ae=G&65535|ee<<16,P=D,q=ce,G=q&65535,ee=q>>>16,W=P&65535,re=P>>>16,P=w[6],q=S[6],G+=q&65535,ee+=q>>>16,W+=P&65535,re+=P>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,w[6]=D=W&65535|re<<16,S[6]=ce=G&65535|ee<<16,P=x,q=ge,G=q&65535,ee=q>>>16,W=P&65535,re=P>>>16,P=w[7],q=S[7],G+=q&65535,ee+=q>>>16,W+=P&65535,re+=P>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,w[7]=x=W&65535|re<<16,S[7]=ge=G&65535|ee<<16,z+=128,F-=128}return z}function d(p){var g=new s;g.update(p);var w=g.digest();return g.clean(),w}n.hash=d})(Rp);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;const t=Cn,r=Rp,s=Sr;n.SIGNATURE_LENGTH=64,n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=64,n.SEED_LENGTH=32;function o(j){const L=new Float64Array(16);if(j)for(let A=0;A<j.length;A++)L[A]=j[A];return L}const l=new Uint8Array(32);l[0]=9;const d=o(),p=o([1]),g=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),w=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),S=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),$=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),z=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function F(j,L){for(let A=0;A<16;A++)j[A]=L[A]|0}function M(j){let L=1;for(let A=0;A<16;A++){let h=j[A]+L+65535;L=Math.floor(h/65536),j[A]=h-L*65536}j[0]+=L-1+37*(L-1)}function B(j,L,A){const h=~(A-1);for(let I=0;I<16;I++){const ne=h&(j[I]^L[I]);j[I]^=ne,L[I]^=ne}}function J(j,L){const A=o(),h=o();for(let I=0;I<16;I++)h[I]=L[I];M(h),M(h),M(h);for(let I=0;I<2;I++){A[0]=h[0]-65517;for(let fe=1;fe<15;fe++)A[fe]=h[fe]-65535-(A[fe-1]>>16&1),A[fe-1]&=65535;A[15]=h[15]-32767-(A[14]>>16&1);const ne=A[15]>>16&1;A[14]&=65535,B(h,A,1-ne)}for(let I=0;I<16;I++)j[2*I]=h[I]&255,j[2*I+1]=h[I]>>8}function se(j,L){let A=0;for(let h=0;h<32;h++)A|=j[h]^L[h];return(1&A-1>>>8)-1}function O(j,L){const A=new Uint8Array(32),h=new Uint8Array(32);return J(A,j),J(h,L),se(A,h)}function R(j){const L=new Uint8Array(32);return J(L,j),L[0]&1}function D(j,L){for(let A=0;A<16;A++)j[A]=L[2*A]+(L[2*A+1]<<8);j[15]&=32767}function x(j,L,A){for(let h=0;h<16;h++)j[h]=L[h]+A[h]}function b(j,L,A){for(let h=0;h<16;h++)j[h]=L[h]-A[h]}function c(j,L,A){let h,I,ne=0,fe=0,Se=0,He=0,ke=0,Le=0,pt=0,dt=0,je=0,Ie=0,Re=0,Ue=0,ze=0,Oe=0,Fe=0,De=0,Ae=0,Be=0,Ce=0,Ve=0,We=0,et=0,tt=0,Je=0,Qt=0,ur=0,kr=0,er=0,ti=0,di=0,Ti=0,mt=A[0],gt=A[1],wt=A[2],Et=A[3],_t=A[4],vt=A[5],Ut=A[6],Ft=A[7],Dt=A[8],$t=A[9],St=A[10],Ot=A[11],It=A[12],ht=A[13],Lt=A[14],Mt=A[15];h=L[0],ne+=h*mt,fe+=h*gt,Se+=h*wt,He+=h*Et,ke+=h*_t,Le+=h*vt,pt+=h*Ut,dt+=h*Ft,je+=h*Dt,Ie+=h*$t,Re+=h*St,Ue+=h*Ot,ze+=h*It,Oe+=h*ht,Fe+=h*Lt,De+=h*Mt,h=L[1],fe+=h*mt,Se+=h*gt,He+=h*wt,ke+=h*Et,Le+=h*_t,pt+=h*vt,dt+=h*Ut,je+=h*Ft,Ie+=h*Dt,Re+=h*$t,Ue+=h*St,ze+=h*Ot,Oe+=h*It,Fe+=h*ht,De+=h*Lt,Ae+=h*Mt,h=L[2],Se+=h*mt,He+=h*gt,ke+=h*wt,Le+=h*Et,pt+=h*_t,dt+=h*vt,je+=h*Ut,Ie+=h*Ft,Re+=h*Dt,Ue+=h*$t,ze+=h*St,Oe+=h*Ot,Fe+=h*It,De+=h*ht,Ae+=h*Lt,Be+=h*Mt,h=L[3],He+=h*mt,ke+=h*gt,Le+=h*wt,pt+=h*Et,dt+=h*_t,je+=h*vt,Ie+=h*Ut,Re+=h*Ft,Ue+=h*Dt,ze+=h*$t,Oe+=h*St,Fe+=h*Ot,De+=h*It,Ae+=h*ht,Be+=h*Lt,Ce+=h*Mt,h=L[4],ke+=h*mt,Le+=h*gt,pt+=h*wt,dt+=h*Et,je+=h*_t,Ie+=h*vt,Re+=h*Ut,Ue+=h*Ft,ze+=h*Dt,Oe+=h*$t,Fe+=h*St,De+=h*Ot,Ae+=h*It,Be+=h*ht,Ce+=h*Lt,Ve+=h*Mt,h=L[5],Le+=h*mt,pt+=h*gt,dt+=h*wt,je+=h*Et,Ie+=h*_t,Re+=h*vt,Ue+=h*Ut,ze+=h*Ft,Oe+=h*Dt,Fe+=h*$t,De+=h*St,Ae+=h*Ot,Be+=h*It,Ce+=h*ht,Ve+=h*Lt,We+=h*Mt,h=L[6],pt+=h*mt,dt+=h*gt,je+=h*wt,Ie+=h*Et,Re+=h*_t,Ue+=h*vt,ze+=h*Ut,Oe+=h*Ft,Fe+=h*Dt,De+=h*$t,Ae+=h*St,Be+=h*Ot,Ce+=h*It,Ve+=h*ht,We+=h*Lt,et+=h*Mt,h=L[7],dt+=h*mt,je+=h*gt,Ie+=h*wt,Re+=h*Et,Ue+=h*_t,ze+=h*vt,Oe+=h*Ut,Fe+=h*Ft,De+=h*Dt,Ae+=h*$t,Be+=h*St,Ce+=h*Ot,Ve+=h*It,We+=h*ht,et+=h*Lt,tt+=h*Mt,h=L[8],je+=h*mt,Ie+=h*gt,Re+=h*wt,Ue+=h*Et,ze+=h*_t,Oe+=h*vt,Fe+=h*Ut,De+=h*Ft,Ae+=h*Dt,Be+=h*$t,Ce+=h*St,Ve+=h*Ot,We+=h*It,et+=h*ht,tt+=h*Lt,Je+=h*Mt,h=L[9],Ie+=h*mt,Re+=h*gt,Ue+=h*wt,ze+=h*Et,Oe+=h*_t,Fe+=h*vt,De+=h*Ut,Ae+=h*Ft,Be+=h*Dt,Ce+=h*$t,Ve+=h*St,We+=h*Ot,et+=h*It,tt+=h*ht,Je+=h*Lt,Qt+=h*Mt,h=L[10],Re+=h*mt,Ue+=h*gt,ze+=h*wt,Oe+=h*Et,Fe+=h*_t,De+=h*vt,Ae+=h*Ut,Be+=h*Ft,Ce+=h*Dt,Ve+=h*$t,We+=h*St,et+=h*Ot,tt+=h*It,Je+=h*ht,Qt+=h*Lt,ur+=h*Mt,h=L[11],Ue+=h*mt,ze+=h*gt,Oe+=h*wt,Fe+=h*Et,De+=h*_t,Ae+=h*vt,Be+=h*Ut,Ce+=h*Ft,Ve+=h*Dt,We+=h*$t,et+=h*St,tt+=h*Ot,Je+=h*It,Qt+=h*ht,ur+=h*Lt,kr+=h*Mt,h=L[12],ze+=h*mt,Oe+=h*gt,Fe+=h*wt,De+=h*Et,Ae+=h*_t,Be+=h*vt,Ce+=h*Ut,Ve+=h*Ft,We+=h*Dt,et+=h*$t,tt+=h*St,Je+=h*Ot,Qt+=h*It,ur+=h*ht,kr+=h*Lt,er+=h*Mt,h=L[13],Oe+=h*mt,Fe+=h*gt,De+=h*wt,Ae+=h*Et,Be+=h*_t,Ce+=h*vt,Ve+=h*Ut,We+=h*Ft,et+=h*Dt,tt+=h*$t,Je+=h*St,Qt+=h*Ot,ur+=h*It,kr+=h*ht,er+=h*Lt,ti+=h*Mt,h=L[14],Fe+=h*mt,De+=h*gt,Ae+=h*wt,Be+=h*Et,Ce+=h*_t,Ve+=h*vt,We+=h*Ut,et+=h*Ft,tt+=h*Dt,Je+=h*$t,Qt+=h*St,ur+=h*Ot,kr+=h*It,er+=h*ht,ti+=h*Lt,di+=h*Mt,h=L[15],De+=h*mt,Ae+=h*gt,Be+=h*wt,Ce+=h*Et,Ve+=h*_t,We+=h*vt,et+=h*Ut,tt+=h*Ft,Je+=h*Dt,Qt+=h*$t,ur+=h*St,kr+=h*Ot,er+=h*It,ti+=h*ht,di+=h*Lt,Ti+=h*Mt,ne+=38*Ae,fe+=38*Be,Se+=38*Ce,He+=38*Ve,ke+=38*We,Le+=38*et,pt+=38*tt,dt+=38*Je,je+=38*Qt,Ie+=38*ur,Re+=38*kr,Ue+=38*er,ze+=38*ti,Oe+=38*di,Fe+=38*Ti,I=1,h=ne+I+65535,I=Math.floor(h/65536),ne=h-I*65536,h=fe+I+65535,I=Math.floor(h/65536),fe=h-I*65536,h=Se+I+65535,I=Math.floor(h/65536),Se=h-I*65536,h=He+I+65535,I=Math.floor(h/65536),He=h-I*65536,h=ke+I+65535,I=Math.floor(h/65536),ke=h-I*65536,h=Le+I+65535,I=Math.floor(h/65536),Le=h-I*65536,h=pt+I+65535,I=Math.floor(h/65536),pt=h-I*65536,h=dt+I+65535,I=Math.floor(h/65536),dt=h-I*65536,h=je+I+65535,I=Math.floor(h/65536),je=h-I*65536,h=Ie+I+65535,I=Math.floor(h/65536),Ie=h-I*65536,h=Re+I+65535,I=Math.floor(h/65536),Re=h-I*65536,h=Ue+I+65535,I=Math.floor(h/65536),Ue=h-I*65536,h=ze+I+65535,I=Math.floor(h/65536),ze=h-I*65536,h=Oe+I+65535,I=Math.floor(h/65536),Oe=h-I*65536,h=Fe+I+65535,I=Math.floor(h/65536),Fe=h-I*65536,h=De+I+65535,I=Math.floor(h/65536),De=h-I*65536,ne+=I-1+37*(I-1),I=1,h=ne+I+65535,I=Math.floor(h/65536),ne=h-I*65536,h=fe+I+65535,I=Math.floor(h/65536),fe=h-I*65536,h=Se+I+65535,I=Math.floor(h/65536),Se=h-I*65536,h=He+I+65535,I=Math.floor(h/65536),He=h-I*65536,h=ke+I+65535,I=Math.floor(h/65536),ke=h-I*65536,h=Le+I+65535,I=Math.floor(h/65536),Le=h-I*65536,h=pt+I+65535,I=Math.floor(h/65536),pt=h-I*65536,h=dt+I+65535,I=Math.floor(h/65536),dt=h-I*65536,h=je+I+65535,I=Math.floor(h/65536),je=h-I*65536,h=Ie+I+65535,I=Math.floor(h/65536),Ie=h-I*65536,h=Re+I+65535,I=Math.floor(h/65536),Re=h-I*65536,h=Ue+I+65535,I=Math.floor(h/65536),Ue=h-I*65536,h=ze+I+65535,I=Math.floor(h/65536),ze=h-I*65536,h=Oe+I+65535,I=Math.floor(h/65536),Oe=h-I*65536,h=Fe+I+65535,I=Math.floor(h/65536),Fe=h-I*65536,h=De+I+65535,I=Math.floor(h/65536),De=h-I*65536,ne+=I-1+37*(I-1),j[0]=ne,j[1]=fe,j[2]=Se,j[3]=He,j[4]=ke,j[5]=Le,j[6]=pt,j[7]=dt,j[8]=je,j[9]=Ie,j[10]=Re,j[11]=Ue,j[12]=ze,j[13]=Oe,j[14]=Fe,j[15]=De}function _(j,L){c(j,L,L)}function K(j,L){const A=o();let h;for(h=0;h<16;h++)A[h]=L[h];for(h=253;h>=0;h--)_(A,A),h!==2&&h!==4&&c(A,A,L);for(h=0;h<16;h++)j[h]=A[h]}function V(j,L){const A=o();let h;for(h=0;h<16;h++)A[h]=L[h];for(h=250;h>=0;h--)_(A,A),h!==1&&c(A,A,L);for(h=0;h<16;h++)j[h]=A[h]}function ae(j,L){const A=o(),h=o(),I=o(),ne=o(),fe=o(),Se=o(),He=o(),ke=o(),Le=o();b(A,j[1],j[0]),b(Le,L[1],L[0]),c(A,A,Le),x(h,j[0],j[1]),x(Le,L[0],L[1]),c(h,h,Le),c(I,j[3],L[3]),c(I,I,w),c(ne,j[2],L[2]),x(ne,ne,ne),b(fe,h,A),b(Se,ne,I),x(He,ne,I),x(ke,h,A),c(j[0],fe,Se),c(j[1],ke,He),c(j[2],He,Se),c(j[3],fe,ke)}function ce(j,L,A){for(let h=0;h<4;h++)B(j[h],L[h],A)}function ge(j,L){const A=o(),h=o(),I=o();K(I,L[2]),c(A,L[0],I),c(h,L[1],I),J(j,h),j[31]^=R(A)<<7}function P(j,L,A){F(j[0],d),F(j[1],p),F(j[2],p),F(j[3],d);for(let h=255;h>=0;--h){const I=A[h/8|0]>>(h&7)&1;ce(j,L,I),ae(L,j),ae(j,j),ce(j,L,I)}}function q(j,L){const A=[o(),o(),o(),o()];F(A[0],S),F(A[1],$),F(A[2],p),c(A[3],S,$),P(j,A,L)}function le(j){if(j.length!==n.SEED_LENGTH)throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`);const L=(0,r.hash)(j);L[0]&=248,L[31]&=127,L[31]|=64;const A=new Uint8Array(32),h=[o(),o(),o(),o()];q(h,L),ge(A,h);const I=new Uint8Array(64);return I.set(j),I.set(A,32),{publicKey:A,secretKey:I}}n.generateKeyPairFromSeed=le;function te(j){const L=(0,t.randomBytes)(32,j),A=le(L);return(0,s.wipe)(L),A}n.generateKeyPair=te;function G(j){if(j.length!==n.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(j.subarray(32))}n.extractPublicKeyFromSecretKey=G;const ee=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function W(j,L){let A,h,I,ne;for(h=63;h>=32;--h){for(A=0,I=h-32,ne=h-12;I<ne;++I)L[I]+=A-16*L[h]*ee[I-(h-32)],A=Math.floor((L[I]+128)/256),L[I]-=A*256;L[I]+=A,L[h]=0}for(A=0,I=0;I<32;I++)L[I]+=A-(L[31]>>4)*ee[I],A=L[I]>>8,L[I]&=255;for(I=0;I<32;I++)L[I]-=A*ee[I];for(h=0;h<32;h++)L[h+1]+=L[h]>>8,j[h]=L[h]&255}function re(j){const L=new Float64Array(64);for(let A=0;A<64;A++)L[A]=j[A];for(let A=0;A<64;A++)j[A]=0;W(j,L)}function xe(j,L){const A=new Float64Array(64),h=[o(),o(),o(),o()],I=(0,r.hash)(j.subarray(0,32));I[0]&=248,I[31]&=127,I[31]|=64;const ne=new Uint8Array(64);ne.set(I.subarray(32),32);const fe=new r.SHA512;fe.update(ne.subarray(32)),fe.update(L);const Se=fe.digest();fe.clean(),re(Se),q(h,Se),ge(ne,h),fe.reset(),fe.update(ne.subarray(0,32)),fe.update(j.subarray(32)),fe.update(L);const He=fe.digest();re(He);for(let ke=0;ke<32;ke++)A[ke]=Se[ke];for(let ke=0;ke<32;ke++)for(let Le=0;Le<32;Le++)A[ke+Le]+=He[ke]*I[Le];return W(ne.subarray(32),A),ne}n.sign=xe;function ie(j,L){const A=o(),h=o(),I=o(),ne=o(),fe=o(),Se=o(),He=o();return F(j[2],p),D(j[1],L),_(I,j[1]),c(ne,I,g),b(I,I,j[2]),x(ne,j[2],ne),_(fe,ne),_(Se,fe),c(He,Se,fe),c(A,He,I),c(A,A,ne),V(A,A),c(A,A,I),c(A,A,ne),c(A,A,ne),c(j[0],A,ne),_(h,j[0]),c(h,h,ne),O(h,I)&&c(j[0],j[0],z),_(h,j[0]),c(h,h,ne),O(h,I)?-1:(R(j[0])===L[31]>>7&&b(j[0],d,j[0]),c(j[3],j[0],j[1]),0)}function me(j,L,A){const h=new Uint8Array(32),I=[o(),o(),o(),o()],ne=[o(),o(),o(),o()];if(A.length!==n.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`);if(ie(ne,j))return!1;const fe=new r.SHA512;fe.update(A.subarray(0,32)),fe.update(j),fe.update(L);const Se=fe.digest();return re(Se),P(I,ne,Se),q(ne,A.subarray(32)),ae(I,ne),ge(h,I),!se(A,h)}n.verify=me;function he(j){let L=[o(),o(),o(),o()];if(ie(L,j))throw new Error("Ed25519: invalid public key");let A=o(),h=o(),I=L[1];x(A,p,I),b(h,p,I),K(h,h),c(A,A,h);let ne=new Uint8Array(32);return J(ne,A),ne}n.convertPublicKeyToX25519=he;function _e(j){const L=(0,r.hash)(j.subarray(0,32));L[0]&=248,L[31]&=127,L[31]|=64;const A=new Uint8Array(L.subarray(0,32));return(0,s.wipe)(L),A}n.convertSecretKeyToX25519=_e})(pu);const WE="EdDSA",YE="JWT",Up=".",Fp="base64url",JE="utf8",XE="utf8",ZE=":",QE="did",e3="key",hf="base58btc",t3="z",r3="K36",i3=32;function Aa(n){return cr(vr(Jc(n),JE),Fp)}function $p(n){const t=vr(r3,hf),r=t3+cr($c([t,n]),hf);return[QE,e3,r].join(ZE)}function n3(n){return cr(n,Fp)}function s3(n){return vr([Aa(n.header),Aa(n.payload)].join(Up),XE)}function a3(n){return[Aa(n.header),Aa(n.payload),n3(n.signature)].join(Up)}function lf(n=Cn.randomBytes(i3)){return pu.generateKeyPairFromSeed(n)}async function o3(n,t,r,s,o=ye.fromMiliseconds(Date.now())){const l={alg:WE,typ:YE},d=$p(s.publicKey),p=o+r,g={iss:d,sub:n,aud:t,iat:o,exp:p},w=s3({header:l,payload:g}),S=pu.sign(s.secretKey,w);return a3({header:l,payload:g,signature:S})}const c3=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),u3=()=>typeof window<"u",ff=n=>n.split("?")[0],pf=10,h3=c3();class l3{constructor(t){if(this.url=t,this.events=new Dr.exports.EventEmitter,this.registering=!1,!bl(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),t()},this.socket.close()})}async send(t,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Jc(t))}catch(s){this.onError(t.id,s)}}register(t=this.url){if(!bl(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,o)=>{this.events.once("register_error",l=>{this.resetMaxListeners(),o(l)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=t,this.registering=!0,new Promise((r,s)=>{const o=V_.isReactNative()?void 0:{rejectUnauthorized:!G_(t)},l=new h3(t,[],o);u3()?l.onerror=d=>{const p=d;s(this.emitError(p.error))}:l.on("error",d=>{s(this.emitError(d))}),l.onopen=()=>{this.onOpen(l),r(l)}})}onOpen(t){t.onmessage=r=>this.onPayload(r),t.onclose=r=>this.onClose(r),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?Vf(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const s=this.parseError(r),o=s.message||s.toString(),l=Xc(t,o);this.events.emit("payload",l)}parseError(t,r=this.url){return W_(t,ff(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>pf&&this.events.setMaxListeners(pf)}emitError(t){const r=this.parseError(new Error((t==null?void 0:t.message)||`WebSocket connection failed for host: ${ff(this.url)}`));return this.events.emit("register_error",r),r}}var Bc={exports:{}};(function(n,t){var r=200,s="__lodash_hash_undefined__",o=1,l=2,d=9007199254740991,p="[object Arguments]",g="[object Array]",w="[object AsyncFunction]",S="[object Boolean]",$="[object Date]",z="[object Error]",F="[object Function]",M="[object GeneratorFunction]",B="[object Map]",J="[object Number]",se="[object Null]",O="[object Object]",R="[object Promise]",D="[object Proxy]",x="[object RegExp]",b="[object Set]",c="[object String]",_="[object Symbol]",K="[object Undefined]",V="[object WeakMap]",ae="[object ArrayBuffer]",ce="[object DataView]",ge="[object Float32Array]",P="[object Float64Array]",q="[object Int8Array]",le="[object Int16Array]",te="[object Int32Array]",G="[object Uint8Array]",ee="[object Uint8ClampedArray]",W="[object Uint16Array]",re="[object Uint32Array]",xe=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,me=/^(?:0|[1-9]\d*)$/,he={};he[ge]=he[P]=he[q]=he[le]=he[te]=he[G]=he[ee]=he[W]=he[re]=!0,he[p]=he[g]=he[ae]=he[S]=he[ce]=he[$]=he[z]=he[F]=he[B]=he[J]=he[O]=he[x]=he[b]=he[c]=he[V]=!1;var _e=typeof Ji=="object"&&Ji&&Ji.Object===Object&&Ji,j=typeof self=="object"&&self&&self.Object===Object&&self,L=_e||j||Function("return this")(),A=t&&!t.nodeType&&t,h=A&&!0&&n&&!n.nodeType&&n,I=h&&h.exports===A,ne=I&&_e.process,fe=function(){try{return ne&&ne.binding&&ne.binding("util")}catch{}}(),Se=fe&&fe.isTypedArray;function He(m,N){for(var Z=-1,pe=m==null?0:m.length,ot=0,Ne=[];++Z<pe;){var lt=m[Z];N(lt,Z,m)&&(Ne[ot++]=lt)}return Ne}function ke(m,N){for(var Z=-1,pe=N.length,ot=m.length;++Z<pe;)m[ot+Z]=N[Z];return m}function Le(m,N){for(var Z=-1,pe=m==null?0:m.length;++Z<pe;)if(N(m[Z],Z,m))return!0;return!1}function pt(m,N){for(var Z=-1,pe=Array(m);++Z<m;)pe[Z]=N(Z);return pe}function dt(m){return function(N){return m(N)}}function je(m,N){return m.has(N)}function Ie(m,N){return m==null?void 0:m[N]}function Re(m){var N=-1,Z=Array(m.size);return m.forEach(function(pe,ot){Z[++N]=[ot,pe]}),Z}function Ue(m,N){return function(Z){return m(N(Z))}}function ze(m){var N=-1,Z=Array(m.size);return m.forEach(function(pe){Z[++N]=pe}),Z}var Oe=Array.prototype,Fe=Function.prototype,De=Object.prototype,Ae=L["__core-js_shared__"],Be=Fe.toString,Ce=De.hasOwnProperty,Ve=function(){var m=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}(),We=De.toString,et=RegExp("^"+Be.call(Ce).replace(xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=I?L.Buffer:void 0,Je=L.Symbol,Qt=L.Uint8Array,ur=De.propertyIsEnumerable,kr=Oe.splice,er=Je?Je.toStringTag:void 0,ti=Object.getOwnPropertySymbols,di=tt?tt.isBuffer:void 0,Ti=Ue(Object.keys,Object),mt=yr(L,"DataView"),gt=yr(L,"Map"),wt=yr(L,"Promise"),Et=yr(L,"Set"),_t=yr(L,"WeakMap"),vt=yr(Object,"create"),Ut=ii(mt),Ft=ii(gt),Dt=ii(wt),$t=ii(Et),St=ii(_t),Ot=Je?Je.prototype:void 0,It=Ot?Ot.valueOf:void 0;function ht(m){var N=-1,Z=m==null?0:m.length;for(this.clear();++N<Z;){var pe=m[N];this.set(pe[0],pe[1])}}function Lt(){this.__data__=vt?vt(null):{},this.size=0}function Mt(m){var N=this.has(m)&&delete this.__data__[m];return this.size-=N?1:0,N}function za(m){var N=this.__data__;if(vt){var Z=N[m];return Z===s?void 0:Z}return Ce.call(N,m)?N[m]:void 0}function qa(m){var N=this.__data__;return vt?N[m]!==void 0:Ce.call(N,m)}function Ha(m,N){var Z=this.__data__;return this.size+=this.has(m)?0:1,Z[m]=vt&&N===void 0?s:N,this}ht.prototype.clear=Lt,ht.prototype.delete=Mt,ht.prototype.get=za,ht.prototype.has=qa,ht.prototype.set=Ha;function Ir(m){var N=-1,Z=m==null?0:m.length;for(this.clear();++N<Z;){var pe=m[N];this.set(pe[0],pe[1])}}function Ba(){this.__data__=[],this.size=0}function Ka(m){var N=this.__data__,Z=Ri(N,m);if(Z<0)return!1;var pe=N.length-1;return Z==pe?N.pop():kr.call(N,Z,1),--this.size,!0}function ka(m){var N=this.__data__,Z=Ri(N,m);return Z<0?void 0:N[Z][1]}function Va(m){return Ri(this.__data__,m)>-1}function Ga(m,N){var Z=this.__data__,pe=Ri(Z,m);return pe<0?(++this.size,Z.push([m,N])):Z[pe][1]=N,this}Ir.prototype.clear=Ba,Ir.prototype.delete=Ka,Ir.prototype.get=ka,Ir.prototype.has=Va,Ir.prototype.set=Ga;function ri(m){var N=-1,Z=m==null?0:m.length;for(this.clear();++N<Z;){var pe=m[N];this.set(pe[0],pe[1])}}function tn(){this.size=0,this.__data__={hash:new ht,map:new(gt||Ir),string:new ht}}function Wa(m){var N=gi(this,m).delete(m);return this.size-=N?1:0,N}function rn(m){return gi(this,m).get(m)}function Ya(m){return gi(this,m).has(m)}function Ja(m,N){var Z=gi(this,m),pe=Z.size;return Z.set(m,N),this.size+=Z.size==pe?0:1,this}ri.prototype.clear=tn,ri.prototype.delete=Wa,ri.prototype.get=rn,ri.prototype.has=Ya,ri.prototype.set=Ja;function nn(m){var N=-1,Z=m==null?0:m.length;for(this.__data__=new ri;++N<Z;)this.add(m[N])}function ds(m){return this.__data__.set(m,s),this}function gs(m){return this.__data__.has(m)}nn.prototype.add=nn.prototype.push=ds,nn.prototype.has=gs;function Lr(m){var N=this.__data__=new Ir(m);this.size=N.size}function Xa(){this.__data__=new Ir,this.size=0}function Za(m){var N=this.__data__,Z=N.delete(m);return this.size=N.size,Z}function Qa(m){return this.__data__.get(m)}function eo(m){return this.__data__.has(m)}function vs(m,N){var Z=this.__data__;if(Z instanceof Ir){var pe=Z.__data__;if(!gt||pe.length<r-1)return pe.push([m,N]),this.size=++Z.size,this;Z=this.__data__=new ri(pe)}return Z.set(m,N),this.size=Z.size,this}Lr.prototype.clear=Xa,Lr.prototype.delete=Za,Lr.prototype.get=Qa,Lr.prototype.has=eo,Lr.prototype.set=vs;function ys(m,N){var Z=on(m),pe=!Z&&As(m),ot=!Z&&!pe&&Tn(m),Ne=!Z&&!pe&&!ot&&Ts(m),lt=Z||pe||ot||Ne,jt=lt?pt(m.length,String):[],Xe=jt.length;for(var ct in m)(N||Ce.call(m,ct))&&!(lt&&(ct=="length"||ot&&(ct=="offset"||ct=="parent")||Ne&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||Ss(ct,Xe)))&&jt.push(ct);return jt}function Ri(m,N){for(var Z=m.length;Z--;)if(Os(m[Z][0],N))return Z;return-1}function Pn(m,N,Z){var pe=N(m);return on(m)?pe:ke(pe,Z(m))}function Ui(m){return m==null?m===void 0?K:se:er&&er in Object(m)?Es(m):io(m)}function Nn(m){return $i(m)&&Ui(m)==p}function Fi(m,N,Z,pe,ot){return m===N?!0:m==null||N==null||!$i(m)&&!$i(N)?m!==m&&N!==N:_s(m,N,Z,pe,Fi,ot)}function _s(m,N,Z,pe,ot,Ne){var lt=on(m),jt=on(N),Xe=lt?g:Vr(m),ct=jt?g:Vr(N);Xe=Xe==p?O:Xe,ct=ct==p?O:ct;var At=Xe==O,hr=ct==O,zt=Xe==ct;if(zt&&Tn(m)){if(!Tn(N))return!1;lt=!0,At=!1}if(zt&&!At)return Ne||(Ne=new Lr),lt||Ts(m)?sn(m,N,Z,pe,ot,Ne):ro(m,N,Xe,Z,pe,ot,Ne);if(!(Z&o)){var ft=At&&Ce.call(m,"__wrapped__"),tr=hr&&Ce.call(N,"__wrapped__");if(ft||tr){var Mr=ft?m.value():m,xr=tr?N.value():N;return Ne||(Ne=new Lr),ot(Mr,xr,Z,pe,Ne)}}return zt?(Ne||(Ne=new Lr),ws(m,N,Z,pe,ot,Ne)):!1}function to(m){if(!Ns(m)||xs(m))return!1;var N=cn(m)?et:ie;return N.test(ii(m))}function bs(m){return $i(m)&&Ps(m.length)&&!!he[Ui(m)]}function ms(m){if(!Cs(m))return Ti(m);var N=[];for(var Z in Object(m))Ce.call(m,Z)&&Z!="constructor"&&N.push(Z);return N}function sn(m,N,Z,pe,ot,Ne){var lt=Z&o,jt=m.length,Xe=N.length;if(jt!=Xe&&!(lt&&Xe>jt))return!1;var ct=Ne.get(m);if(ct&&Ne.get(N))return ct==N;var At=-1,hr=!0,zt=Z&l?new nn:void 0;for(Ne.set(m,N),Ne.set(N,m);++At<jt;){var ft=m[At],tr=N[At];if(pe)var Mr=lt?pe(tr,ft,At,N,m,Ne):pe(ft,tr,At,m,N,Ne);if(Mr!==void 0){if(Mr)continue;hr=!1;break}if(zt){if(!Le(N,function(xr,Gr){if(!je(zt,Gr)&&(ft===xr||ot(ft,xr,Z,pe,Ne)))return zt.push(Gr)})){hr=!1;break}}else if(!(ft===tr||ot(ft,tr,Z,pe,Ne))){hr=!1;break}}return Ne.delete(m),Ne.delete(N),hr}function ro(m,N,Z,pe,ot,Ne,lt){switch(Z){case ce:if(m.byteLength!=N.byteLength||m.byteOffset!=N.byteOffset)return!1;m=m.buffer,N=N.buffer;case ae:return!(m.byteLength!=N.byteLength||!Ne(new Qt(m),new Qt(N)));case S:case $:case J:return Os(+m,+N);case z:return m.name==N.name&&m.message==N.message;case x:case c:return m==N+"";case B:var jt=Re;case b:var Xe=pe&o;if(jt||(jt=ze),m.size!=N.size&&!Xe)return!1;var ct=lt.get(m);if(ct)return ct==N;pe|=l,lt.set(m,N);var At=sn(jt(m),jt(N),pe,ot,Ne,lt);return lt.delete(m),At;case _:if(It)return It.call(m)==It.call(N)}return!1}function ws(m,N,Z,pe,ot,Ne){var lt=Z&o,jt=an(m),Xe=jt.length,ct=an(N),At=ct.length;if(Xe!=At&&!lt)return!1;for(var hr=Xe;hr--;){var zt=jt[hr];if(!(lt?zt in N:Ce.call(N,zt)))return!1}var ft=Ne.get(m);if(ft&&Ne.get(N))return ft==N;var tr=!0;Ne.set(m,N),Ne.set(N,m);for(var Mr=lt;++hr<Xe;){zt=jt[hr];var xr=m[zt],Gr=N[zt];if(pe)var Rn=lt?pe(Gr,xr,zt,N,m,Ne):pe(xr,Gr,zt,m,N,Ne);if(!(Rn===void 0?xr===Gr||ot(xr,Gr,Z,pe,Ne):Rn)){tr=!1;break}Mr||(Mr=zt=="constructor")}if(tr&&!Mr){var Li=m.constructor,Kt=N.constructor;Li!=Kt&&"constructor"in m&&"constructor"in N&&!(typeof Li=="function"&&Li instanceof Li&&typeof Kt=="function"&&Kt instanceof Kt)&&(tr=!1)}return Ne.delete(m),Ne.delete(N),tr}function an(m){return Pn(m,ao,Ds)}function gi(m,N){var Z=m.__data__;return Is(N)?Z[typeof N=="string"?"string":"hash"]:Z.map}function yr(m,N){var Z=Ie(m,N);return to(Z)?Z:void 0}function Es(m){var N=Ce.call(m,er),Z=m[er];try{m[er]=void 0;var pe=!0}catch{}var ot=We.call(m);return pe&&(N?m[er]=Z:delete m[er]),ot}var Ds=ti?function(m){return m==null?[]:(m=Object(m),He(ti(m),function(N){return ur.call(m,N)}))}:at,Vr=Ui;(mt&&Vr(new mt(new ArrayBuffer(1)))!=ce||gt&&Vr(new gt)!=B||wt&&Vr(wt.resolve())!=R||Et&&Vr(new Et)!=b||_t&&Vr(new _t)!=V)&&(Vr=function(m){var N=Ui(m),Z=N==O?m.constructor:void 0,pe=Z?ii(Z):"";if(pe)switch(pe){case Ut:return ce;case Ft:return B;case Dt:return R;case $t:return b;case St:return V}return N});function Ss(m,N){return N=N==null?d:N,!!N&&(typeof m=="number"||me.test(m))&&m>-1&&m%1==0&&m<N}function Is(m){var N=typeof m;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?m!=="__proto__":m===null}function xs(m){return!!Ve&&Ve in m}function Cs(m){var N=m&&m.constructor,Z=typeof N=="function"&&N.prototype||De;return m===Z}function io(m){return We.call(m)}function ii(m){if(m!=null){try{return Be.call(m)}catch{}try{return m+""}catch{}}return""}function Os(m,N){return m===N||m!==m&&N!==N}var As=Nn(function(){return arguments}())?Nn:function(m){return $i(m)&&Ce.call(m,"callee")&&!ur.call(m,"callee")},on=Array.isArray;function no(m){return m!=null&&Ps(m.length)&&!cn(m)}var Tn=di||st;function so(m,N){return Fi(m,N)}function cn(m){if(!Ns(m))return!1;var N=Ui(m);return N==F||N==M||N==w||N==D}function Ps(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=d}function Ns(m){var N=typeof m;return m!=null&&(N=="object"||N=="function")}function $i(m){return m!=null&&typeof m=="object"}var Ts=Se?dt(Se):bs;function ao(m){return no(m)?ys(m):ms(m)}function at(){return[]}function st(){return!1}n.exports=so})(Bc,Bc.exports);const f3=Bc.exports;function p3(n,t){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var o=0;o<n.length;o++){var l=n.charAt(o),d=l.charCodeAt(0);if(r[d]!==255)throw new TypeError(l+" is ambiguous");r[d]=o}var p=n.length,g=n.charAt(0),w=Math.log(p)/Math.log(256),S=Math.log(256)/Math.log(p);function $(M){if(M instanceof Uint8Array||(ArrayBuffer.isView(M)?M=new Uint8Array(M.buffer,M.byteOffset,M.byteLength):Array.isArray(M)&&(M=Uint8Array.from(M))),!(M instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(M.length===0)return"";for(var B=0,J=0,se=0,O=M.length;se!==O&&M[se]===0;)se++,B++;for(var R=(O-se)*S+1>>>0,D=new Uint8Array(R);se!==O;){for(var x=M[se],b=0,c=R-1;(x!==0||b<J)&&c!==-1;c--,b++)x+=256*D[c]>>>0,D[c]=x%p>>>0,x=x/p>>>0;if(x!==0)throw new Error("Non-zero carry");J=b,se++}for(var _=R-J;_!==R&&D[_]===0;)_++;for(var K=g.repeat(B);_<R;++_)K+=n.charAt(D[_]);return K}function z(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return new Uint8Array;var B=0;if(M[B]!==" "){for(var J=0,se=0;M[B]===g;)J++,B++;for(var O=(M.length-B)*w+1>>>0,R=new Uint8Array(O);M[B];){var D=r[M.charCodeAt(B)];if(D===255)return;for(var x=0,b=O-1;(D!==0||x<se)&&b!==-1;b--,x++)D+=p*R[b]>>>0,R[b]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");se=x,B++}if(M[B]!==" "){for(var c=O-se;c!==O&&R[c]===0;)c++;for(var _=new Uint8Array(J+(O-c)),K=J;c!==O;)_[K++]=R[c++];return _}}}function F(M){var B=z(M);if(B)return B;throw new Error(`Non-${t} character`)}return{encode:$,decodeUnsafe:z,decode:F}}var d3=p3,g3=d3;const Lp=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},v3=n=>new TextEncoder().encode(n),y3=n=>new TextDecoder().decode(n);class _3{constructor(t,r,s){this.name=t,this.prefix=r,this.baseEncode=s}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class b3{constructor(t,r,s){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Mp(this,t)}}class m3{constructor(t){this.decoders=t}or(t){return Mp(this,t)}decode(t){const r=t[0],s=this.decoders[r];if(s)return s.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Mp=(n,t)=>new m3({...n.decoders||{[n.prefix]:n},...t.decoders||{[t.prefix]:t}});class w3{constructor(t,r,s,o){this.name=t,this.prefix=r,this.baseEncode=s,this.baseDecode=o,this.encoder=new _3(t,r,s),this.decoder=new b3(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Ma=({name:n,prefix:t,encode:r,decode:s})=>new w3(n,t,r,s),ps=({prefix:n,name:t,alphabet:r})=>{const{encode:s,decode:o}=g3(r,t);return Ma({prefix:n,name:t,encode:s,decode:l=>Lp(o(l))})},E3=(n,t,r,s)=>{const o={};for(let S=0;S<t.length;++S)o[t[S]]=S;let l=n.length;for(;n[l-1]==="=";)--l;const d=new Uint8Array(l*r/8|0);let p=0,g=0,w=0;for(let S=0;S<l;++S){const $=o[n[S]];if($===void 0)throw new SyntaxError(`Non-${s} character`);g=g<<r|$,p+=r,p>=8&&(p-=8,d[w++]=255&g>>p)}if(p>=r||255&g<<8-p)throw new SyntaxError("Unexpected end of data");return d},D3=(n,t,r)=>{const s=t[t.length-1]==="=",o=(1<<r)-1;let l="",d=0,p=0;for(let g=0;g<n.length;++g)for(p=p<<8|n[g],d+=8;d>r;)d-=r,l+=t[o&p>>d];if(d&&(l+=t[o&p<<r-d]),s)for(;l.length*r&7;)l+="=";return l},Yt=({name:n,prefix:t,bitsPerChar:r,alphabet:s})=>Ma({prefix:t,name:n,encode(o){return D3(o,s,r)},decode(o){return E3(o,s,r,n)}}),S3=Ma({prefix:"\0",name:"identity",encode:n=>y3(n),decode:n=>v3(n)});var I3=Object.freeze({__proto__:null,identity:S3});const x3=Yt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var C3=Object.freeze({__proto__:null,base2:x3});const O3=Yt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var A3=Object.freeze({__proto__:null,base8:O3});const P3=ps({prefix:"9",name:"base10",alphabet:"0123456789"});var N3=Object.freeze({__proto__:null,base10:P3});const T3=Yt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),R3=Yt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var U3=Object.freeze({__proto__:null,base16:T3,base16upper:R3});const F3=Yt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),$3=Yt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),L3=Yt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),M3=Yt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),j3=Yt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),z3=Yt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),q3=Yt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),H3=Yt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),B3=Yt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var K3=Object.freeze({__proto__:null,base32:F3,base32upper:$3,base32pad:L3,base32padupper:M3,base32hex:j3,base32hexupper:z3,base32hexpad:q3,base32hexpadupper:H3,base32z:B3});const k3=ps({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),V3=ps({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var G3=Object.freeze({__proto__:null,base36:k3,base36upper:V3});const W3=ps({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Y3=ps({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var J3=Object.freeze({__proto__:null,base58btc:W3,base58flickr:Y3});const X3=Yt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Z3=Yt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Q3=Yt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),e6=Yt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var t6=Object.freeze({__proto__:null,base64:X3,base64pad:Z3,base64url:Q3,base64urlpad:e6});const jp=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),r6=jp.reduce((n,t,r)=>(n[r]=t,n),[]),i6=jp.reduce((n,t,r)=>(n[t.codePointAt(0)]=r,n),[]);function n6(n){return n.reduce((t,r)=>(t+=r6[r],t),"")}function s6(n){const t=[];for(const r of n){const s=i6[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(s)}return new Uint8Array(t)}const a6=Ma({prefix:"\u{1F680}",name:"base256emoji",encode:n6,decode:s6});var o6=Object.freeze({__proto__:null,base256emoji:a6}),c6=zp,df=128,u6=127,h6=~u6,l6=Math.pow(2,31);function zp(n,t,r){t=t||[],r=r||0;for(var s=r;n>=l6;)t[r++]=n&255|df,n/=128;for(;n&h6;)t[r++]=n&255|df,n>>>=7;return t[r]=n|0,zp.bytes=r-s+1,t}var f6=Kc,p6=128,gf=127;function Kc(n,s){var r=0,s=s||0,o=0,l=s,d,p=n.length;do{if(l>=p)throw Kc.bytes=0,new RangeError("Could not decode varint");d=n[l++],r+=o<28?(d&gf)<<o:(d&gf)*Math.pow(2,o),o+=7}while(d>=p6);return Kc.bytes=l-s,r}var d6=Math.pow(2,7),g6=Math.pow(2,14),v6=Math.pow(2,21),y6=Math.pow(2,28),_6=Math.pow(2,35),b6=Math.pow(2,42),m6=Math.pow(2,49),w6=Math.pow(2,56),E6=Math.pow(2,63),D6=function(n){return n<d6?1:n<g6?2:n<v6?3:n<y6?4:n<_6?5:n<b6?6:n<m6?7:n<w6?8:n<E6?9:10},S6={encode:c6,decode:f6,encodingLength:D6},qp=S6;const vf=(n,t,r=0)=>(qp.encode(n,t,r),t),yf=n=>qp.encodingLength(n),kc=(n,t)=>{const r=t.byteLength,s=yf(n),o=s+yf(r),l=new Uint8Array(o+r);return vf(n,l,0),vf(r,l,s),l.set(t,o),new I6(n,r,t,l)};class I6{constructor(t,r,s,o){this.code=t,this.size=r,this.digest=s,this.bytes=o}}const Hp=({name:n,code:t,encode:r})=>new x6(n,t,r);class x6{constructor(t,r,s){this.name=t,this.code=r,this.encode=s}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?kc(this.code,r):r.then(s=>kc(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Bp=n=>async t=>new Uint8Array(await crypto.subtle.digest(n,t)),C6=Hp({name:"sha2-256",code:18,encode:Bp("SHA-256")}),O6=Hp({name:"sha2-512",code:19,encode:Bp("SHA-512")});var A6=Object.freeze({__proto__:null,sha256:C6,sha512:O6});const Kp=0,P6="identity",kp=Lp,N6=n=>kc(Kp,kp(n)),T6={code:Kp,name:P6,encode:kp,digest:N6};var R6=Object.freeze({__proto__:null,identity:T6});new TextEncoder,new TextDecoder;const _f={...I3,...C3,...A3,...N3,...U3,...K3,...G3,...J3,...t6,...o6};({...A6,...R6});function Vp(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function U6(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Vp(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function Gp(n,t,r,s){return{name:n,prefix:t,encoder:{name:n,prefix:t,encode:r},decoder:{decode:s}}}const bf=Gp("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Ec=Gp("ascii","a",n=>{let t="a";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},n=>{n=n.substring(1);const t=U6(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),F6={utf8:bf,"utf-8":bf,hex:_f.base16,latin1:Ec,ascii:Ec,binary:Ec,..._f};function $6(n,t="utf8"){const r=F6[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Vp(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}const Wp="wc",L6=2,du="core",Oi=`${Wp}@2:${du}:`,M6={name:du,logger:"error"},j6={database:":memory:"},z6="crypto",mf="client_ed25519_seed",q6=ye.ONE_DAY,H6="keychain",B6="0.3",K6="messages",k6="0.3",V6=ye.SIX_HOURS,G6="publisher",Yp="irn",W6="error",Jp="wss://relay.walletconnect.com",wf="wss://relay.walletconnect.org",Y6="relayer",Ct={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},J6="_subscription",rs={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},X6=ye.ONE_SECOND/2,Z6="2.9.0",Q6=1e4,e2="0.3",t2="WALLETCONNECT_CLIENT_ID",Qr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},r2="subscription",i2="0.3",n2=ye.FIVE_SECONDS*1e3,s2="pairing",a2="0.3",is={wc_pairingDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:0},res:{ttl:ye.ONE_DAY,prompt:!1,tag:0}}},Zr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},o2="history",c2="0.3",u2="expirer",Fr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},h2="0.3",Dc="verify-api",Ef="https://verify.walletconnect.com";class l2{constructor(t,r){this.core=t,this.logger=r,this.keychain=new Map,this.name=H6,this.version=B6,this.initialized=!1,this.storagePrefix=Oi,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:l}=ue("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(l)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=t,this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,Dp(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Sp(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=ue("NOT_INITIALIZED",this.name);throw new Error(t)}}}class f2{constructor(t,r,s){this.core=t,this.logger=r,this.name=z6,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),l=lf(o);return $p(l.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=pw();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const l=await this.getClientSeed(),d=lf(l),p=qc();return await o3(p,o,q6,d)},this.generateSharedKey=(o,l,d)=>{this.isInitialized();const p=this.getPrivateKey(o),g=dw(p,l);return this.setSymKey(g,d)},this.setSymKey=async(o,l)=>{this.isInitialized();const d=l||gw(o);return await this.keychain.set(d,o),d},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,l,d)=>{this.isInitialized();const p=wp(d),g=Jc(l);if(jl(p)){const z=p.senderPublicKey,F=p.receiverPublicKey;o=await this.generateSharedKey(z,F)}const w=this.getSymKey(o),{type:S,senderPublicKey:$}=p;return yw({type:S,symKey:w,message:g,senderPublicKey:$})},this.decode=async(o,l,d)=>{this.isInitialized();const p=mw(l,d);if(jl(p)){const S=p.receiverPublicKey,$=p.senderPublicKey;o=await this.generateSharedKey(S,$)}const g=this.getSymKey(o),w=_w({symKey:g,encoded:l});return Vf(w)},this.getPayloadType=o=>{const l=xa(o);return ls(l.type)},this.getPayloadSenderPublicKey=o=>{const l=xa(o);return l.senderPublicKey?cr(l.senderPublicKey,or):void 0},this.core=t,this.logger=Qe.generateChildLogger(r,this.name),this.keychain=s||new l2(this.core,this.logger)}get context(){return Qe.getLoggerContext(this.logger)}async setPrivateKey(t,r){return await this.keychain.set(t,r),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(mf)}catch{t=qc(),await this.keychain.set(mf,t)}return $6(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=ue("NOT_INITIALIZED",this.name);throw new Error(t)}}}class p2 extends jE{constructor(t,r){super(t,r),this.logger=t,this.core=r,this.messages=new Map,this.name=K6,this.version=k6,this.initialized=!1,this.storagePrefix=Oi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const l=In(o);let d=this.messages.get(s);return typeof d>"u"&&(d={}),typeof d[l]<"u"||(d[l]=o,this.messages.set(s,d),await this.persist()),l},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const l=this.get(s),d=In(o);return typeof l[d]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Qe.generateChildLogger(t,this.name),this.core=r}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,Dp(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Sp(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=ue("NOT_INITIALIZED",this.name);throw new Error(t)}}}class d2 extends zE{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.events=new Dr.exports.EventEmitter,this.name=G6,this.queue=new Map,this.publishTimeout=ye.toMiliseconds(ye.TEN_SECONDS),this.queueTimeout=ye.toMiliseconds(ye.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,o,l)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:l}});try{const d=(l==null?void 0:l.ttl)||V6,p=Hc(l),g=(l==null?void 0:l.prompt)||!1,w=(l==null?void 0:l.tag)||0,S=(l==null?void 0:l.id)||Gf().toString(),$={topic:s,message:o,opts:{ttl:d,relay:p,prompt:g,tag:w,id:S}},z=setTimeout(()=>this.queue.set(S,$),this.queueTimeout);try{await await Ca(this.rpcPublish(s,o,d,p,g,w,S),this.publishTimeout),clearTimeout(z),this.relayer.events.emit(Ct.publish,$)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:l}})}catch(d){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(d),d}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=t,this.logger=Qe.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Qe.getLoggerContext(this.logger)}rpcPublish(t,r,s,o,l,d,p){var g,w,S,$;const z={method:wa(o.protocol).publish,params:{topic:t,message:r,ttl:s,prompt:l,tag:d},id:p};return ar((g=z.params)==null?void 0:g.prompt)&&((w=z.params)==null||delete w.prompt),ar((S=z.params)==null?void 0:S.tag)&&(($=z.params)==null||delete $.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:z}),this.relayer.request(z)}onPublish(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async t=>{const{topic:r,message:s,opts:o}=t;await this.publish(r,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(An.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Ct.connection_stalled);return}this.checkQueue()}),this.relayer.on(Ct.message_ack,t=>{this.onPublish(t.id.toString())})}}class g2{constructor(){this.map=new Map,this.set=(t,r)=>{const s=this.get(t);this.exists(t,r)||this.map.set(t,[...s,r])},this.get=t=>this.map.get(t)||[],this.exists=(t,r)=>this.get(t).includes(r),this.delete=(t,r)=>{if(typeof r>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const s=this.get(t);if(!this.exists(t,r))return;const o=s.filter(l=>l!==r);if(!o.length){this.map.delete(t);return}this.map.set(t,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var v2=Object.defineProperty,y2=Object.defineProperties,_2=Object.getOwnPropertyDescriptors,Df=Object.getOwnPropertySymbols,b2=Object.prototype.hasOwnProperty,m2=Object.prototype.propertyIsEnumerable,Sf=(n,t,r)=>t in n?v2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,ns=(n,t)=>{for(var r in t||(t={}))b2.call(t,r)&&Sf(n,r,t[r]);if(Df)for(var r of Df(t))m2.call(t,r)&&Sf(n,r,t[r]);return n},Sc=(n,t)=>y2(n,_2(t));class w2 extends BE{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.subscriptions=new Map,this.topicMap=new g2,this.events=new Dr.exports.EventEmitter,this.name=r2,this.version=i2,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Oi,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const l=Hc(o),d={topic:s,relay:l};this.pending.set(s,d);const p=await this.rpcSubscribe(s,l);return this.onSubscribe(p,d),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),p}catch(l){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(l),l}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof(o==null?void 0:o.id)<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,l)=>{const d=new ye.Watch;d.start(this.pendingSubscriptionWatchLabel);const p=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(p),d.stop(this.pendingSubscriptionWatchLabel),o(!0)),d.elapsed(this.pendingSubscriptionWatchLabel)>=n2&&(clearInterval(p),d.stop(this.pendingSubscriptionWatchLabel),l(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=Qe.generateChildLogger(r,this.name),this.clientId=""}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,r){let s=!1;try{s=this.getSubscription(t).topic===r}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,r){const s=this.topicMap.get(t);await Promise.all(s.map(async o=>await this.unsubscribeById(t,o,r)))}async unsubscribeById(t,r,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}});try{const o=Hc(s);await this.rpcUnsubscribe(t,r,o);const l=Tt("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,r,l),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(t,r){const s={method:wa(r.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Ca(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ct.connection_stalled)}return In(t+this.clientId)}async rpcBatchSubscribe(t){if(!t.length)return;const r=t[0].relay,s={method:wa(r.protocol).batchSubscribe,params:{topics:t.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Ca(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Ct.connection_stalled)}}rpcUnsubscribe(t,r,s){const o={method:wa(s.protocol).unsubscribe,params:{topic:t,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(t,r){this.setSubscription(t,Sc(ns({},r),{id:t})),this.pending.delete(r.topic)}onBatchSubscribe(t){t.length&&t.forEach(r=>{this.setSubscription(r.id,ns({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(t,r,s){this.events.removeAllListeners(r),this.hasSubscription(r,t)&&this.deleteSubscription(r,s),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,r){this.subscriptions.has(t)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:r}),this.addSubscription(t,r))}addSubscription(t,r){this.subscriptions.set(t,ns({},r)),this.topicMap.set(r.topic,t),this.events.emit(Qr.created,r)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const r=this.subscriptions.get(t);if(!r){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}deleteSubscription(t,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:r});const s=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(s.topic,t),this.events.emit(Qr.deleted,Sc(ns({},s),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Qr.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Qr.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:r}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const r=await this.rpcBatchSubscribe(t);ei(r)&&this.onBatchSubscribe(r.map((s,o)=>Sc(ns({},t[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const t=[];this.pending.forEach(r=>{t.push(r)}),await this.batchSubscribe(t)}registerEventListeners(){this.relayer.core.heartbeat.on(An.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Ct.connect,async()=>{await this.onConnect()}),this.relayer.on(Ct.disconnect,()=>{this.onDisconnect()}),this.events.on(Qr.created,async t=>{const r=Qr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()}),this.events.on(Qr.deleted,async t=>{const r=Qr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=ue("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise(t=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),t())},this.pollingInterval)})}}var E2=Object.defineProperty,If=Object.getOwnPropertySymbols,D2=Object.prototype.hasOwnProperty,S2=Object.prototype.propertyIsEnumerable,xf=(n,t,r)=>t in n?E2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,I2=(n,t)=>{for(var r in t||(t={}))D2.call(t,r)&&xf(n,r,t[r]);if(If)for(var r of If(t))S2.call(t,r)&&xf(n,r,t[r]);return n};class x2 extends qE{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new Dr.exports.EventEmitter,this.name=Y6,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?Qe.generateChildLogger(t.logger,this.name):Qe.pino(Qe.getDefaultLoggerOptions({level:t.logger||W6})),this.messages=new p2(this.logger,t.core),this.subscriber=new w2(this,this.logger),this.publisher=new d2(this,this.logger),this.relayUrl=(t==null?void 0:t.relayUrl)||Jp,this.projectId=t.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${wf}...`),await this.restartTransport(wf)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},Q6)}get context(){return Qe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(t,r,s){this.isInitialized(),await this.publisher.publish(t,r,s),await this.recordMessageEvent({topic:t,message:r,publishedAt:Date.now()})}async subscribe(t,r){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(t))==null?void 0:s[0])||"";return o||(await Promise.all([new Promise(l=>{this.subscriber.once(Qr.created,d=>{d.topic===t&&l()})}),new Promise(async l=>{o=await this.subscriber.subscribe(t,r),l()})]),o)}async unsubscribe(t,r){this.isInitialized(),await this.subscriber.unsubscribe(t,r)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(Ct.transport_closed))}async transportOpen(t){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=t||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(Qr.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,s)=>{await Ca(this.provider.connect(),5e3,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>s(o)).then(()=>r()).finally(()=>this.removeListener(Ct.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(Ct.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const s=r;if(!this.isConnectionStalled(s.message))throw r;this.events.emit(Ct.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(t){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=t||this.relayUrl,this.connected&&await Promise.all([new Promise(r=>{this.provider.once(rs.disconnect,()=>{r()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(t){return this.staleConnectionErrors.some(r=>t.includes(r))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ai(new l3(Nw({sdkVersion:Z6,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:r,message:s}=t;await this.messages.set(r,s)}async shouldIgnoreMessageEvent(t){const{topic:r,message:s}=t;return await this.subscriber.isSubscribed(r)?this.messages.has(r,s):!0}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),Zc(t)){if(!t.method.endsWith(J6))return;const r=t.params,{topic:s,message:o,publishedAt:l}=r.data,d={topic:s,message:o,publishedAt:l};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(I2({type:"event",event:r.id},d)),this.events.emit(r.id,d),await this.acknowledgePayload(t),await this.onMessageEvent(d)}else Qc(t)&&this.events.emit(Ct.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(Ct.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const r=eu(t.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(rs.payload,t=>this.onProviderPayload(t)),this.provider.on(rs.connect,()=>{this.events.emit(Ct.connect)}),this.provider.on(rs.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(rs.error,t=>{this.logger.error(t),this.events.emit(Ct.error,t)})}registerEventListeners(){this.events.on(Ct.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(Ct.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},ye.toMiliseconds(X6))}isInitialized(){if(!this.initialized){const{message:t}=ue("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(t=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),t())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var C2=Object.defineProperty,Cf=Object.getOwnPropertySymbols,O2=Object.prototype.hasOwnProperty,A2=Object.prototype.propertyIsEnumerable,Of=(n,t,r)=>t in n?C2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Af=(n,t)=>{for(var r in t||(t={}))O2.call(t,r)&&Of(n,r,t[r]);if(Cf)for(var r of Cf(t))A2.call(t,r)&&Of(n,r,t[r]);return n};class ja extends HE{constructor(t,r,s,o=Oi,l=void 0){super(t,r,s,o),this.core=t,this.logger=r,this.name=s,this.map=new Map,this.version=e2,this.cached=[],this.initialized=!1,this.storagePrefix=Oi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(d=>{this.getKey&&d!==null&&!ar(d)?this.map.set(this.getKey(d),d):eE(d)?this.map.set(d.id,d):tE(d)&&this.map.set(d.topic,d)}),this.cached=[],this.initialized=!0)},this.set=async(d,p)=>{this.isInitialized(),this.map.has(d)?await this.update(d,p):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:d,value:p}),this.map.set(d,p),await this.persist())},this.get=d=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:d}),this.getData(d)),this.getAll=d=>(this.isInitialized(),d?this.values.filter(p=>Object.keys(d).every(g=>f3(p[g],d[g]))):this.values),this.update=async(d,p)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:d,update:p});const g=Af(Af({},this.getData(d)),p);this.map.set(d,g),await this.persist()},this.delete=async(d,p)=>{this.isInitialized(),this.map.has(d)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:d,reason:p}),this.map.delete(d),await this.persist())},this.logger=Qe.generateChildLogger(r,this.name),this.storagePrefix=o,this.getKey=l}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const r=this.map.get(t);if(!r){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:r}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=ue("NOT_INITIALIZED",this.name);throw new Error(t)}}}class P2{constructor(t,r){this.core=t,this.logger=r,this.name=s2,this.version=a2,this.events=new Dr.exports,this.initialized=!1,this.storagePrefix=Oi,this.ignoredPayloadTypes=[Qi],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=qc(),o=await this.core.crypto.setSymKey(s),l=Br(ye.FIVE_MINUTES),d={protocol:Yp},p={topic:o,expiry:l,relay:d,active:!1},g=Kw({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:d});return await this.pairings.set(o,p),await this.core.relayer.subscribe(o),this.core.expirer.set(o,l),{topic:o,uri:g}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:l,relay:d}=qw(s.uri);if(this.pairings.keys.includes(o))throw new Error(`Pairing already exists: ${o}`);if(this.core.crypto.hasKeys(o))throw new Error(`Keychain already exists: ${o}`);const p=Br(ye.FIVE_MINUTES),g={topic:o,relay:d,expiry:p,active:!1};return await this.pairings.set(o,g),await this.core.crypto.setSymKey(l,o),await this.core.relayer.subscribe(o,{relay:d}),this.core.expirer.set(o,p),s.activatePairing&&await this.activate({topic:o}),g},this.activate=async({topic:s})=>{this.isInitialized();const o=Br(ye.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const l=await this.sendRequest(o,"wc_pairingPing",{}),{done:d,resolve:p,reject:g}=Dn();this.events.once(qt("pairing_ping",l),({error:w})=>{w?g(w):p()}),await d()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",Tt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,l)=>{const d=tu(o,l),p=await this.core.crypto.encode(s,d),g=is[o].req;return this.core.history.set(s,d),this.core.relayer.publish(s,p,g),d.id},this.sendResult=async(s,o,l)=>{const d=eu(s,l),p=await this.core.crypto.encode(o,d),g=await this.core.history.get(o,s),w=is[g.request.method].res;await this.core.relayer.publish(o,p,w),await this.core.history.resolve(d)},this.sendError=async(s,o,l)=>{const d=Xc(s,l),p=await this.core.crypto.encode(o,d),g=await this.core.history.get(o,s),w=is[g.request.method]?is[g.request.method].res:is.unregistered_method.res;await this.core.relayer.publish(o,p,w),await this.core.history.resolve(d)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Tt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>xi(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:l}=s,d=l.method;if(this.pairings.keys.includes(o))switch(d){case"wc_pairingPing":return this.onPairingPingRequest(o,l);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,l);default:return this.onUnknownRpcMethodRequest(o,l)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:l}=s,d=(await this.core.history.get(o,l.id)).request.method;if(this.pairings.keys.includes(o))switch(d){case"wc_pairingPing":return this.onPairingPingResponse(o,l);default:return this.onUnknownRpcMethodResponse(d)}},this.onPairingPingRequest=async(s,o)=>{const{id:l}=o;try{this.isValidPing({topic:s}),await this.sendResult(l,s,!0),this.events.emit("pairing_ping",{id:l,topic:s})}catch(d){await this.sendError(l,s,d),this.logger.error(d)}},this.onPairingPingResponse=(s,o)=>{const{id:l}=o;setTimeout(()=>{Ii(o)?this.events.emit(qt("pairing_ping",l),{}):pi(o)&&this.events.emit(qt("pairing_ping",l),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:l}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:l,topic:s})}catch(d){await this.sendError(l,s,d),this.logger.error(d)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:l,method:d}=o;try{if(this.registeredMethods.includes(d))return;const p=Tt("WC_METHOD_UNSUPPORTED",d);await this.sendError(l,s,p),this.logger.error(p)}catch(p){await this.sendError(l,s,p),this.logger.error(p)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Tt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!gr(s)){const{message:o}=ue("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(o)}if(!Qw(s.uri)){const{message:o}=ue("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(o)}},this.isValidPing=async s=>{if(!gr(s)){const{message:l}=ue("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(l)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!gr(s)){const{message:l}=ue("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(l)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Vt(s,!1)){const{message:o}=ue("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=ue("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(xi(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=ue("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=t,this.logger=Qe.generateChildLogger(r,this.name),this.pairings=new ja(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Qe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=ue("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(Ct.message,async t=>{const{topic:r,message:s}=t;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(r,s);Zc(o)?(this.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):Qc(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:r,payload:o}),this.core.history.delete(r,o.id))})}registerExpirerEvents(){this.core.expirer.on(Fr.expired,async t=>{const{topic:r}=xp(t.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class N2 extends ME{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.records=new Map,this.events=new Dr.exports.EventEmitter,this.name=o2,this.version=c2,this.cached=[],this.initialized=!1,this.storagePrefix=Oi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,l)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:l}),this.records.has(o.id))return;const d={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:l,expiry:Br(ye.THIRTY_DAYS)};this.records.set(d.id,d),this.events.emit(Zr.created,d)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=pi(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(Zr.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(l=>{if(l.topic===s){if(typeof o<"u"&&l.id!==o)return;this.records.delete(l.id),this.events.emit(Zr.deleted,l)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const s={topic:r.topic,request:tu(r.request.method,r.request.params,r.id),chainId:r.chainId};return t.push(s)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const r=this.records.get(t);if(!r){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Zr.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:r}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(Zr.created,t=>{const r=Zr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(Zr.updated,t=>{const r=Zr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(Zr.deleted,t=>{const r=Zr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.core.heartbeat.on(An.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(t=>{ye.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.delete(t.topic,t.id))})}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=ue("NOT_INITIALIZED",this.name);throw new Error(t)}}}class T2 extends KE{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.expirations=new Map,this.events=new Dr.exports.EventEmitter,this.name=u2,this.version=h2,this.cached=[],this.initialized=!1,this.storagePrefix=Oi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const l=this.formatTarget(s),d={target:l,expiry:o};this.expirations.set(l,d),this.checkExpiry(l,d),this.events.emit(Fr.created,{target:l,expiration:d})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),l=this.getExpiration(o);this.expirations.delete(o),this.events.emit(Fr.deleted,{target:o,expiration:l})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return Tw(t);if(typeof t=="number")return Rw(t);const{message:r}=ue("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(r)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Fr.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:r}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const r=this.expirations.get(t);if(!r){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}checkExpiry(t,r){const{expiry:s}=r;ye.toMiliseconds(s)-Date.now()<=0&&this.expire(t,r)}expire(t,r){this.expirations.delete(t),this.events.emit(Fr.expired,{target:t,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,r)=>this.checkExpiry(r,t))}registerEventListeners(){this.core.heartbeat.on(An.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Fr.created,t=>{const r=Fr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Fr.expired,t=>{const r=Fr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Fr.deleted,t=>{const r=Fr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=ue("NOT_INITIALIZED",this.name);throw new Error(t)}}}class R2 extends kE{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.name=Dc,this.initialized=!1,this.init=async s=>{Ep()||!uu()||(this.verifyUrl=(s==null?void 0:s.verifyUrl)||Ef,await this.createIframe())},this.register=async s=>{var o;if(this.initialized||await this.init(),!!this.iframe)try{(o=this.iframe.contentWindow)==null||o.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async s=>{var o;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const l=this.startAbortTimer(ye.FIVE_SECONDS),d=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(l),d.status===200?(o=await d.json())==null?void 0:o.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((s,o)=>{if(document.getElementById(Dc))return s();const l=document.createElement("iframe");l.setAttribute("id",Dc),l.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),l.style.display="none",l.addEventListener("load",()=>{this.initialized=!0,s()}),l.addEventListener("error",d=>{o(d)}),document.body.append(l),this.iframe=l}),new Promise(s=>{setTimeout(()=>s("iframe load timeout"),ye.toMiliseconds(ye.ONE_SECOND/2))})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Qe.generateChildLogger(r,this.name),this.verifyUrl=Ef,this.abortController=new AbortController,this.isDevEnv=cu()&&{}.IS_VITEST}get context(){return Qe.getLoggerContext(this.logger)}startAbortTimer(t){return setTimeout(()=>this.abortController.abort(),ye.toMiliseconds(t))}}var U2=Object.defineProperty,Pf=Object.getOwnPropertySymbols,F2=Object.prototype.hasOwnProperty,$2=Object.prototype.propertyIsEnumerable,Nf=(n,t,r)=>t in n?U2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Tf=(n,t)=>{for(var r in t||(t={}))F2.call(t,r)&&Nf(n,r,t[r]);if(Pf)for(var r of Pf(t))$2.call(t,r)&&Nf(n,r,t[r]);return n};class gu extends LE{constructor(t){super(t),this.protocol=Wp,this.version=L6,this.name=du,this.events=new Dr.exports.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=t==null?void 0:t.projectId,this.relayUrl=(t==null?void 0:t.relayUrl)||Jp;const r=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(t==null?void 0:t.logger)||M6.logger}));this.logger=Qe.generateChildLogger(r,this.name),this.heartbeat=new An.HeartBeat,this.crypto=new f2(this,this.logger,t==null?void 0:t.keychain),this.history=new N2(this,this.logger),this.expirer=new T2(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new OE(Tf(Tf({},j6),t==null?void 0:t.storageOptions)),this.relayer=new x2({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new P2(this,this.logger),this.verify=new R2(this.projectId||"",this.logger)}static async init(t){const r=new gu(t);await r.initialize();const s=await r.crypto.getClientId();return await r.storage.setItem(t2,s),r}get context(){return Qe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}}const L2=gu,Xp="wc",Zp=2,Qp="client",vu=`${Xp}@${Zp}:${Qp}:`,Ic={name:Qp,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},M2="WALLETCONNECT_DEEPLINK_CHOICE",j2="proposal",ed="Proposal expired",z2="session",_a=ye.SEVEN_DAYS,q2="engine",ss={wc_sessionPropose:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1115}}},xc={min:ye.FIVE_MINUTES,max:ye.SEVEN_DAYS},H2="request",B2=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var K2=Object.defineProperty,k2=Object.defineProperties,V2=Object.getOwnPropertyDescriptors,Rf=Object.getOwnPropertySymbols,G2=Object.prototype.hasOwnProperty,W2=Object.prototype.propertyIsEnumerable,Uf=(n,t,r)=>t in n?K2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Ur=(n,t)=>{for(var r in t||(t={}))G2.call(t,r)&&Uf(n,r,t[r]);if(Rf)for(var r of Rf(t))W2.call(t,r)&&Uf(n,r,t[r]);return n},Cc=(n,t)=>k2(n,V2(t));class Y2 extends GE{constructor(t){super(t),this.name=q2,this.events=new Dr.exports,this.initialized=!1,this.ignoredPayloadTypes=[Qi],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(ss)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const s=Cc(Ur({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:l,optionalNamespaces:d,sessionProperties:p,relays:g}=s;let w=o,S,$=!1;if(w&&($=this.client.core.pairing.pairings.get(w).active),!w||!$){const{topic:R,uri:D}=await this.client.core.pairing.create();w=R,S=D}const z=await this.client.core.crypto.generateKeyPair(),F=Ur({requiredNamespaces:l,optionalNamespaces:d,relays:g!=null?g:[{protocol:Yp}],proposer:{publicKey:z,metadata:this.client.metadata}},p&&{sessionProperties:p}),{reject:M,resolve:B,done:J}=Dn(ye.FIVE_MINUTES,ed);if(this.events.once(qt("session_connect"),async({error:R,session:D})=>{if(R)M(R);else if(D){D.self.publicKey=z;const x=Cc(Ur({},D),{requiredNamespaces:D.requiredNamespaces,optionalNamespaces:D.optionalNamespaces});await this.client.session.set(D.topic,x),await this.setExpiry(D.topic,D.expiry),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:D.peer.metadata}),B(x)}}),!w){const{message:R}=ue("NO_MATCHING_KEY",`connect() pairing topic: ${w}`);throw new Error(R)}const se=await this.sendRequest(w,"wc_sessionPropose",F),O=Br(ye.FIVE_MINUTES);return await this.setProposal(se,Ur({id:se,expiry:O},F)),{uri:S,approval:J}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:s,relayProtocol:o,namespaces:l,sessionProperties:d}=r,p=this.client.proposal.get(s);let{pairingTopic:g,proposer:w,requiredNamespaces:S,optionalNamespaces:$}=p;g=g||"",xn(S)||(S=Ww(l,"approve()"));const z=await this.client.core.crypto.generateKeyPair(),F=w.publicKey,M=await this.client.core.crypto.generateSharedKey(z,F);g&&s&&(await this.client.core.pairing.updateMetadata({topic:g,metadata:w.metadata}),await this.sendResult(s,g,{relay:{protocol:o!=null?o:"irn"},responderPublicKey:z}),await this.client.proposal.delete(s,Tt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:g}));const B=Ur({relay:{protocol:o!=null?o:"irn"},namespaces:l,requiredNamespaces:S,optionalNamespaces:$,pairingTopic:g,controller:{publicKey:z,metadata:this.client.metadata},expiry:Br(_a)},d&&{sessionProperties:d});await this.client.core.relayer.subscribe(M),await this.sendRequest(M,"wc_sessionSettle",B);const J=Cc(Ur({},B),{topic:M,pairingTopic:g,acknowledged:!1,self:B.controller,peer:{publicKey:w.publicKey,metadata:w.metadata},controller:z});return await this.client.session.set(M,J),await this.setExpiry(M,Br(_a)),{topic:M,acknowledged:()=>new Promise(se=>setTimeout(()=>se(this.client.session.get(M)),500))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:s,reason:o}=r,{pairingTopic:l}=this.client.proposal.get(s);l&&(await this.sendError(s,l,o),await this.client.proposal.delete(s,Tt("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:s,namespaces:o}=r,l=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:o}),{done:d,resolve:p,reject:g}=Dn();return this.events.once(qt("session_update",l),({error:w})=>{w?g(w):p()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:d}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:s}=r,o=await this.sendRequest(s,"wc_sessionExtend",{}),{done:l,resolve:d,reject:p}=Dn();return this.events.once(qt("session_extend",o),({error:g})=>{g?p(g):d()}),await this.setExpiry(s,Br(_a)),{acknowledged:l}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:s,request:o,topic:l,expiry:d}=r,p=await this.sendRequest(l,"wc_sessionRequest",{request:o,chainId:s},d),{done:g,resolve:w,reject:S}=Dn(d);this.events.once(qt("session_request",p),({error:z,result:F})=>{z?S(z):w(F)}),this.client.events.emit("session_request_sent",{topic:l,request:o,chainId:s,id:p});const $=await this.client.core.storage.getItem(M2);return Uw({id:p,topic:l,wcDeepLink:$}),await g()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:s,response:o}=r,{id:l}=o;Ii(o)?await this.sendResult(l,s,o.result):pi(o)&&await this.sendError(l,s,o.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const o=await this.sendRequest(s,"wc_sessionPing",{}),{done:l,resolve:d,reject:p}=Dn();this.events.once(qt("session_ping",o),({error:g})=>{g?p(g):d()}),await l()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:s,event:o,chainId:l}=r;await this.sendRequest(s,"wc_sessionEvent",{event:o,chainId:l})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const o=Gf().toString();let l;const d=p=>{(p==null?void 0:p.id.toString())===o&&(this.client.core.relayer.events.removeListener(Ct.message_ack,d),l())};await Promise.all([new Promise(p=>{l=p,this.client.core.relayer.on(Ct.message_ack,d)}),this.sendRequest(s,"wc_sessionDelete",Tt("USER_DISCONNECTED"),void 0,o)]),await this.deleteSession(s)}else await this.client.core.pairing.disconnect({topic:s})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>Xw(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const s=this.client.core.pairing.pairings.get(r.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(l=>{var d,p;return((d=l.peerMetadata)==null?void 0:d.url)&&((p=l.peerMetadata)==null?void 0:p.url)===r.peer.metadata.url&&l.topic&&l.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(l=>this.client.core.pairing.disconnect({topic:l.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(r,s)=>{const{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,Tt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),s||this.client.core.expirer.del(r)},this.deleteProposal=async(r,s)=>{await Promise.all([this.client.proposal.delete(r,Tt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,s),o?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,s)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:s}),this.client.core.expirer.set(r,s)},this.setProposal=async(r,s)=>{await this.client.proposal.set(r,s),this.client.core.expirer.set(r,s.expiry)},this.setPendingSessionRequest=async r=>{const s=ss.wc_sessionRequest.req.ttl,{id:o,topic:l,params:d}=r;await this.client.pendingRequest.set(o,{id:o,topic:l,params:d}),s&&this.client.core.expirer.set(o,Br(s))},this.sendRequest=async(r,s,o,l,d)=>{const p=tu(s,o);if(uu()&&B2.includes(s)){const S=In(JSON.stringify(p));await this.client.core.verify.register({attestationId:S})}const g=await this.client.core.crypto.encode(r,p),w=ss[s].req;return l&&(w.ttl=l),d&&(w.id=d),this.client.core.history.set(r,p),this.client.core.relayer.publish(r,g,w),p.id},this.sendResult=async(r,s,o)=>{const l=eu(r,o),d=await this.client.core.crypto.encode(s,l),p=await this.client.core.history.get(s,r),g=ss[p.request.method].res;this.client.core.relayer.publish(s,d,g),await this.client.core.history.resolve(l)},this.sendError=async(r,s,o)=>{const l=Xc(r,o),d=await this.client.core.crypto.encode(s,l),p=await this.client.core.history.get(s,r),g=ss[p.request.method].res;this.client.core.relayer.publish(s,d,g),await this.client.core.history.resolve(l)},this.cleanup=async()=>{const r=[],s=[];this.client.session.getAll().forEach(o=>{xi(o.expiry)&&r.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{xi(o.expiry)&&s.push(o.id)}),await Promise.all([...r.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=r=>{const{topic:s,payload:o}=r,l=o.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${l}`)}},this.onRelayEventResponse=async r=>{const{topic:s,payload:o}=r,l=(await this.client.core.history.get(s,o.id)).request.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${l}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:s}=r,{message:o}=ue("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(r,s)=>{const{params:o,id:l}=s;try{this.isValidConnect(Ur({},s.params));const d=Br(ye.FIVE_MINUTES),p=Ur({id:l,pairingTopic:r,expiry:d},o);await this.setProposal(l,p);const g=In(JSON.stringify(s)),w=await this.getVerifyContext(g,p.proposer.metadata);this.client.events.emit("session_proposal",{id:l,params:p,verifyContext:w})}catch(d){await this.sendError(l,r,d),this.client.logger.error(d)}},this.onSessionProposeResponse=async(r,s)=>{const{id:o}=s;if(Ii(s)){const{result:l}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:l});const d=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:d});const p=d.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:p});const g=l.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:g});const w=await this.client.core.crypto.generateSharedKey(p,g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:w});const S=await this.client.core.relayer.subscribe(w);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:S}),await this.client.core.pairing.activate({topic:r})}else pi(s)&&(await this.client.proposal.delete(o,Tt("USER_DISCONNECTED")),this.events.emit(qt("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(r,s)=>{const{id:o,params:l}=s;try{this.isValidSessionSettleRequest(l);const{relay:d,controller:p,expiry:g,namespaces:w,requiredNamespaces:S,optionalNamespaces:$,sessionProperties:z,pairingTopic:F}=s.params,M=Ur({topic:r,relay:d,expiry:g,namespaces:w,acknowledged:!0,pairingTopic:F,requiredNamespaces:S,optionalNamespaces:$,controller:p.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:p.publicKey,metadata:p.metadata}},z&&{sessionProperties:z});await this.sendResult(s.id,r,!0),this.events.emit(qt("session_connect"),{session:M}),this.cleanupDuplicatePairings(M)}catch(d){await this.sendError(o,r,d),this.client.logger.error(d)}},this.onSessionSettleResponse=async(r,s)=>{const{id:o}=s;Ii(s)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(qt("session_approve",o),{})):pi(s)&&(await this.client.session.delete(r,Tt("USER_DISCONNECTED")),this.events.emit(qt("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(r,s)=>{const{params:o,id:l}=s;try{this.isValidUpdate(Ur({topic:r},o)),await this.client.session.update(r,{namespaces:o.namespaces}),await this.sendResult(l,r,!0),this.client.events.emit("session_update",{id:l,topic:r,params:o})}catch(d){await this.sendError(l,r,d),this.client.logger.error(d)}},this.onSessionUpdateResponse=(r,s)=>{const{id:o}=s;Ii(s)?this.events.emit(qt("session_update",o),{}):pi(s)&&this.events.emit(qt("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(r,s)=>{const{id:o}=s;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Br(_a)),await this.sendResult(o,r,!0),this.client.events.emit("session_extend",{id:o,topic:r})}catch(l){await this.sendError(o,r,l),this.client.logger.error(l)}},this.onSessionExtendResponse=(r,s)=>{const{id:o}=s;Ii(s)?this.events.emit(qt("session_extend",o),{}):pi(s)&&this.events.emit(qt("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(r,s)=>{const{id:o}=s;try{this.isValidPing({topic:r}),await this.sendResult(o,r,!0),this.client.events.emit("session_ping",{id:o,topic:r})}catch(l){await this.sendError(o,r,l),this.client.logger.error(l)}},this.onSessionPingResponse=(r,s)=>{const{id:o}=s;setTimeout(()=>{Ii(s)?this.events.emit(qt("session_ping",o),{}):pi(s)&&this.events.emit(qt("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(r,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:r,reason:s.params}),await Promise.all([new Promise(l=>{this.client.core.relayer.once(Ct.publish,async()=>{l(await this.deleteSession(r))})}),this.sendResult(o,r,!0)]),this.client.events.emit("session_delete",{id:o,topic:r})}catch(l){this.client.logger.error(l)}},this.onSessionRequest=async(r,s)=>{const{id:o,params:l}=s;try{this.isValidRequest(Ur({topic:r},l)),await this.setPendingSessionRequest({id:o,topic:r,params:l});const d=In(JSON.stringify(s)),p=this.client.session.get(r),g=await this.getVerifyContext(d,p.peer.metadata);this.client.events.emit("session_request",{id:o,topic:r,params:l,verifyContext:g})}catch(d){await this.sendError(o,r,d),this.client.logger.error(d)}},this.onSessionRequestResponse=(r,s)=>{const{id:o}=s;Ii(s)?this.events.emit(qt("session_request",o),{result:s.result}):pi(s)&&this.events.emit(qt("session_request",o),{error:s.error})},this.onSessionEventRequest=async(r,s)=>{const{id:o,params:l}=s;try{this.isValidEmit(Ur({topic:r},l)),this.client.events.emit("session_event",{id:o,topic:r,params:l})}catch(d){await this.sendError(o,r,d),this.client.logger.error(d)}},this.isValidConnect=async r=>{if(!gr(r)){const{message:g}=ue("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(g)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:l,sessionProperties:d,relays:p}=r;if(ar(s)||await this.isValidPairingTopic(s),!uE(p,!0)){const{message:g}=ue("MISSING_OR_INVALID",`connect() relays: ${p}`);throw new Error(g)}!ar(o)&&xn(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!ar(l)&&xn(l)!==0&&this.validateNamespaces(l,"optionalNamespaces"),ar(d)||this.validateSessionProps(d,"sessionProperties")},this.validateNamespaces=(r,s)=>{const o=cE(r,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async r=>{if(!gr(r))throw new Error(ue("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:s,namespaces:o,relayProtocol:l,sessionProperties:d}=r;await this.isValidProposalId(s);const p=this.client.proposal.get(s),g=Da(o,"approve()");if(g)throw new Error(g.message);const w=Gl(p.requiredNamespaces,o,"approve()");if(w)throw new Error(w.message);if(!Vt(l,!0)){const{message:S}=ue("MISSING_OR_INVALID",`approve() relayProtocol: ${l}`);throw new Error(S)}ar(d)||this.validateSessionProps(d,"sessionProperties")},this.isValidReject=async r=>{if(!gr(r)){const{message:l}=ue("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(l)}const{id:s,reason:o}=r;if(await this.isValidProposalId(s),!lE(o)){const{message:l}=ue("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(l)}},this.isValidSessionSettleRequest=r=>{if(!gr(r)){const{message:w}=ue("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(w)}const{relay:s,controller:o,namespaces:l,expiry:d}=r;if(!Op(s)){const{message:w}=ue("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(w)}const p=rE(o,"onSessionSettleRequest()");if(p)throw new Error(p.message);const g=Da(l,"onSessionSettleRequest()");if(g)throw new Error(g.message);if(xi(d)){const{message:w}=ue("EXPIRED","onSessionSettleRequest()");throw new Error(w)}},this.isValidUpdate=async r=>{if(!gr(r)){const{message:g}=ue("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(g)}const{topic:s,namespaces:o}=r;await this.isValidSessionTopic(s);const l=this.client.session.get(s),d=Da(o,"update()");if(d)throw new Error(d.message);const p=Gl(l.requiredNamespaces,o,"update()");if(p)throw new Error(p.message)},this.isValidExtend=async r=>{if(!gr(r)){const{message:o}=ue("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionTopic(s)},this.isValidRequest=async r=>{if(!gr(r)){const{message:g}=ue("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(g)}const{topic:s,request:o,chainId:l,expiry:d}=r;await this.isValidSessionTopic(s);const{namespaces:p}=this.client.session.get(s);if(!Vl(p,l)){const{message:g}=ue("MISSING_OR_INVALID",`request() chainId: ${l}`);throw new Error(g)}if(!fE(o)){const{message:g}=ue("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(g)}if(!gE(p,l,o.method)){const{message:g}=ue("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(g)}if(d&&!bE(d,xc)){const{message:g}=ue("MISSING_OR_INVALID",`request() expiry: ${d}. Expiry must be a number (in seconds) between ${xc.min} and ${xc.max}`);throw new Error(g)}},this.isValidRespond=async r=>{if(!gr(r)){const{message:l}=ue("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(l)}const{topic:s,response:o}=r;if(await this.isValidSessionTopic(s),!pE(o)){const{message:l}=ue("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(l)}},this.isValidPing=async r=>{if(!gr(r)){const{message:o}=ue("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async r=>{if(!gr(r)){const{message:p}=ue("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(p)}const{topic:s,event:o,chainId:l}=r;await this.isValidSessionTopic(s);const{namespaces:d}=this.client.session.get(s);if(!Vl(d,l)){const{message:p}=ue("MISSING_OR_INVALID",`emit() chainId: ${l}`);throw new Error(p)}if(!dE(o)){const{message:p}=ue("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(p)}if(!vE(d,l,o.name)){const{message:p}=ue("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(p)}},this.isValidDisconnect=async r=>{if(!gr(r)){const{message:o}=ue("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(r,s)=>{const o={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const l=await this.client.core.verify.resolve({attestationId:r,verifyUrl:s.verifyUrl});l&&(o.verified.origin=l,o.verified.validation=l===s.url?"VALID":"INVALID")}catch(l){this.client.logger.error(l)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(r,s)=>{Object.values(r).forEach(o=>{if(!Vt(o,!1)){const{message:l}=ue("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(l)}})}}isInitialized(){if(!this.initialized){const{message:t}=ue("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.client.core.relayer.on(Ct.message,async t=>{const{topic:r,message:s}=t;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(r,s);Zc(o)?(this.client.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):Qc(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:r,payload:o}),this.client.core.history.delete(r,o.id)):this.onRelayEventUnknownPayload({topic:r,payload:o})})}registerExpirerEvents(){this.client.core.expirer.on(Fr.expired,async t=>{const{topic:r,id:s}=xp(t.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,ue("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(t){if(!Vt(t,!1)){const{message:r}=ue("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:r}=ue("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(xi(this.client.core.pairing.pairings.get(t).expiry)){const{message:r}=ue("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}}async isValidSessionTopic(t){if(!Vt(t,!1)){const{message:r}=ue("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(r)}if(!this.client.session.keys.includes(t)){const{message:r}=ue("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(r)}if(xi(this.client.session.get(t).expiry)){await this.deleteSession(t);const{message:r}=ue("EXPIRED",`session topic: ${t}`);throw new Error(r)}}async isValidSessionOrPairingTopic(t){if(this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(Vt(t,!1)){const{message:r}=ue("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(r)}else{const{message:r}=ue("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(r)}}async isValidProposalId(t){if(!hE(t)){const{message:r}=ue("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(r)}if(!this.client.proposal.keys.includes(t)){const{message:r}=ue("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(r)}if(xi(this.client.proposal.get(t).expiry)){await this.deleteProposal(t);const{message:r}=ue("EXPIRED",`proposal id: ${t}`);throw new Error(r)}}}class J2 extends ja{constructor(t,r){super(t,r,j2,vu),this.core=t,this.logger=r}}class X2 extends ja{constructor(t,r){super(t,r,z2,vu),this.core=t,this.logger=r}}class Z2 extends ja{constructor(t,r){super(t,r,H2,vu,s=>s.id),this.core=t,this.logger=r}}class yu extends VE{constructor(t){super(t),this.protocol=Xp,this.version=Zp,this.name=Ic.name,this.events=new Dr.exports.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(t==null?void 0:t.name)||Ic.name,this.metadata=(t==null?void 0:t.metadata)||Cw();const r=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(t==null?void 0:t.logger)||Ic.logger}));this.core=(t==null?void 0:t.core)||new L2(t),this.logger=Qe.generateChildLogger(r,this.name),this.session=new X2(this.core,this.logger),this.proposal=new J2(this.core,this.logger),this.pendingRequest=new Z2(this.core,this.logger),this.engine=new Y2(this)}static async init(t){const r=new yu(t);return await r.initialize(),r}get context(){return Qe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}const Ff="error",Q2="wss://relay.walletconnect.com",eD="wc",tD="universal_provider",$f=`${eD}@2:${tD}:`,rD="https://rpc.walletconnect.com/v1",Ni={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var as=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vc={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(n,t){(function(){var r,s="4.17.21",o=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",d="Expected a function",p="Invalid `variable` option passed into `_.template`",g="__lodash_hash_undefined__",w=500,S="__lodash_placeholder__",$=1,z=2,F=4,M=1,B=2,J=1,se=2,O=4,R=8,D=16,x=32,b=64,c=128,_=256,K=512,V=30,ae="...",ce=800,ge=16,P=1,q=2,le=3,te=1/0,G=9007199254740991,ee=17976931348623157e292,W=0/0,re=4294967295,xe=re-1,ie=re>>>1,me=[["ary",c],["bind",J],["bindKey",se],["curry",R],["curryRight",D],["flip",K],["partial",x],["partialRight",b],["rearg",_]],he="[object Arguments]",_e="[object Array]",j="[object AsyncFunction]",L="[object Boolean]",A="[object Date]",h="[object DOMException]",I="[object Error]",ne="[object Function]",fe="[object GeneratorFunction]",Se="[object Map]",He="[object Number]",ke="[object Null]",Le="[object Object]",pt="[object Promise]",dt="[object Proxy]",je="[object RegExp]",Ie="[object Set]",Re="[object String]",Ue="[object Symbol]",ze="[object Undefined]",Oe="[object WeakMap]",Fe="[object WeakSet]",De="[object ArrayBuffer]",Ae="[object DataView]",Be="[object Float32Array]",Ce="[object Float64Array]",Ve="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",Qt="[object Uint16Array]",ur="[object Uint32Array]",kr=/\b__p \+= '';/g,er=/\b(__p \+=) '' \+/g,ti=/(__e\(.*?\)|\b__t\)) \+\n'';/g,di=/&(?:amp|lt|gt|quot|#39);/g,Ti=/[&<>"']/g,mt=RegExp(di.source),gt=RegExp(Ti.source),wt=/<%-([\s\S]+?)%>/g,Et=/<%([\s\S]+?)%>/g,_t=/<%=([\s\S]+?)%>/g,vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ut=/^\w*$/,Ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dt=/[\\^$.*+?()[\]{}|]/g,$t=RegExp(Dt.source),St=/^\s+/,Ot=/\s/,It=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ht=/\{\n\/\* \[wrapped with (.+)\] \*/,Lt=/,? & /,Mt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,za=/[()=,{}\[\]\/\s]/,qa=/\\(\\)?/g,Ha=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ir=/\w*$/,Ba=/^[-+]0x[0-9a-f]+$/i,Ka=/^0b[01]+$/i,ka=/^\[object .+?Constructor\]$/,Va=/^0o[0-7]+$/i,Ga=/^(?:0|[1-9]\d*)$/,ri=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tn=/($^)/,Wa=/['\n\r\u2028\u2029\\]/g,rn="\\ud800-\\udfff",Ya="\\u0300-\\u036f",Ja="\\ufe20-\\ufe2f",nn="\\u20d0-\\u20ff",ds=Ya+Ja+nn,gs="\\u2700-\\u27bf",Lr="a-z\\xdf-\\xf6\\xf8-\\xff",Xa="\\xac\\xb1\\xd7\\xf7",Za="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Qa="\\u2000-\\u206f",eo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vs="A-Z\\xc0-\\xd6\\xd8-\\xde",ys="\\ufe0e\\ufe0f",Ri=Xa+Za+Qa+eo,Pn="['\u2019]",Ui="["+rn+"]",Nn="["+Ri+"]",Fi="["+ds+"]",_s="\\d+",to="["+gs+"]",bs="["+Lr+"]",ms="[^"+rn+Ri+_s+gs+Lr+vs+"]",sn="\\ud83c[\\udffb-\\udfff]",ro="(?:"+Fi+"|"+sn+")",ws="[^"+rn+"]",an="(?:\\ud83c[\\udde6-\\uddff]){2}",gi="[\\ud800-\\udbff][\\udc00-\\udfff]",yr="["+vs+"]",Es="\\u200d",Ds="(?:"+bs+"|"+ms+")",Vr="(?:"+yr+"|"+ms+")",Ss="(?:"+Pn+"(?:d|ll|m|re|s|t|ve))?",Is="(?:"+Pn+"(?:D|LL|M|RE|S|T|VE))?",xs=ro+"?",Cs="["+ys+"]?",io="(?:"+Es+"(?:"+[ws,an,gi].join("|")+")"+Cs+xs+")*",ii="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Os="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",As=Cs+xs+io,on="(?:"+[to,an,gi].join("|")+")"+As,no="(?:"+[ws+Fi+"?",Fi,an,gi,Ui].join("|")+")",Tn=RegExp(Pn,"g"),so=RegExp(Fi,"g"),cn=RegExp(sn+"(?="+sn+")|"+no+As,"g"),Ps=RegExp([yr+"?"+bs+"+"+Ss+"(?="+[Nn,yr,"$"].join("|")+")",Vr+"+"+Is+"(?="+[Nn,yr+Ds,"$"].join("|")+")",yr+"?"+Ds+"+"+Ss,yr+"+"+Is,Os,ii,_s,on].join("|"),"g"),Ns=RegExp("["+Es+rn+ds+ys+"]"),$i=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ts=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ao=-1,at={};at[Be]=at[Ce]=at[Ve]=at[We]=at[et]=at[tt]=at[Je]=at[Qt]=at[ur]=!0,at[he]=at[_e]=at[De]=at[L]=at[Ae]=at[A]=at[I]=at[ne]=at[Se]=at[He]=at[Le]=at[je]=at[Ie]=at[Re]=at[Oe]=!1;var st={};st[he]=st[_e]=st[De]=st[Ae]=st[L]=st[A]=st[Be]=st[Ce]=st[Ve]=st[We]=st[et]=st[Se]=st[He]=st[Le]=st[je]=st[Ie]=st[Re]=st[Ue]=st[tt]=st[Je]=st[Qt]=st[ur]=!0,st[I]=st[ne]=st[Oe]=!1;var m={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Z={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ot=parseFloat,Ne=parseInt,lt=typeof as=="object"&&as&&as.Object===Object&&as,jt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=lt||jt||Function("return this")(),ct=t&&!t.nodeType&&t,At=ct&&!0&&n&&!n.nodeType&&n,hr=At&&At.exports===ct,zt=hr&&lt.process,ft=function(){try{var T=At&&At.require&&At.require("util").types;return T||zt&&zt.binding&&zt.binding("util")}catch{}}(),tr=ft&&ft.isArrayBuffer,Mr=ft&&ft.isDate,xr=ft&&ft.isMap,Gr=ft&&ft.isRegExp,Rn=ft&&ft.isSet,Li=ft&&ft.isTypedArray;function Kt(T,k,H){switch(H.length){case 0:return T.call(k);case 1:return T.call(k,H[0]);case 2:return T.call(k,H[0],H[1]);case 3:return T.call(k,H[0],H[1],H[2])}return T.apply(k,H)}function id(T,k,H,de){for(var Pe=-1,rt=T==null?0:T.length;++Pe<rt;){var Ht=T[Pe];k(de,Ht,H(Ht),T)}return de}function Cr(T,k){for(var H=-1,de=T==null?0:T.length;++H<de&&k(T[H],H,T)!==!1;);return T}function nd(T,k){for(var H=T==null?0:T.length;H--&&k(T[H],H,T)!==!1;);return T}function mu(T,k){for(var H=-1,de=T==null?0:T.length;++H<de;)if(!k(T[H],H,T))return!1;return!0}function vi(T,k){for(var H=-1,de=T==null?0:T.length,Pe=0,rt=[];++H<de;){var Ht=T[H];k(Ht,H,T)&&(rt[Pe++]=Ht)}return rt}function Rs(T,k){var H=T==null?0:T.length;return!!H&&un(T,k,0)>-1}function oo(T,k,H){for(var de=-1,Pe=T==null?0:T.length;++de<Pe;)if(H(k,T[de]))return!0;return!1}function yt(T,k){for(var H=-1,de=T==null?0:T.length,Pe=Array(de);++H<de;)Pe[H]=k(T[H],H,T);return Pe}function yi(T,k){for(var H=-1,de=k.length,Pe=T.length;++H<de;)T[Pe+H]=k[H];return T}function co(T,k,H,de){var Pe=-1,rt=T==null?0:T.length;for(de&&rt&&(H=T[++Pe]);++Pe<rt;)H=k(H,T[Pe],Pe,T);return H}function sd(T,k,H,de){var Pe=T==null?0:T.length;for(de&&Pe&&(H=T[--Pe]);Pe--;)H=k(H,T[Pe],Pe,T);return H}function uo(T,k){for(var H=-1,de=T==null?0:T.length;++H<de;)if(k(T[H],H,T))return!0;return!1}var ad=ho("length");function od(T){return T.split("")}function cd(T){return T.match(Mt)||[]}function wu(T,k,H){var de;return H(T,function(Pe,rt,Ht){if(k(Pe,rt,Ht))return de=rt,!1}),de}function Us(T,k,H,de){for(var Pe=T.length,rt=H+(de?1:-1);de?rt--:++rt<Pe;)if(k(T[rt],rt,T))return rt;return-1}function un(T,k,H){return k===k?md(T,k,H):Us(T,Eu,H)}function ud(T,k,H,de){for(var Pe=H-1,rt=T.length;++Pe<rt;)if(de(T[Pe],k))return Pe;return-1}function Eu(T){return T!==T}function Du(T,k){var H=T==null?0:T.length;return H?fo(T,k)/H:W}function ho(T){return function(k){return k==null?r:k[T]}}function lo(T){return function(k){return T==null?r:T[k]}}function Su(T,k,H,de,Pe){return Pe(T,function(rt,Ht,ut){H=de?(de=!1,rt):k(H,rt,Ht,ut)}),H}function hd(T,k){var H=T.length;for(T.sort(k);H--;)T[H]=T[H].value;return T}function fo(T,k){for(var H,de=-1,Pe=T.length;++de<Pe;){var rt=k(T[de]);rt!==r&&(H=H===r?rt:H+rt)}return H}function po(T,k){for(var H=-1,de=Array(T);++H<T;)de[H]=k(H);return de}function ld(T,k){return yt(k,function(H){return[H,T[H]]})}function Iu(T){return T&&T.slice(0,Au(T)+1).replace(St,"")}function _r(T){return function(k){return T(k)}}function go(T,k){return yt(k,function(H){return T[H]})}function Un(T,k){return T.has(k)}function xu(T,k){for(var H=-1,de=T.length;++H<de&&un(k,T[H],0)>-1;);return H}function Cu(T,k){for(var H=T.length;H--&&un(k,T[H],0)>-1;);return H}function fd(T,k){for(var H=T.length,de=0;H--;)T[H]===k&&++de;return de}var pd=lo(m),dd=lo(N);function gd(T){return"\\"+pe[T]}function vd(T,k){return T==null?r:T[k]}function hn(T){return Ns.test(T)}function yd(T){return $i.test(T)}function _d(T){for(var k,H=[];!(k=T.next()).done;)H.push(k.value);return H}function vo(T){var k=-1,H=Array(T.size);return T.forEach(function(de,Pe){H[++k]=[Pe,de]}),H}function Ou(T,k){return function(H){return T(k(H))}}function _i(T,k){for(var H=-1,de=T.length,Pe=0,rt=[];++H<de;){var Ht=T[H];(Ht===k||Ht===S)&&(T[H]=S,rt[Pe++]=H)}return rt}function Fs(T){var k=-1,H=Array(T.size);return T.forEach(function(de){H[++k]=de}),H}function bd(T){var k=-1,H=Array(T.size);return T.forEach(function(de){H[++k]=[de,de]}),H}function md(T,k,H){for(var de=H-1,Pe=T.length;++de<Pe;)if(T[de]===k)return de;return-1}function wd(T,k,H){for(var de=H+1;de--;)if(T[de]===k)return de;return de}function ln(T){return hn(T)?Dd(T):ad(T)}function jr(T){return hn(T)?Sd(T):od(T)}function Au(T){for(var k=T.length;k--&&Ot.test(T.charAt(k)););return k}var Ed=lo(Z);function Dd(T){for(var k=cn.lastIndex=0;cn.test(T);)++k;return k}function Sd(T){return T.match(cn)||[]}function Id(T){return T.match(Ps)||[]}var xd=function T(k){k=k==null?Xe:fn.defaults(Xe.Object(),k,fn.pick(Xe,Ts));var H=k.Array,de=k.Date,Pe=k.Error,rt=k.Function,Ht=k.Math,ut=k.Object,yo=k.RegExp,Cd=k.String,Or=k.TypeError,$s=H.prototype,Od=rt.prototype,pn=ut.prototype,Ls=k["__core-js_shared__"],Ms=Od.toString,nt=pn.hasOwnProperty,Ad=0,Pu=function(){var e=/[^.]+$/.exec(Ls&&Ls.keys&&Ls.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),js=pn.toString,Pd=Ms.call(ut),Nd=Xe._,Td=yo("^"+Ms.call(nt).replace(Dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zs=hr?k.Buffer:r,bi=k.Symbol,qs=k.Uint8Array,Nu=zs?zs.allocUnsafe:r,Hs=Ou(ut.getPrototypeOf,ut),Tu=ut.create,Ru=pn.propertyIsEnumerable,Bs=$s.splice,Uu=bi?bi.isConcatSpreadable:r,Fn=bi?bi.iterator:r,Mi=bi?bi.toStringTag:r,Ks=function(){try{var e=Bi(ut,"defineProperty");return e({},"",{}),e}catch{}}(),Rd=k.clearTimeout!==Xe.clearTimeout&&k.clearTimeout,Ud=de&&de.now!==Xe.Date.now&&de.now,Fd=k.setTimeout!==Xe.setTimeout&&k.setTimeout,ks=Ht.ceil,Vs=Ht.floor,_o=ut.getOwnPropertySymbols,$d=zs?zs.isBuffer:r,Fu=k.isFinite,Ld=$s.join,Md=Ou(ut.keys,ut),Bt=Ht.max,Jt=Ht.min,jd=de.now,zd=k.parseInt,$u=Ht.random,qd=$s.reverse,bo=Bi(k,"DataView"),$n=Bi(k,"Map"),mo=Bi(k,"Promise"),dn=Bi(k,"Set"),Ln=Bi(k,"WeakMap"),Mn=Bi(ut,"create"),Gs=Ln&&new Ln,gn={},Hd=Ki(bo),Bd=Ki($n),Kd=Ki(mo),kd=Ki(dn),Vd=Ki(Ln),Ws=bi?bi.prototype:r,jn=Ws?Ws.valueOf:r,Lu=Ws?Ws.toString:r;function v(e){if(xt(e)&&!Te(e)&&!(e instanceof Ye)){if(e instanceof Ar)return e;if(nt.call(e,"__wrapped__"))return Mh(e)}return new Ar(e)}var vn=function(){function e(){}return function(i){if(!bt(i))return{};if(Tu)return Tu(i);e.prototype=i;var a=new e;return e.prototype=r,a}}();function Ys(){}function Ar(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}v.templateSettings={escape:wt,evaluate:Et,interpolate:_t,variable:"",imports:{_:v}},v.prototype=Ys.prototype,v.prototype.constructor=v,Ar.prototype=vn(Ys.prototype),Ar.prototype.constructor=Ar;function Ye(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function Gd(){var e=new Ye(this.__wrapped__);return e.__actions__=lr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=lr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=lr(this.__views__),e}function Wd(){if(this.__filtered__){var e=new Ye(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Yd(){var e=this.__wrapped__.value(),i=this.__dir__,a=Te(e),u=i<0,f=a?e.length:0,y=o0(0,f,this.__views__),E=y.start,C=y.end,U=C-E,Y=u?C:E-1,X=this.__iteratees__,Q=X.length,oe=0,ve=Jt(U,this.__takeCount__);if(!a||!u&&f==U&&ve==U)return oh(e,this.__actions__);var we=[];e:for(;U--&&oe<ve;){Y+=i;for(var qe=-1,Ee=e[Y];++qe<Q;){var Ge=X[qe],Ze=Ge.iteratee,wr=Ge.type,nr=Ze(Ee);if(wr==q)Ee=nr;else if(!nr){if(wr==P)continue e;break e}}we[oe++]=Ee}return we}Ye.prototype=vn(Ys.prototype),Ye.prototype.constructor=Ye;function ji(e){var i=-1,a=e==null?0:e.length;for(this.clear();++i<a;){var u=e[i];this.set(u[0],u[1])}}function Jd(){this.__data__=Mn?Mn(null):{},this.size=0}function Xd(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function Zd(e){var i=this.__data__;if(Mn){var a=i[e];return a===g?r:a}return nt.call(i,e)?i[e]:r}function Qd(e){var i=this.__data__;return Mn?i[e]!==r:nt.call(i,e)}function eg(e,i){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=Mn&&i===r?g:i,this}ji.prototype.clear=Jd,ji.prototype.delete=Xd,ji.prototype.get=Zd,ji.prototype.has=Qd,ji.prototype.set=eg;function ni(e){var i=-1,a=e==null?0:e.length;for(this.clear();++i<a;){var u=e[i];this.set(u[0],u[1])}}function tg(){this.__data__=[],this.size=0}function rg(e){var i=this.__data__,a=Js(i,e);if(a<0)return!1;var u=i.length-1;return a==u?i.pop():Bs.call(i,a,1),--this.size,!0}function ig(e){var i=this.__data__,a=Js(i,e);return a<0?r:i[a][1]}function ng(e){return Js(this.__data__,e)>-1}function sg(e,i){var a=this.__data__,u=Js(a,e);return u<0?(++this.size,a.push([e,i])):a[u][1]=i,this}ni.prototype.clear=tg,ni.prototype.delete=rg,ni.prototype.get=ig,ni.prototype.has=ng,ni.prototype.set=sg;function si(e){var i=-1,a=e==null?0:e.length;for(this.clear();++i<a;){var u=e[i];this.set(u[0],u[1])}}function ag(){this.size=0,this.__data__={hash:new ji,map:new($n||ni),string:new ji}}function og(e){var i=ca(this,e).delete(e);return this.size-=i?1:0,i}function cg(e){return ca(this,e).get(e)}function ug(e){return ca(this,e).has(e)}function hg(e,i){var a=ca(this,e),u=a.size;return a.set(e,i),this.size+=a.size==u?0:1,this}si.prototype.clear=ag,si.prototype.delete=og,si.prototype.get=cg,si.prototype.has=ug,si.prototype.set=hg;function zi(e){var i=-1,a=e==null?0:e.length;for(this.__data__=new si;++i<a;)this.add(e[i])}function lg(e){return this.__data__.set(e,g),this}function fg(e){return this.__data__.has(e)}zi.prototype.add=zi.prototype.push=lg,zi.prototype.has=fg;function zr(e){var i=this.__data__=new ni(e);this.size=i.size}function pg(){this.__data__=new ni,this.size=0}function dg(e){var i=this.__data__,a=i.delete(e);return this.size=i.size,a}function gg(e){return this.__data__.get(e)}function vg(e){return this.__data__.has(e)}function yg(e,i){var a=this.__data__;if(a instanceof ni){var u=a.__data__;if(!$n||u.length<o-1)return u.push([e,i]),this.size=++a.size,this;a=this.__data__=new si(u)}return a.set(e,i),this.size=a.size,this}zr.prototype.clear=pg,zr.prototype.delete=dg,zr.prototype.get=gg,zr.prototype.has=vg,zr.prototype.set=yg;function Mu(e,i){var a=Te(e),u=!a&&ki(e),f=!a&&!u&&Si(e),y=!a&&!u&&!f&&mn(e),E=a||u||f||y,C=E?po(e.length,Cd):[],U=C.length;for(var Y in e)(i||nt.call(e,Y))&&!(E&&(Y=="length"||f&&(Y=="offset"||Y=="parent")||y&&(Y=="buffer"||Y=="byteLength"||Y=="byteOffset")||ui(Y,U)))&&C.push(Y);return C}function ju(e){var i=e.length;return i?e[No(0,i-1)]:r}function _g(e,i){return ua(lr(e),qi(i,0,e.length))}function bg(e){return ua(lr(e))}function wo(e,i,a){(a!==r&&!qr(e[i],a)||a===r&&!(i in e))&&ai(e,i,a)}function zn(e,i,a){var u=e[i];(!(nt.call(e,i)&&qr(u,a))||a===r&&!(i in e))&&ai(e,i,a)}function Js(e,i){for(var a=e.length;a--;)if(qr(e[a][0],i))return a;return-1}function mg(e,i,a,u){return mi(e,function(f,y,E){i(u,f,a(f),E)}),u}function zu(e,i){return e&&Yr(i,kt(i),e)}function wg(e,i){return e&&Yr(i,pr(i),e)}function ai(e,i,a){i=="__proto__"&&Ks?Ks(e,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[i]=a}function Eo(e,i){for(var a=-1,u=i.length,f=H(u),y=e==null;++a<u;)f[a]=y?r:rc(e,i[a]);return f}function qi(e,i,a){return e===e&&(a!==r&&(e=e<=a?e:a),i!==r&&(e=e>=i?e:i)),e}function Pr(e,i,a,u,f,y){var E,C=i&$,U=i&z,Y=i&F;if(a&&(E=f?a(e,u,f,y):a(e)),E!==r)return E;if(!bt(e))return e;var X=Te(e);if(X){if(E=u0(e),!C)return lr(e,E)}else{var Q=Xt(e),oe=Q==ne||Q==fe;if(Si(e))return hh(e,C);if(Q==Le||Q==he||oe&&!f){if(E=U||oe?{}:Ah(e),!C)return U?Zg(e,wg(E,e)):Xg(e,zu(E,e))}else{if(!st[Q])return f?e:{};E=h0(e,Q,C)}}y||(y=new zr);var ve=y.get(e);if(ve)return ve;y.set(e,E),nl(e)?e.forEach(function(Ee){E.add(Pr(Ee,i,a,Ee,e,y))}):rl(e)&&e.forEach(function(Ee,Ge){E.set(Ge,Pr(Ee,i,a,Ge,e,y))});var we=Y?U?Ho:qo:U?pr:kt,qe=X?r:we(e);return Cr(qe||e,function(Ee,Ge){qe&&(Ge=Ee,Ee=e[Ge]),zn(E,Ge,Pr(Ee,i,a,Ge,e,y))}),E}function Eg(e){var i=kt(e);return function(a){return qu(a,e,i)}}function qu(e,i,a){var u=a.length;if(e==null)return!u;for(e=ut(e);u--;){var f=a[u],y=i[f],E=e[f];if(E===r&&!(f in e)||!y(E))return!1}return!0}function Hu(e,i,a){if(typeof e!="function")throw new Or(d);return Gn(function(){e.apply(r,a)},i)}function qn(e,i,a,u){var f=-1,y=Rs,E=!0,C=e.length,U=[],Y=i.length;if(!C)return U;a&&(i=yt(i,_r(a))),u?(y=oo,E=!1):i.length>=o&&(y=Un,E=!1,i=new zi(i));e:for(;++f<C;){var X=e[f],Q=a==null?X:a(X);if(X=u||X!==0?X:0,E&&Q===Q){for(var oe=Y;oe--;)if(i[oe]===Q)continue e;U.push(X)}else y(i,Q,u)||U.push(X)}return U}var mi=gh(Wr),Bu=gh(So,!0);function Dg(e,i){var a=!0;return mi(e,function(u,f,y){return a=!!i(u,f,y),a}),a}function Xs(e,i,a){for(var u=-1,f=e.length;++u<f;){var y=e[u],E=i(y);if(E!=null&&(C===r?E===E&&!mr(E):a(E,C)))var C=E,U=y}return U}function Sg(e,i,a,u){var f=e.length;for(a=Me(a),a<0&&(a=-a>f?0:f+a),u=u===r||u>f?f:Me(u),u<0&&(u+=f),u=a>u?0:al(u);a<u;)e[a++]=i;return e}function Ku(e,i){var a=[];return mi(e,function(u,f,y){i(u,f,y)&&a.push(u)}),a}function Gt(e,i,a,u,f){var y=-1,E=e.length;for(a||(a=f0),f||(f=[]);++y<E;){var C=e[y];i>0&&a(C)?i>1?Gt(C,i-1,a,u,f):yi(f,C):u||(f[f.length]=C)}return f}var Do=vh(),ku=vh(!0);function Wr(e,i){return e&&Do(e,i,kt)}function So(e,i){return e&&ku(e,i,kt)}function Zs(e,i){return vi(i,function(a){return hi(e[a])})}function Hi(e,i){i=Ei(i,e);for(var a=0,u=i.length;e!=null&&a<u;)e=e[Jr(i[a++])];return a&&a==u?e:r}function Vu(e,i,a){var u=i(e);return Te(e)?u:yi(u,a(e))}function rr(e){return e==null?e===r?ze:ke:Mi&&Mi in ut(e)?a0(e):b0(e)}function Io(e,i){return e>i}function Ig(e,i){return e!=null&&nt.call(e,i)}function xg(e,i){return e!=null&&i in ut(e)}function Cg(e,i,a){return e>=Jt(i,a)&&e<Bt(i,a)}function xo(e,i,a){for(var u=a?oo:Rs,f=e[0].length,y=e.length,E=y,C=H(y),U=1/0,Y=[];E--;){var X=e[E];E&&i&&(X=yt(X,_r(i))),U=Jt(X.length,U),C[E]=!a&&(i||f>=120&&X.length>=120)?new zi(E&&X):r}X=e[0];var Q=-1,oe=C[0];e:for(;++Q<f&&Y.length<U;){var ve=X[Q],we=i?i(ve):ve;if(ve=a||ve!==0?ve:0,!(oe?Un(oe,we):u(Y,we,a))){for(E=y;--E;){var qe=C[E];if(!(qe?Un(qe,we):u(e[E],we,a)))continue e}oe&&oe.push(we),Y.push(ve)}}return Y}function Og(e,i,a,u){return Wr(e,function(f,y,E){i(u,a(f),y,E)}),u}function Hn(e,i,a){i=Ei(i,e),e=Rh(e,i);var u=e==null?e:e[Jr(Tr(i))];return u==null?r:Kt(u,e,a)}function Gu(e){return xt(e)&&rr(e)==he}function Ag(e){return xt(e)&&rr(e)==De}function Pg(e){return xt(e)&&rr(e)==A}function Bn(e,i,a,u,f){return e===i?!0:e==null||i==null||!xt(e)&&!xt(i)?e!==e&&i!==i:Ng(e,i,a,u,Bn,f)}function Ng(e,i,a,u,f,y){var E=Te(e),C=Te(i),U=E?_e:Xt(e),Y=C?_e:Xt(i);U=U==he?Le:U,Y=Y==he?Le:Y;var X=U==Le,Q=Y==Le,oe=U==Y;if(oe&&Si(e)){if(!Si(i))return!1;E=!0,X=!1}if(oe&&!X)return y||(y=new zr),E||mn(e)?xh(e,i,a,u,f,y):n0(e,i,U,a,u,f,y);if(!(a&M)){var ve=X&&nt.call(e,"__wrapped__"),we=Q&&nt.call(i,"__wrapped__");if(ve||we){var qe=ve?e.value():e,Ee=we?i.value():i;return y||(y=new zr),f(qe,Ee,a,u,y)}}return oe?(y||(y=new zr),s0(e,i,a,u,f,y)):!1}function Tg(e){return xt(e)&&Xt(e)==Se}function Co(e,i,a,u){var f=a.length,y=f,E=!u;if(e==null)return!y;for(e=ut(e);f--;){var C=a[f];if(E&&C[2]?C[1]!==e[C[0]]:!(C[0]in e))return!1}for(;++f<y;){C=a[f];var U=C[0],Y=e[U],X=C[1];if(E&&C[2]){if(Y===r&&!(U in e))return!1}else{var Q=new zr;if(u)var oe=u(Y,X,U,e,i,Q);if(!(oe===r?Bn(X,Y,M|B,u,Q):oe))return!1}}return!0}function Wu(e){if(!bt(e)||d0(e))return!1;var i=hi(e)?Td:ka;return i.test(Ki(e))}function Rg(e){return xt(e)&&rr(e)==je}function Ug(e){return xt(e)&&Xt(e)==Ie}function Fg(e){return xt(e)&&ga(e.length)&&!!at[rr(e)]}function Yu(e){return typeof e=="function"?e:e==null?dr:typeof e=="object"?Te(e)?Zu(e[0],e[1]):Xu(e):yl(e)}function Oo(e){if(!Vn(e))return Md(e);var i=[];for(var a in ut(e))nt.call(e,a)&&a!="constructor"&&i.push(a);return i}function $g(e){if(!bt(e))return _0(e);var i=Vn(e),a=[];for(var u in e)u=="constructor"&&(i||!nt.call(e,u))||a.push(u);return a}function Ao(e,i){return e<i}function Ju(e,i){var a=-1,u=fr(e)?H(e.length):[];return mi(e,function(f,y,E){u[++a]=i(f,y,E)}),u}function Xu(e){var i=Ko(e);return i.length==1&&i[0][2]?Nh(i[0][0],i[0][1]):function(a){return a===e||Co(a,e,i)}}function Zu(e,i){return Vo(e)&&Ph(i)?Nh(Jr(e),i):function(a){var u=rc(a,e);return u===r&&u===i?ic(a,e):Bn(i,u,M|B)}}function Qs(e,i,a,u,f){e!==i&&Do(i,function(y,E){if(f||(f=new zr),bt(y))Lg(e,i,E,a,Qs,u,f);else{var C=u?u(Wo(e,E),y,E+"",e,i,f):r;C===r&&(C=y),wo(e,E,C)}},pr)}function Lg(e,i,a,u,f,y,E){var C=Wo(e,a),U=Wo(i,a),Y=E.get(U);if(Y){wo(e,a,Y);return}var X=y?y(C,U,a+"",e,i,E):r,Q=X===r;if(Q){var oe=Te(U),ve=!oe&&Si(U),we=!oe&&!ve&&mn(U);X=U,oe||ve||we?Te(C)?X=C:Pt(C)?X=lr(C):ve?(Q=!1,X=hh(U,!0)):we?(Q=!1,X=lh(U,!0)):X=[]:Wn(U)||ki(U)?(X=C,ki(C)?X=ol(C):(!bt(C)||hi(C))&&(X=Ah(U))):Q=!1}Q&&(E.set(U,X),f(X,U,u,y,E),E.delete(U)),wo(e,a,X)}function Qu(e,i){var a=e.length;if(a)return i+=i<0?a:0,ui(i,a)?e[i]:r}function eh(e,i,a){i.length?i=yt(i,function(y){return Te(y)?function(E){return Hi(E,y.length===1?y[0]:y)}:y}):i=[dr];var u=-1;i=yt(i,_r(be()));var f=Ju(e,function(y,E,C){var U=yt(i,function(Y){return Y(y)});return{criteria:U,index:++u,value:y}});return hd(f,function(y,E){return Jg(y,E,a)})}function Mg(e,i){return th(e,i,function(a,u){return ic(e,u)})}function th(e,i,a){for(var u=-1,f=i.length,y={};++u<f;){var E=i[u],C=Hi(e,E);a(C,E)&&Kn(y,Ei(E,e),C)}return y}function jg(e){return function(i){return Hi(i,e)}}function Po(e,i,a,u){var f=u?ud:un,y=-1,E=i.length,C=e;for(e===i&&(i=lr(i)),a&&(C=yt(e,_r(a)));++y<E;)for(var U=0,Y=i[y],X=a?a(Y):Y;(U=f(C,X,U,u))>-1;)C!==e&&Bs.call(C,U,1),Bs.call(e,U,1);return e}function rh(e,i){for(var a=e?i.length:0,u=a-1;a--;){var f=i[a];if(a==u||f!==y){var y=f;ui(f)?Bs.call(e,f,1):Uo(e,f)}}return e}function No(e,i){return e+Vs($u()*(i-e+1))}function zg(e,i,a,u){for(var f=-1,y=Bt(ks((i-e)/(a||1)),0),E=H(y);y--;)E[u?y:++f]=e,e+=a;return E}function To(e,i){var a="";if(!e||i<1||i>G)return a;do i%2&&(a+=e),i=Vs(i/2),i&&(e+=e);while(i);return a}function Ke(e,i){return Yo(Th(e,i,dr),e+"")}function qg(e){return ju(wn(e))}function Hg(e,i){var a=wn(e);return ua(a,qi(i,0,a.length))}function Kn(e,i,a,u){if(!bt(e))return e;i=Ei(i,e);for(var f=-1,y=i.length,E=y-1,C=e;C!=null&&++f<y;){var U=Jr(i[f]),Y=a;if(U==="__proto__"||U==="constructor"||U==="prototype")return e;if(f!=E){var X=C[U];Y=u?u(X,U,C):r,Y===r&&(Y=bt(X)?X:ui(i[f+1])?[]:{})}zn(C,U,Y),C=C[U]}return e}var ih=Gs?function(e,i){return Gs.set(e,i),e}:dr,Bg=Ks?function(e,i){return Ks(e,"toString",{configurable:!0,enumerable:!1,value:sc(i),writable:!0})}:dr;function Kg(e){return ua(wn(e))}function Nr(e,i,a){var u=-1,f=e.length;i<0&&(i=-i>f?0:f+i),a=a>f?f:a,a<0&&(a+=f),f=i>a?0:a-i>>>0,i>>>=0;for(var y=H(f);++u<f;)y[u]=e[u+i];return y}function kg(e,i){var a;return mi(e,function(u,f,y){return a=i(u,f,y),!a}),!!a}function ea(e,i,a){var u=0,f=e==null?u:e.length;if(typeof i=="number"&&i===i&&f<=ie){for(;u<f;){var y=u+f>>>1,E=e[y];E!==null&&!mr(E)&&(a?E<=i:E<i)?u=y+1:f=y}return f}return Ro(e,i,dr,a)}function Ro(e,i,a,u){var f=0,y=e==null?0:e.length;if(y===0)return 0;i=a(i);for(var E=i!==i,C=i===null,U=mr(i),Y=i===r;f<y;){var X=Vs((f+y)/2),Q=a(e[X]),oe=Q!==r,ve=Q===null,we=Q===Q,qe=mr(Q);if(E)var Ee=u||we;else Y?Ee=we&&(u||oe):C?Ee=we&&oe&&(u||!ve):U?Ee=we&&oe&&!ve&&(u||!qe):ve||qe?Ee=!1:Ee=u?Q<=i:Q<i;Ee?f=X+1:y=X}return Jt(y,xe)}function nh(e,i){for(var a=-1,u=e.length,f=0,y=[];++a<u;){var E=e[a],C=i?i(E):E;if(!a||!qr(C,U)){var U=C;y[f++]=E===0?0:E}}return y}function sh(e){return typeof e=="number"?e:mr(e)?W:+e}function br(e){if(typeof e=="string")return e;if(Te(e))return yt(e,br)+"";if(mr(e))return Lu?Lu.call(e):"";var i=e+"";return i=="0"&&1/e==-te?"-0":i}function wi(e,i,a){var u=-1,f=Rs,y=e.length,E=!0,C=[],U=C;if(a)E=!1,f=oo;else if(y>=o){var Y=i?null:r0(e);if(Y)return Fs(Y);E=!1,f=Un,U=new zi}else U=i?[]:C;e:for(;++u<y;){var X=e[u],Q=i?i(X):X;if(X=a||X!==0?X:0,E&&Q===Q){for(var oe=U.length;oe--;)if(U[oe]===Q)continue e;i&&U.push(Q),C.push(X)}else f(U,Q,a)||(U!==C&&U.push(Q),C.push(X))}return C}function Uo(e,i){return i=Ei(i,e),e=Rh(e,i),e==null||delete e[Jr(Tr(i))]}function ah(e,i,a,u){return Kn(e,i,a(Hi(e,i)),u)}function ta(e,i,a,u){for(var f=e.length,y=u?f:-1;(u?y--:++y<f)&&i(e[y],y,e););return a?Nr(e,u?0:y,u?y+1:f):Nr(e,u?y+1:0,u?f:y)}function oh(e,i){var a=e;return a instanceof Ye&&(a=a.value()),co(i,function(u,f){return f.func.apply(f.thisArg,yi([u],f.args))},a)}function Fo(e,i,a){var u=e.length;if(u<2)return u?wi(e[0]):[];for(var f=-1,y=H(u);++f<u;)for(var E=e[f],C=-1;++C<u;)C!=f&&(y[f]=qn(y[f]||E,e[C],i,a));return wi(Gt(y,1),i,a)}function ch(e,i,a){for(var u=-1,f=e.length,y=i.length,E={};++u<f;){var C=u<y?i[u]:r;a(E,e[u],C)}return E}function $o(e){return Pt(e)?e:[]}function Lo(e){return typeof e=="function"?e:dr}function Ei(e,i){return Te(e)?e:Vo(e,i)?[e]:Lh(it(e))}var Vg=Ke;function Di(e,i,a){var u=e.length;return a=a===r?u:a,!i&&a>=u?e:Nr(e,i,a)}var uh=Rd||function(e){return Xe.clearTimeout(e)};function hh(e,i){if(i)return e.slice();var a=e.length,u=Nu?Nu(a):new e.constructor(a);return e.copy(u),u}function Mo(e){var i=new e.constructor(e.byteLength);return new qs(i).set(new qs(e)),i}function Gg(e,i){var a=i?Mo(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}function Wg(e){var i=new e.constructor(e.source,Ir.exec(e));return i.lastIndex=e.lastIndex,i}function Yg(e){return jn?ut(jn.call(e)):{}}function lh(e,i){var a=i?Mo(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}function fh(e,i){if(e!==i){var a=e!==r,u=e===null,f=e===e,y=mr(e),E=i!==r,C=i===null,U=i===i,Y=mr(i);if(!C&&!Y&&!y&&e>i||y&&E&&U&&!C&&!Y||u&&E&&U||!a&&U||!f)return 1;if(!u&&!y&&!Y&&e<i||Y&&a&&f&&!u&&!y||C&&a&&f||!E&&f||!U)return-1}return 0}function Jg(e,i,a){for(var u=-1,f=e.criteria,y=i.criteria,E=f.length,C=a.length;++u<E;){var U=fh(f[u],y[u]);if(U){if(u>=C)return U;var Y=a[u];return U*(Y=="desc"?-1:1)}}return e.index-i.index}function ph(e,i,a,u){for(var f=-1,y=e.length,E=a.length,C=-1,U=i.length,Y=Bt(y-E,0),X=H(U+Y),Q=!u;++C<U;)X[C]=i[C];for(;++f<E;)(Q||f<y)&&(X[a[f]]=e[f]);for(;Y--;)X[C++]=e[f++];return X}function dh(e,i,a,u){for(var f=-1,y=e.length,E=-1,C=a.length,U=-1,Y=i.length,X=Bt(y-C,0),Q=H(X+Y),oe=!u;++f<X;)Q[f]=e[f];for(var ve=f;++U<Y;)Q[ve+U]=i[U];for(;++E<C;)(oe||f<y)&&(Q[ve+a[E]]=e[f++]);return Q}function lr(e,i){var a=-1,u=e.length;for(i||(i=H(u));++a<u;)i[a]=e[a];return i}function Yr(e,i,a,u){var f=!a;a||(a={});for(var y=-1,E=i.length;++y<E;){var C=i[y],U=u?u(a[C],e[C],C,a,e):r;U===r&&(U=e[C]),f?ai(a,C,U):zn(a,C,U)}return a}function Xg(e,i){return Yr(e,ko(e),i)}function Zg(e,i){return Yr(e,Ch(e),i)}function ra(e,i){return function(a,u){var f=Te(a)?id:mg,y=i?i():{};return f(a,e,be(u,2),y)}}function yn(e){return Ke(function(i,a){var u=-1,f=a.length,y=f>1?a[f-1]:r,E=f>2?a[2]:r;for(y=e.length>3&&typeof y=="function"?(f--,y):r,E&&ir(a[0],a[1],E)&&(y=f<3?r:y,f=1),i=ut(i);++u<f;){var C=a[u];C&&e(i,C,u,y)}return i})}function gh(e,i){return function(a,u){if(a==null)return a;if(!fr(a))return e(a,u);for(var f=a.length,y=i?f:-1,E=ut(a);(i?y--:++y<f)&&u(E[y],y,E)!==!1;);return a}}function vh(e){return function(i,a,u){for(var f=-1,y=ut(i),E=u(i),C=E.length;C--;){var U=E[e?C:++f];if(a(y[U],U,y)===!1)break}return i}}function Qg(e,i,a){var u=i&J,f=kn(e);function y(){var E=this&&this!==Xe&&this instanceof y?f:e;return E.apply(u?a:this,arguments)}return y}function yh(e){return function(i){i=it(i);var a=hn(i)?jr(i):r,u=a?a[0]:i.charAt(0),f=a?Di(a,1).join(""):i.slice(1);return u[e]()+f}}function _n(e){return function(i){return co(gl(dl(i).replace(Tn,"")),e,"")}}function kn(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=vn(e.prototype),u=e.apply(a,i);return bt(u)?u:a}}function e0(e,i,a){var u=kn(e);function f(){for(var y=arguments.length,E=H(y),C=y,U=bn(f);C--;)E[C]=arguments[C];var Y=y<3&&E[0]!==U&&E[y-1]!==U?[]:_i(E,U);if(y-=Y.length,y<a)return Eh(e,i,ia,f.placeholder,r,E,Y,r,r,a-y);var X=this&&this!==Xe&&this instanceof f?u:e;return Kt(X,this,E)}return f}function _h(e){return function(i,a,u){var f=ut(i);if(!fr(i)){var y=be(a,3);i=kt(i),a=function(C){return y(f[C],C,f)}}var E=e(i,a,u);return E>-1?f[y?i[E]:E]:r}}function bh(e){return ci(function(i){var a=i.length,u=a,f=Ar.prototype.thru;for(e&&i.reverse();u--;){var y=i[u];if(typeof y!="function")throw new Or(d);if(f&&!E&&oa(y)=="wrapper")var E=new Ar([],!0)}for(u=E?u:a;++u<a;){y=i[u];var C=oa(y),U=C=="wrapper"?Bo(y):r;U&&Go(U[0])&&U[1]==(c|R|x|_)&&!U[4].length&&U[9]==1?E=E[oa(U[0])].apply(E,U[3]):E=y.length==1&&Go(y)?E[C]():E.thru(y)}return function(){var Y=arguments,X=Y[0];if(E&&Y.length==1&&Te(X))return E.plant(X).value();for(var Q=0,oe=a?i[Q].apply(this,Y):X;++Q<a;)oe=i[Q].call(this,oe);return oe}})}function ia(e,i,a,u,f,y,E,C,U,Y){var X=i&c,Q=i&J,oe=i&se,ve=i&(R|D),we=i&K,qe=oe?r:kn(e);function Ee(){for(var Ge=arguments.length,Ze=H(Ge),wr=Ge;wr--;)Ze[wr]=arguments[wr];if(ve)var nr=bn(Ee),Er=fd(Ze,nr);if(u&&(Ze=ph(Ze,u,f,ve)),y&&(Ze=dh(Ze,y,E,ve)),Ge-=Er,ve&&Ge<Y){var Nt=_i(Ze,nr);return Eh(e,i,ia,Ee.placeholder,a,Ze,Nt,C,U,Y-Ge)}var Hr=Q?a:this,fi=oe?Hr[e]:e;return Ge=Ze.length,C?Ze=m0(Ze,C):we&&Ge>1&&Ze.reverse(),X&&U<Ge&&(Ze.length=U),this&&this!==Xe&&this instanceof Ee&&(fi=qe||kn(fi)),fi.apply(Hr,Ze)}return Ee}function mh(e,i){return function(a,u){return Og(a,e,i(u),{})}}function na(e,i){return function(a,u){var f;if(a===r&&u===r)return i;if(a!==r&&(f=a),u!==r){if(f===r)return u;typeof a=="string"||typeof u=="string"?(a=br(a),u=br(u)):(a=sh(a),u=sh(u)),f=e(a,u)}return f}}function jo(e){return ci(function(i){return i=yt(i,_r(be())),Ke(function(a){var u=this;return e(i,function(f){return Kt(f,u,a)})})})}function sa(e,i){i=i===r?" ":br(i);var a=i.length;if(a<2)return a?To(i,e):i;var u=To(i,ks(e/ln(i)));return hn(i)?Di(jr(u),0,e).join(""):u.slice(0,e)}function t0(e,i,a,u){var f=i&J,y=kn(e);function E(){for(var C=-1,U=arguments.length,Y=-1,X=u.length,Q=H(X+U),oe=this&&this!==Xe&&this instanceof E?y:e;++Y<X;)Q[Y]=u[Y];for(;U--;)Q[Y++]=arguments[++C];return Kt(oe,f?a:this,Q)}return E}function wh(e){return function(i,a,u){return u&&typeof u!="number"&&ir(i,a,u)&&(a=u=r),i=li(i),a===r?(a=i,i=0):a=li(a),u=u===r?i<a?1:-1:li(u),zg(i,a,u,e)}}function aa(e){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=Rr(i),a=Rr(a)),e(i,a)}}function Eh(e,i,a,u,f,y,E,C,U,Y){var X=i&R,Q=X?E:r,oe=X?r:E,ve=X?y:r,we=X?r:y;i|=X?x:b,i&=~(X?b:x),i&O||(i&=~(J|se));var qe=[e,i,f,ve,Q,we,oe,C,U,Y],Ee=a.apply(r,qe);return Go(e)&&Uh(Ee,qe),Ee.placeholder=u,Fh(Ee,e,i)}function zo(e){var i=Ht[e];return function(a,u){if(a=Rr(a),u=u==null?0:Jt(Me(u),292),u&&Fu(a)){var f=(it(a)+"e").split("e"),y=i(f[0]+"e"+(+f[1]+u));return f=(it(y)+"e").split("e"),+(f[0]+"e"+(+f[1]-u))}return i(a)}}var r0=dn&&1/Fs(new dn([,-0]))[1]==te?function(e){return new dn(e)}:cc;function Dh(e){return function(i){var a=Xt(i);return a==Se?vo(i):a==Ie?bd(i):ld(i,e(i))}}function oi(e,i,a,u,f,y,E,C){var U=i&se;if(!U&&typeof e!="function")throw new Or(d);var Y=u?u.length:0;if(Y||(i&=~(x|b),u=f=r),E=E===r?E:Bt(Me(E),0),C=C===r?C:Me(C),Y-=f?f.length:0,i&b){var X=u,Q=f;u=f=r}var oe=U?r:Bo(e),ve=[e,i,a,u,f,X,Q,y,E,C];if(oe&&y0(ve,oe),e=ve[0],i=ve[1],a=ve[2],u=ve[3],f=ve[4],C=ve[9]=ve[9]===r?U?0:e.length:Bt(ve[9]-Y,0),!C&&i&(R|D)&&(i&=~(R|D)),!i||i==J)var we=Qg(e,i,a);else i==R||i==D?we=e0(e,i,C):(i==x||i==(J|x))&&!f.length?we=t0(e,i,a,u):we=ia.apply(r,ve);var qe=oe?ih:Uh;return Fh(qe(we,ve),e,i)}function Sh(e,i,a,u){return e===r||qr(e,pn[a])&&!nt.call(u,a)?i:e}function Ih(e,i,a,u,f,y){return bt(e)&&bt(i)&&(y.set(i,e),Qs(e,i,r,Ih,y),y.delete(i)),e}function i0(e){return Wn(e)?r:e}function xh(e,i,a,u,f,y){var E=a&M,C=e.length,U=i.length;if(C!=U&&!(E&&U>C))return!1;var Y=y.get(e),X=y.get(i);if(Y&&X)return Y==i&&X==e;var Q=-1,oe=!0,ve=a&B?new zi:r;for(y.set(e,i),y.set(i,e);++Q<C;){var we=e[Q],qe=i[Q];if(u)var Ee=E?u(qe,we,Q,i,e,y):u(we,qe,Q,e,i,y);if(Ee!==r){if(Ee)continue;oe=!1;break}if(ve){if(!uo(i,function(Ge,Ze){if(!Un(ve,Ze)&&(we===Ge||f(we,Ge,a,u,y)))return ve.push(Ze)})){oe=!1;break}}else if(!(we===qe||f(we,qe,a,u,y))){oe=!1;break}}return y.delete(e),y.delete(i),oe}function n0(e,i,a,u,f,y,E){switch(a){case Ae:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case De:return!(e.byteLength!=i.byteLength||!y(new qs(e),new qs(i)));case L:case A:case He:return qr(+e,+i);case I:return e.name==i.name&&e.message==i.message;case je:case Re:return e==i+"";case Se:var C=vo;case Ie:var U=u&M;if(C||(C=Fs),e.size!=i.size&&!U)return!1;var Y=E.get(e);if(Y)return Y==i;u|=B,E.set(e,i);var X=xh(C(e),C(i),u,f,y,E);return E.delete(e),X;case Ue:if(jn)return jn.call(e)==jn.call(i)}return!1}function s0(e,i,a,u,f,y){var E=a&M,C=qo(e),U=C.length,Y=qo(i),X=Y.length;if(U!=X&&!E)return!1;for(var Q=U;Q--;){var oe=C[Q];if(!(E?oe in i:nt.call(i,oe)))return!1}var ve=y.get(e),we=y.get(i);if(ve&&we)return ve==i&&we==e;var qe=!0;y.set(e,i),y.set(i,e);for(var Ee=E;++Q<U;){oe=C[Q];var Ge=e[oe],Ze=i[oe];if(u)var wr=E?u(Ze,Ge,oe,i,e,y):u(Ge,Ze,oe,e,i,y);if(!(wr===r?Ge===Ze||f(Ge,Ze,a,u,y):wr)){qe=!1;break}Ee||(Ee=oe=="constructor")}if(qe&&!Ee){var nr=e.constructor,Er=i.constructor;nr!=Er&&"constructor"in e&&"constructor"in i&&!(typeof nr=="function"&&nr instanceof nr&&typeof Er=="function"&&Er instanceof Er)&&(qe=!1)}return y.delete(e),y.delete(i),qe}function ci(e){return Yo(Th(e,r,qh),e+"")}function qo(e){return Vu(e,kt,ko)}function Ho(e){return Vu(e,pr,Ch)}var Bo=Gs?function(e){return Gs.get(e)}:cc;function oa(e){for(var i=e.name+"",a=gn[i],u=nt.call(gn,i)?a.length:0;u--;){var f=a[u],y=f.func;if(y==null||y==e)return f.name}return i}function bn(e){var i=nt.call(v,"placeholder")?v:e;return i.placeholder}function be(){var e=v.iteratee||ac;return e=e===ac?Yu:e,arguments.length?e(arguments[0],arguments[1]):e}function ca(e,i){var a=e.__data__;return p0(i)?a[typeof i=="string"?"string":"hash"]:a.map}function Ko(e){for(var i=kt(e),a=i.length;a--;){var u=i[a],f=e[u];i[a]=[u,f,Ph(f)]}return i}function Bi(e,i){var a=vd(e,i);return Wu(a)?a:r}function a0(e){var i=nt.call(e,Mi),a=e[Mi];try{e[Mi]=r;var u=!0}catch{}var f=js.call(e);return u&&(i?e[Mi]=a:delete e[Mi]),f}var ko=_o?function(e){return e==null?[]:(e=ut(e),vi(_o(e),function(i){return Ru.call(e,i)}))}:uc,Ch=_o?function(e){for(var i=[];e;)yi(i,ko(e)),e=Hs(e);return i}:uc,Xt=rr;(bo&&Xt(new bo(new ArrayBuffer(1)))!=Ae||$n&&Xt(new $n)!=Se||mo&&Xt(mo.resolve())!=pt||dn&&Xt(new dn)!=Ie||Ln&&Xt(new Ln)!=Oe)&&(Xt=function(e){var i=rr(e),a=i==Le?e.constructor:r,u=a?Ki(a):"";if(u)switch(u){case Hd:return Ae;case Bd:return Se;case Kd:return pt;case kd:return Ie;case Vd:return Oe}return i});function o0(e,i,a){for(var u=-1,f=a.length;++u<f;){var y=a[u],E=y.size;switch(y.type){case"drop":e+=E;break;case"dropRight":i-=E;break;case"take":i=Jt(i,e+E);break;case"takeRight":e=Bt(e,i-E);break}}return{start:e,end:i}}function c0(e){var i=e.match(ht);return i?i[1].split(Lt):[]}function Oh(e,i,a){i=Ei(i,e);for(var u=-1,f=i.length,y=!1;++u<f;){var E=Jr(i[u]);if(!(y=e!=null&&a(e,E)))break;e=e[E]}return y||++u!=f?y:(f=e==null?0:e.length,!!f&&ga(f)&&ui(E,f)&&(Te(e)||ki(e)))}function u0(e){var i=e.length,a=new e.constructor(i);return i&&typeof e[0]=="string"&&nt.call(e,"index")&&(a.index=e.index,a.input=e.input),a}function Ah(e){return typeof e.constructor=="function"&&!Vn(e)?vn(Hs(e)):{}}function h0(e,i,a){var u=e.constructor;switch(i){case De:return Mo(e);case L:case A:return new u(+e);case Ae:return Gg(e,a);case Be:case Ce:case Ve:case We:case et:case tt:case Je:case Qt:case ur:return lh(e,a);case Se:return new u;case He:case Re:return new u(e);case je:return Wg(e);case Ie:return new u;case Ue:return Yg(e)}}function l0(e,i){var a=i.length;if(!a)return e;var u=a-1;return i[u]=(a>1?"& ":"")+i[u],i=i.join(a>2?", ":" "),e.replace(It,`{
/* [wrapped with `+i+`] */
`)}function f0(e){return Te(e)||ki(e)||!!(Uu&&e&&e[Uu])}function ui(e,i){var a=typeof e;return i=i!=null?i:G,!!i&&(a=="number"||a!="symbol"&&Ga.test(e))&&e>-1&&e%1==0&&e<i}function ir(e,i,a){if(!bt(a))return!1;var u=typeof i;return(u=="number"?fr(a)&&ui(i,a.length):u=="string"&&i in a)?qr(a[i],e):!1}function Vo(e,i){if(Te(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||mr(e)?!0:Ut.test(e)||!vt.test(e)||i!=null&&e in ut(i)}function p0(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function Go(e){var i=oa(e),a=v[i];if(typeof a!="function"||!(i in Ye.prototype))return!1;if(e===a)return!0;var u=Bo(a);return!!u&&e===u[0]}function d0(e){return!!Pu&&Pu in e}var g0=Ls?hi:hc;function Vn(e){var i=e&&e.constructor,a=typeof i=="function"&&i.prototype||pn;return e===a}function Ph(e){return e===e&&!bt(e)}function Nh(e,i){return function(a){return a==null?!1:a[e]===i&&(i!==r||e in ut(a))}}function v0(e){var i=pa(e,function(u){return a.size===w&&a.clear(),u}),a=i.cache;return i}function y0(e,i){var a=e[1],u=i[1],f=a|u,y=f<(J|se|c),E=u==c&&a==R||u==c&&a==_&&e[7].length<=i[8]||u==(c|_)&&i[7].length<=i[8]&&a==R;if(!(y||E))return e;u&J&&(e[2]=i[2],f|=a&J?0:O);var C=i[3];if(C){var U=e[3];e[3]=U?ph(U,C,i[4]):C,e[4]=U?_i(e[3],S):i[4]}return C=i[5],C&&(U=e[5],e[5]=U?dh(U,C,i[6]):C,e[6]=U?_i(e[5],S):i[6]),C=i[7],C&&(e[7]=C),u&c&&(e[8]=e[8]==null?i[8]:Jt(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=f,e}function _0(e){var i=[];if(e!=null)for(var a in ut(e))i.push(a);return i}function b0(e){return js.call(e)}function Th(e,i,a){return i=Bt(i===r?e.length-1:i,0),function(){for(var u=arguments,f=-1,y=Bt(u.length-i,0),E=H(y);++f<y;)E[f]=u[i+f];f=-1;for(var C=H(i+1);++f<i;)C[f]=u[f];return C[i]=a(E),Kt(e,this,C)}}function Rh(e,i){return i.length<2?e:Hi(e,Nr(i,0,-1))}function m0(e,i){for(var a=e.length,u=Jt(i.length,a),f=lr(e);u--;){var y=i[u];e[u]=ui(y,a)?f[y]:r}return e}function Wo(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var Uh=$h(ih),Gn=Fd||function(e,i){return Xe.setTimeout(e,i)},Yo=$h(Bg);function Fh(e,i,a){var u=i+"";return Yo(e,l0(u,w0(c0(u),a)))}function $h(e){var i=0,a=0;return function(){var u=jd(),f=ge-(u-a);if(a=u,f>0){if(++i>=ce)return arguments[0]}else i=0;return e.apply(r,arguments)}}function ua(e,i){var a=-1,u=e.length,f=u-1;for(i=i===r?u:i;++a<i;){var y=No(a,f),E=e[y];e[y]=e[a],e[a]=E}return e.length=i,e}var Lh=v0(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(Ft,function(a,u,f,y){i.push(f?y.replace(qa,"$1"):u||a)}),i});function Jr(e){if(typeof e=="string"||mr(e))return e;var i=e+"";return i=="0"&&1/e==-te?"-0":i}function Ki(e){if(e!=null){try{return Ms.call(e)}catch{}try{return e+""}catch{}}return""}function w0(e,i){return Cr(me,function(a){var u="_."+a[0];i&a[1]&&!Rs(e,u)&&e.push(u)}),e.sort()}function Mh(e){if(e instanceof Ye)return e.clone();var i=new Ar(e.__wrapped__,e.__chain__);return i.__actions__=lr(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function E0(e,i,a){(a?ir(e,i,a):i===r)?i=1:i=Bt(Me(i),0);var u=e==null?0:e.length;if(!u||i<1)return[];for(var f=0,y=0,E=H(ks(u/i));f<u;)E[y++]=Nr(e,f,f+=i);return E}function D0(e){for(var i=-1,a=e==null?0:e.length,u=0,f=[];++i<a;){var y=e[i];y&&(f[u++]=y)}return f}function S0(){var e=arguments.length;if(!e)return[];for(var i=H(e-1),a=arguments[0],u=e;u--;)i[u-1]=arguments[u];return yi(Te(a)?lr(a):[a],Gt(i,1))}var I0=Ke(function(e,i){return Pt(e)?qn(e,Gt(i,1,Pt,!0)):[]}),x0=Ke(function(e,i){var a=Tr(i);return Pt(a)&&(a=r),Pt(e)?qn(e,Gt(i,1,Pt,!0),be(a,2)):[]}),C0=Ke(function(e,i){var a=Tr(i);return Pt(a)&&(a=r),Pt(e)?qn(e,Gt(i,1,Pt,!0),r,a):[]});function O0(e,i,a){var u=e==null?0:e.length;return u?(i=a||i===r?1:Me(i),Nr(e,i<0?0:i,u)):[]}function A0(e,i,a){var u=e==null?0:e.length;return u?(i=a||i===r?1:Me(i),i=u-i,Nr(e,0,i<0?0:i)):[]}function P0(e,i){return e&&e.length?ta(e,be(i,3),!0,!0):[]}function N0(e,i){return e&&e.length?ta(e,be(i,3),!0):[]}function T0(e,i,a,u){var f=e==null?0:e.length;return f?(a&&typeof a!="number"&&ir(e,i,a)&&(a=0,u=f),Sg(e,i,a,u)):[]}function jh(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var f=a==null?0:Me(a);return f<0&&(f=Bt(u+f,0)),Us(e,be(i,3),f)}function zh(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var f=u-1;return a!==r&&(f=Me(a),f=a<0?Bt(u+f,0):Jt(f,u-1)),Us(e,be(i,3),f,!0)}function qh(e){var i=e==null?0:e.length;return i?Gt(e,1):[]}function R0(e){var i=e==null?0:e.length;return i?Gt(e,te):[]}function U0(e,i){var a=e==null?0:e.length;return a?(i=i===r?1:Me(i),Gt(e,i)):[]}function F0(e){for(var i=-1,a=e==null?0:e.length,u={};++i<a;){var f=e[i];u[f[0]]=f[1]}return u}function Hh(e){return e&&e.length?e[0]:r}function $0(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var f=a==null?0:Me(a);return f<0&&(f=Bt(u+f,0)),un(e,i,f)}function L0(e){var i=e==null?0:e.length;return i?Nr(e,0,-1):[]}var M0=Ke(function(e){var i=yt(e,$o);return i.length&&i[0]===e[0]?xo(i):[]}),j0=Ke(function(e){var i=Tr(e),a=yt(e,$o);return i===Tr(a)?i=r:a.pop(),a.length&&a[0]===e[0]?xo(a,be(i,2)):[]}),z0=Ke(function(e){var i=Tr(e),a=yt(e,$o);return i=typeof i=="function"?i:r,i&&a.pop(),a.length&&a[0]===e[0]?xo(a,r,i):[]});function q0(e,i){return e==null?"":Ld.call(e,i)}function Tr(e){var i=e==null?0:e.length;return i?e[i-1]:r}function H0(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var f=u;return a!==r&&(f=Me(a),f=f<0?Bt(u+f,0):Jt(f,u-1)),i===i?wd(e,i,f):Us(e,Eu,f,!0)}function B0(e,i){return e&&e.length?Qu(e,Me(i)):r}var K0=Ke(Bh);function Bh(e,i){return e&&e.length&&i&&i.length?Po(e,i):e}function k0(e,i,a){return e&&e.length&&i&&i.length?Po(e,i,be(a,2)):e}function V0(e,i,a){return e&&e.length&&i&&i.length?Po(e,i,r,a):e}var G0=ci(function(e,i){var a=e==null?0:e.length,u=Eo(e,i);return rh(e,yt(i,function(f){return ui(f,a)?+f:f}).sort(fh)),u});function W0(e,i){var a=[];if(!(e&&e.length))return a;var u=-1,f=[],y=e.length;for(i=be(i,3);++u<y;){var E=e[u];i(E,u,e)&&(a.push(E),f.push(u))}return rh(e,f),a}function Jo(e){return e==null?e:qd.call(e)}function Y0(e,i,a){var u=e==null?0:e.length;return u?(a&&typeof a!="number"&&ir(e,i,a)?(i=0,a=u):(i=i==null?0:Me(i),a=a===r?u:Me(a)),Nr(e,i,a)):[]}function J0(e,i){return ea(e,i)}function X0(e,i,a){return Ro(e,i,be(a,2))}function Z0(e,i){var a=e==null?0:e.length;if(a){var u=ea(e,i);if(u<a&&qr(e[u],i))return u}return-1}function Q0(e,i){return ea(e,i,!0)}function e1(e,i,a){return Ro(e,i,be(a,2),!0)}function t1(e,i){var a=e==null?0:e.length;if(a){var u=ea(e,i,!0)-1;if(qr(e[u],i))return u}return-1}function r1(e){return e&&e.length?nh(e):[]}function i1(e,i){return e&&e.length?nh(e,be(i,2)):[]}function n1(e){var i=e==null?0:e.length;return i?Nr(e,1,i):[]}function s1(e,i,a){return e&&e.length?(i=a||i===r?1:Me(i),Nr(e,0,i<0?0:i)):[]}function a1(e,i,a){var u=e==null?0:e.length;return u?(i=a||i===r?1:Me(i),i=u-i,Nr(e,i<0?0:i,u)):[]}function o1(e,i){return e&&e.length?ta(e,be(i,3),!1,!0):[]}function c1(e,i){return e&&e.length?ta(e,be(i,3)):[]}var u1=Ke(function(e){return wi(Gt(e,1,Pt,!0))}),h1=Ke(function(e){var i=Tr(e);return Pt(i)&&(i=r),wi(Gt(e,1,Pt,!0),be(i,2))}),l1=Ke(function(e){var i=Tr(e);return i=typeof i=="function"?i:r,wi(Gt(e,1,Pt,!0),r,i)});function f1(e){return e&&e.length?wi(e):[]}function p1(e,i){return e&&e.length?wi(e,be(i,2)):[]}function d1(e,i){return i=typeof i=="function"?i:r,e&&e.length?wi(e,r,i):[]}function Xo(e){if(!(e&&e.length))return[];var i=0;return e=vi(e,function(a){if(Pt(a))return i=Bt(a.length,i),!0}),po(i,function(a){return yt(e,ho(a))})}function Kh(e,i){if(!(e&&e.length))return[];var a=Xo(e);return i==null?a:yt(a,function(u){return Kt(i,r,u)})}var g1=Ke(function(e,i){return Pt(e)?qn(e,i):[]}),v1=Ke(function(e){return Fo(vi(e,Pt))}),y1=Ke(function(e){var i=Tr(e);return Pt(i)&&(i=r),Fo(vi(e,Pt),be(i,2))}),_1=Ke(function(e){var i=Tr(e);return i=typeof i=="function"?i:r,Fo(vi(e,Pt),r,i)}),b1=Ke(Xo);function m1(e,i){return ch(e||[],i||[],zn)}function w1(e,i){return ch(e||[],i||[],Kn)}var E1=Ke(function(e){var i=e.length,a=i>1?e[i-1]:r;return a=typeof a=="function"?(e.pop(),a):r,Kh(e,a)});function kh(e){var i=v(e);return i.__chain__=!0,i}function D1(e,i){return i(e),e}function ha(e,i){return i(e)}var S1=ci(function(e){var i=e.length,a=i?e[0]:0,u=this.__wrapped__,f=function(y){return Eo(y,e)};return i>1||this.__actions__.length||!(u instanceof Ye)||!ui(a)?this.thru(f):(u=u.slice(a,+a+(i?1:0)),u.__actions__.push({func:ha,args:[f],thisArg:r}),new Ar(u,this.__chain__).thru(function(y){return i&&!y.length&&y.push(r),y}))});function I1(){return kh(this)}function x1(){return new Ar(this.value(),this.__chain__)}function C1(){this.__values__===r&&(this.__values__=sl(this.value()));var e=this.__index__>=this.__values__.length,i=e?r:this.__values__[this.__index__++];return{done:e,value:i}}function O1(){return this}function A1(e){for(var i,a=this;a instanceof Ys;){var u=Mh(a);u.__index__=0,u.__values__=r,i?f.__wrapped__=u:i=u;var f=u;a=a.__wrapped__}return f.__wrapped__=e,i}function P1(){var e=this.__wrapped__;if(e instanceof Ye){var i=e;return this.__actions__.length&&(i=new Ye(this)),i=i.reverse(),i.__actions__.push({func:ha,args:[Jo],thisArg:r}),new Ar(i,this.__chain__)}return this.thru(Jo)}function N1(){return oh(this.__wrapped__,this.__actions__)}var T1=ra(function(e,i,a){nt.call(e,a)?++e[a]:ai(e,a,1)});function R1(e,i,a){var u=Te(e)?mu:Dg;return a&&ir(e,i,a)&&(i=r),u(e,be(i,3))}function U1(e,i){var a=Te(e)?vi:Ku;return a(e,be(i,3))}var F1=_h(jh),$1=_h(zh);function L1(e,i){return Gt(la(e,i),1)}function M1(e,i){return Gt(la(e,i),te)}function j1(e,i,a){return a=a===r?1:Me(a),Gt(la(e,i),a)}function Vh(e,i){var a=Te(e)?Cr:mi;return a(e,be(i,3))}function Gh(e,i){var a=Te(e)?nd:Bu;return a(e,be(i,3))}var z1=ra(function(e,i,a){nt.call(e,a)?e[a].push(i):ai(e,a,[i])});function q1(e,i,a,u){e=fr(e)?e:wn(e),a=a&&!u?Me(a):0;var f=e.length;return a<0&&(a=Bt(f+a,0)),va(e)?a<=f&&e.indexOf(i,a)>-1:!!f&&un(e,i,a)>-1}var H1=Ke(function(e,i,a){var u=-1,f=typeof i=="function",y=fr(e)?H(e.length):[];return mi(e,function(E){y[++u]=f?Kt(i,E,a):Hn(E,i,a)}),y}),B1=ra(function(e,i,a){ai(e,a,i)});function la(e,i){var a=Te(e)?yt:Ju;return a(e,be(i,3))}function K1(e,i,a,u){return e==null?[]:(Te(i)||(i=i==null?[]:[i]),a=u?r:a,Te(a)||(a=a==null?[]:[a]),eh(e,i,a))}var k1=ra(function(e,i,a){e[a?0:1].push(i)},function(){return[[],[]]});function V1(e,i,a){var u=Te(e)?co:Su,f=arguments.length<3;return u(e,be(i,4),a,f,mi)}function G1(e,i,a){var u=Te(e)?sd:Su,f=arguments.length<3;return u(e,be(i,4),a,f,Bu)}function W1(e,i){var a=Te(e)?vi:Ku;return a(e,da(be(i,3)))}function Y1(e){var i=Te(e)?ju:qg;return i(e)}function J1(e,i,a){(a?ir(e,i,a):i===r)?i=1:i=Me(i);var u=Te(e)?_g:Hg;return u(e,i)}function X1(e){var i=Te(e)?bg:Kg;return i(e)}function Z1(e){if(e==null)return 0;if(fr(e))return va(e)?ln(e):e.length;var i=Xt(e);return i==Se||i==Ie?e.size:Oo(e).length}function Q1(e,i,a){var u=Te(e)?uo:kg;return a&&ir(e,i,a)&&(i=r),u(e,be(i,3))}var ev=Ke(function(e,i){if(e==null)return[];var a=i.length;return a>1&&ir(e,i[0],i[1])?i=[]:a>2&&ir(i[0],i[1],i[2])&&(i=[i[0]]),eh(e,Gt(i,1),[])}),fa=Ud||function(){return Xe.Date.now()};function tv(e,i){if(typeof i!="function")throw new Or(d);return e=Me(e),function(){if(--e<1)return i.apply(this,arguments)}}function Wh(e,i,a){return i=a?r:i,i=e&&i==null?e.length:i,oi(e,c,r,r,r,r,i)}function Yh(e,i){var a;if(typeof i!="function")throw new Or(d);return e=Me(e),function(){return--e>0&&(a=i.apply(this,arguments)),e<=1&&(i=r),a}}var Zo=Ke(function(e,i,a){var u=J;if(a.length){var f=_i(a,bn(Zo));u|=x}return oi(e,u,i,a,f)}),Jh=Ke(function(e,i,a){var u=J|se;if(a.length){var f=_i(a,bn(Jh));u|=x}return oi(i,u,e,a,f)});function Xh(e,i,a){i=a?r:i;var u=oi(e,R,r,r,r,r,r,i);return u.placeholder=Xh.placeholder,u}function Zh(e,i,a){i=a?r:i;var u=oi(e,D,r,r,r,r,r,i);return u.placeholder=Zh.placeholder,u}function Qh(e,i,a){var u,f,y,E,C,U,Y=0,X=!1,Q=!1,oe=!0;if(typeof e!="function")throw new Or(d);i=Rr(i)||0,bt(a)&&(X=!!a.leading,Q="maxWait"in a,y=Q?Bt(Rr(a.maxWait)||0,i):y,oe="trailing"in a?!!a.trailing:oe);function ve(Nt){var Hr=u,fi=f;return u=f=r,Y=Nt,E=e.apply(fi,Hr),E}function we(Nt){return Y=Nt,C=Gn(Ge,i),X?ve(Nt):E}function qe(Nt){var Hr=Nt-U,fi=Nt-Y,_l=i-Hr;return Q?Jt(_l,y-fi):_l}function Ee(Nt){var Hr=Nt-U,fi=Nt-Y;return U===r||Hr>=i||Hr<0||Q&&fi>=y}function Ge(){var Nt=fa();if(Ee(Nt))return Ze(Nt);C=Gn(Ge,qe(Nt))}function Ze(Nt){return C=r,oe&&u?ve(Nt):(u=f=r,E)}function wr(){C!==r&&uh(C),Y=0,u=U=f=C=r}function nr(){return C===r?E:Ze(fa())}function Er(){var Nt=fa(),Hr=Ee(Nt);if(u=arguments,f=this,U=Nt,Hr){if(C===r)return we(U);if(Q)return uh(C),C=Gn(Ge,i),ve(U)}return C===r&&(C=Gn(Ge,i)),E}return Er.cancel=wr,Er.flush=nr,Er}var rv=Ke(function(e,i){return Hu(e,1,i)}),iv=Ke(function(e,i,a){return Hu(e,Rr(i)||0,a)});function nv(e){return oi(e,K)}function pa(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new Or(d);var a=function(){var u=arguments,f=i?i.apply(this,u):u[0],y=a.cache;if(y.has(f))return y.get(f);var E=e.apply(this,u);return a.cache=y.set(f,E)||y,E};return a.cache=new(pa.Cache||si),a}pa.Cache=si;function da(e){if(typeof e!="function")throw new Or(d);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function sv(e){return Yh(2,e)}var av=Vg(function(e,i){i=i.length==1&&Te(i[0])?yt(i[0],_r(be())):yt(Gt(i,1),_r(be()));var a=i.length;return Ke(function(u){for(var f=-1,y=Jt(u.length,a);++f<y;)u[f]=i[f].call(this,u[f]);return Kt(e,this,u)})}),Qo=Ke(function(e,i){var a=_i(i,bn(Qo));return oi(e,x,r,i,a)}),el=Ke(function(e,i){var a=_i(i,bn(el));return oi(e,b,r,i,a)}),ov=ci(function(e,i){return oi(e,_,r,r,r,i)});function cv(e,i){if(typeof e!="function")throw new Or(d);return i=i===r?i:Me(i),Ke(e,i)}function uv(e,i){if(typeof e!="function")throw new Or(d);return i=i==null?0:Bt(Me(i),0),Ke(function(a){var u=a[i],f=Di(a,0,i);return u&&yi(f,u),Kt(e,this,f)})}function hv(e,i,a){var u=!0,f=!0;if(typeof e!="function")throw new Or(d);return bt(a)&&(u="leading"in a?!!a.leading:u,f="trailing"in a?!!a.trailing:f),Qh(e,i,{leading:u,maxWait:i,trailing:f})}function lv(e){return Wh(e,1)}function fv(e,i){return Qo(Lo(i),e)}function pv(){if(!arguments.length)return[];var e=arguments[0];return Te(e)?e:[e]}function dv(e){return Pr(e,F)}function gv(e,i){return i=typeof i=="function"?i:r,Pr(e,F,i)}function vv(e){return Pr(e,$|F)}function yv(e,i){return i=typeof i=="function"?i:r,Pr(e,$|F,i)}function _v(e,i){return i==null||qu(e,i,kt(i))}function qr(e,i){return e===i||e!==e&&i!==i}var bv=aa(Io),mv=aa(function(e,i){return e>=i}),ki=Gu(function(){return arguments}())?Gu:function(e){return xt(e)&&nt.call(e,"callee")&&!Ru.call(e,"callee")},Te=H.isArray,wv=tr?_r(tr):Ag;function fr(e){return e!=null&&ga(e.length)&&!hi(e)}function Pt(e){return xt(e)&&fr(e)}function Ev(e){return e===!0||e===!1||xt(e)&&rr(e)==L}var Si=$d||hc,Dv=Mr?_r(Mr):Pg;function Sv(e){return xt(e)&&e.nodeType===1&&!Wn(e)}function Iv(e){if(e==null)return!0;if(fr(e)&&(Te(e)||typeof e=="string"||typeof e.splice=="function"||Si(e)||mn(e)||ki(e)))return!e.length;var i=Xt(e);if(i==Se||i==Ie)return!e.size;if(Vn(e))return!Oo(e).length;for(var a in e)if(nt.call(e,a))return!1;return!0}function xv(e,i){return Bn(e,i)}function Cv(e,i,a){a=typeof a=="function"?a:r;var u=a?a(e,i):r;return u===r?Bn(e,i,r,a):!!u}function ec(e){if(!xt(e))return!1;var i=rr(e);return i==I||i==h||typeof e.message=="string"&&typeof e.name=="string"&&!Wn(e)}function Ov(e){return typeof e=="number"&&Fu(e)}function hi(e){if(!bt(e))return!1;var i=rr(e);return i==ne||i==fe||i==j||i==dt}function tl(e){return typeof e=="number"&&e==Me(e)}function ga(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=G}function bt(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function xt(e){return e!=null&&typeof e=="object"}var rl=xr?_r(xr):Tg;function Av(e,i){return e===i||Co(e,i,Ko(i))}function Pv(e,i,a){return a=typeof a=="function"?a:r,Co(e,i,Ko(i),a)}function Nv(e){return il(e)&&e!=+e}function Tv(e){if(g0(e))throw new Pe(l);return Wu(e)}function Rv(e){return e===null}function Uv(e){return e==null}function il(e){return typeof e=="number"||xt(e)&&rr(e)==He}function Wn(e){if(!xt(e)||rr(e)!=Le)return!1;var i=Hs(e);if(i===null)return!0;var a=nt.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&Ms.call(a)==Pd}var tc=Gr?_r(Gr):Rg;function Fv(e){return tl(e)&&e>=-G&&e<=G}var nl=Rn?_r(Rn):Ug;function va(e){return typeof e=="string"||!Te(e)&&xt(e)&&rr(e)==Re}function mr(e){return typeof e=="symbol"||xt(e)&&rr(e)==Ue}var mn=Li?_r(Li):Fg;function $v(e){return e===r}function Lv(e){return xt(e)&&Xt(e)==Oe}function Mv(e){return xt(e)&&rr(e)==Fe}var jv=aa(Ao),zv=aa(function(e,i){return e<=i});function sl(e){if(!e)return[];if(fr(e))return va(e)?jr(e):lr(e);if(Fn&&e[Fn])return _d(e[Fn]());var i=Xt(e),a=i==Se?vo:i==Ie?Fs:wn;return a(e)}function li(e){if(!e)return e===0?e:0;if(e=Rr(e),e===te||e===-te){var i=e<0?-1:1;return i*ee}return e===e?e:0}function Me(e){var i=li(e),a=i%1;return i===i?a?i-a:i:0}function al(e){return e?qi(Me(e),0,re):0}function Rr(e){if(typeof e=="number")return e;if(mr(e))return W;if(bt(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=bt(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=Iu(e);var a=Ka.test(e);return a||Va.test(e)?Ne(e.slice(2),a?2:8):Ba.test(e)?W:+e}function ol(e){return Yr(e,pr(e))}function qv(e){return e?qi(Me(e),-G,G):e===0?e:0}function it(e){return e==null?"":br(e)}var Hv=yn(function(e,i){if(Vn(i)||fr(i)){Yr(i,kt(i),e);return}for(var a in i)nt.call(i,a)&&zn(e,a,i[a])}),cl=yn(function(e,i){Yr(i,pr(i),e)}),ya=yn(function(e,i,a,u){Yr(i,pr(i),e,u)}),Bv=yn(function(e,i,a,u){Yr(i,kt(i),e,u)}),Kv=ci(Eo);function kv(e,i){var a=vn(e);return i==null?a:zu(a,i)}var Vv=Ke(function(e,i){e=ut(e);var a=-1,u=i.length,f=u>2?i[2]:r;for(f&&ir(i[0],i[1],f)&&(u=1);++a<u;)for(var y=i[a],E=pr(y),C=-1,U=E.length;++C<U;){var Y=E[C],X=e[Y];(X===r||qr(X,pn[Y])&&!nt.call(e,Y))&&(e[Y]=y[Y])}return e}),Gv=Ke(function(e){return e.push(r,Ih),Kt(ul,r,e)});function Wv(e,i){return wu(e,be(i,3),Wr)}function Yv(e,i){return wu(e,be(i,3),So)}function Jv(e,i){return e==null?e:Do(e,be(i,3),pr)}function Xv(e,i){return e==null?e:ku(e,be(i,3),pr)}function Zv(e,i){return e&&Wr(e,be(i,3))}function Qv(e,i){return e&&So(e,be(i,3))}function ey(e){return e==null?[]:Zs(e,kt(e))}function ty(e){return e==null?[]:Zs(e,pr(e))}function rc(e,i,a){var u=e==null?r:Hi(e,i);return u===r?a:u}function ry(e,i){return e!=null&&Oh(e,i,Ig)}function ic(e,i){return e!=null&&Oh(e,i,xg)}var iy=mh(function(e,i,a){i!=null&&typeof i.toString!="function"&&(i=js.call(i)),e[i]=a},sc(dr)),ny=mh(function(e,i,a){i!=null&&typeof i.toString!="function"&&(i=js.call(i)),nt.call(e,i)?e[i].push(a):e[i]=[a]},be),sy=Ke(Hn);function kt(e){return fr(e)?Mu(e):Oo(e)}function pr(e){return fr(e)?Mu(e,!0):$g(e)}function ay(e,i){var a={};return i=be(i,3),Wr(e,function(u,f,y){ai(a,i(u,f,y),u)}),a}function oy(e,i){var a={};return i=be(i,3),Wr(e,function(u,f,y){ai(a,f,i(u,f,y))}),a}var cy=yn(function(e,i,a){Qs(e,i,a)}),ul=yn(function(e,i,a,u){Qs(e,i,a,u)}),uy=ci(function(e,i){var a={};if(e==null)return a;var u=!1;i=yt(i,function(y){return y=Ei(y,e),u||(u=y.length>1),y}),Yr(e,Ho(e),a),u&&(a=Pr(a,$|z|F,i0));for(var f=i.length;f--;)Uo(a,i[f]);return a});function hy(e,i){return hl(e,da(be(i)))}var ly=ci(function(e,i){return e==null?{}:Mg(e,i)});function hl(e,i){if(e==null)return{};var a=yt(Ho(e),function(u){return[u]});return i=be(i),th(e,a,function(u,f){return i(u,f[0])})}function fy(e,i,a){i=Ei(i,e);var u=-1,f=i.length;for(f||(f=1,e=r);++u<f;){var y=e==null?r:e[Jr(i[u])];y===r&&(u=f,y=a),e=hi(y)?y.call(e):y}return e}function py(e,i,a){return e==null?e:Kn(e,i,a)}function dy(e,i,a,u){return u=typeof u=="function"?u:r,e==null?e:Kn(e,i,a,u)}var ll=Dh(kt),fl=Dh(pr);function gy(e,i,a){var u=Te(e),f=u||Si(e)||mn(e);if(i=be(i,4),a==null){var y=e&&e.constructor;f?a=u?new y:[]:bt(e)?a=hi(y)?vn(Hs(e)):{}:a={}}return(f?Cr:Wr)(e,function(E,C,U){return i(a,E,C,U)}),a}function vy(e,i){return e==null?!0:Uo(e,i)}function yy(e,i,a){return e==null?e:ah(e,i,Lo(a))}function _y(e,i,a,u){return u=typeof u=="function"?u:r,e==null?e:ah(e,i,Lo(a),u)}function wn(e){return e==null?[]:go(e,kt(e))}function by(e){return e==null?[]:go(e,pr(e))}function my(e,i,a){return a===r&&(a=i,i=r),a!==r&&(a=Rr(a),a=a===a?a:0),i!==r&&(i=Rr(i),i=i===i?i:0),qi(Rr(e),i,a)}function wy(e,i,a){return i=li(i),a===r?(a=i,i=0):a=li(a),e=Rr(e),Cg(e,i,a)}function Ey(e,i,a){if(a&&typeof a!="boolean"&&ir(e,i,a)&&(i=a=r),a===r&&(typeof i=="boolean"?(a=i,i=r):typeof e=="boolean"&&(a=e,e=r)),e===r&&i===r?(e=0,i=1):(e=li(e),i===r?(i=e,e=0):i=li(i)),e>i){var u=e;e=i,i=u}if(a||e%1||i%1){var f=$u();return Jt(e+f*(i-e+ot("1e-"+((f+"").length-1))),i)}return No(e,i)}var Dy=_n(function(e,i,a){return i=i.toLowerCase(),e+(a?pl(i):i)});function pl(e){return nc(it(e).toLowerCase())}function dl(e){return e=it(e),e&&e.replace(ri,pd).replace(so,"")}function Sy(e,i,a){e=it(e),i=br(i);var u=e.length;a=a===r?u:qi(Me(a),0,u);var f=a;return a-=i.length,a>=0&&e.slice(a,f)==i}function Iy(e){return e=it(e),e&&gt.test(e)?e.replace(Ti,dd):e}function xy(e){return e=it(e),e&&$t.test(e)?e.replace(Dt,"\\$&"):e}var Cy=_n(function(e,i,a){return e+(a?"-":"")+i.toLowerCase()}),Oy=_n(function(e,i,a){return e+(a?" ":"")+i.toLowerCase()}),Ay=yh("toLowerCase");function Py(e,i,a){e=it(e),i=Me(i);var u=i?ln(e):0;if(!i||u>=i)return e;var f=(i-u)/2;return sa(Vs(f),a)+e+sa(ks(f),a)}function Ny(e,i,a){e=it(e),i=Me(i);var u=i?ln(e):0;return i&&u<i?e+sa(i-u,a):e}function Ty(e,i,a){e=it(e),i=Me(i);var u=i?ln(e):0;return i&&u<i?sa(i-u,a)+e:e}function Ry(e,i,a){return a||i==null?i=0:i&&(i=+i),zd(it(e).replace(St,""),i||0)}function Uy(e,i,a){return(a?ir(e,i,a):i===r)?i=1:i=Me(i),To(it(e),i)}function Fy(){var e=arguments,i=it(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var $y=_n(function(e,i,a){return e+(a?"_":"")+i.toLowerCase()});function Ly(e,i,a){return a&&typeof a!="number"&&ir(e,i,a)&&(i=a=r),a=a===r?re:a>>>0,a?(e=it(e),e&&(typeof i=="string"||i!=null&&!tc(i))&&(i=br(i),!i&&hn(e))?Di(jr(e),0,a):e.split(i,a)):[]}var My=_n(function(e,i,a){return e+(a?" ":"")+nc(i)});function jy(e,i,a){return e=it(e),a=a==null?0:qi(Me(a),0,e.length),i=br(i),e.slice(a,a+i.length)==i}function zy(e,i,a){var u=v.templateSettings;a&&ir(e,i,a)&&(i=r),e=it(e),i=ya({},i,u,Sh);var f=ya({},i.imports,u.imports,Sh),y=kt(f),E=go(f,y),C,U,Y=0,X=i.interpolate||tn,Q="__p += '",oe=yo((i.escape||tn).source+"|"+X.source+"|"+(X===_t?Ha:tn).source+"|"+(i.evaluate||tn).source+"|$","g"),ve="//# sourceURL="+(nt.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ao+"]")+`
`;e.replace(oe,function(Ee,Ge,Ze,wr,nr,Er){return Ze||(Ze=wr),Q+=e.slice(Y,Er).replace(Wa,gd),Ge&&(C=!0,Q+=`' +
__e(`+Ge+`) +
'`),nr&&(U=!0,Q+=`';
`+nr+`;
__p += '`),Ze&&(Q+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),Y=Er+Ee.length,Ee}),Q+=`';
`;var we=nt.call(i,"variable")&&i.variable;if(!we)Q=`with (obj) {
`+Q+`
}
`;else if(za.test(we))throw new Pe(p);Q=(U?Q.replace(kr,""):Q).replace(er,"$1").replace(ti,"$1;"),Q="function("+(we||"obj")+`) {
`+(we?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(C?", __e = _.escape":"")+(U?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Q+`return __p
}`;var qe=vl(function(){return rt(y,ve+"return "+Q).apply(r,E)});if(qe.source=Q,ec(qe))throw qe;return qe}function qy(e){return it(e).toLowerCase()}function Hy(e){return it(e).toUpperCase()}function By(e,i,a){if(e=it(e),e&&(a||i===r))return Iu(e);if(!e||!(i=br(i)))return e;var u=jr(e),f=jr(i),y=xu(u,f),E=Cu(u,f)+1;return Di(u,y,E).join("")}function Ky(e,i,a){if(e=it(e),e&&(a||i===r))return e.slice(0,Au(e)+1);if(!e||!(i=br(i)))return e;var u=jr(e),f=Cu(u,jr(i))+1;return Di(u,0,f).join("")}function ky(e,i,a){if(e=it(e),e&&(a||i===r))return e.replace(St,"");if(!e||!(i=br(i)))return e;var u=jr(e),f=xu(u,jr(i));return Di(u,f).join("")}function Vy(e,i){var a=V,u=ae;if(bt(i)){var f="separator"in i?i.separator:f;a="length"in i?Me(i.length):a,u="omission"in i?br(i.omission):u}e=it(e);var y=e.length;if(hn(e)){var E=jr(e);y=E.length}if(a>=y)return e;var C=a-ln(u);if(C<1)return u;var U=E?Di(E,0,C).join(""):e.slice(0,C);if(f===r)return U+u;if(E&&(C+=U.length-C),tc(f)){if(e.slice(C).search(f)){var Y,X=U;for(f.global||(f=yo(f.source,it(Ir.exec(f))+"g")),f.lastIndex=0;Y=f.exec(X);)var Q=Y.index;U=U.slice(0,Q===r?C:Q)}}else if(e.indexOf(br(f),C)!=C){var oe=U.lastIndexOf(f);oe>-1&&(U=U.slice(0,oe))}return U+u}function Gy(e){return e=it(e),e&&mt.test(e)?e.replace(di,Ed):e}var Wy=_n(function(e,i,a){return e+(a?" ":"")+i.toUpperCase()}),nc=yh("toUpperCase");function gl(e,i,a){return e=it(e),i=a?r:i,i===r?yd(e)?Id(e):cd(e):e.match(i)||[]}var vl=Ke(function(e,i){try{return Kt(e,r,i)}catch(a){return ec(a)?a:new Pe(a)}}),Yy=ci(function(e,i){return Cr(i,function(a){a=Jr(a),ai(e,a,Zo(e[a],e))}),e});function Jy(e){var i=e==null?0:e.length,a=be();return e=i?yt(e,function(u){if(typeof u[1]!="function")throw new Or(d);return[a(u[0]),u[1]]}):[],Ke(function(u){for(var f=-1;++f<i;){var y=e[f];if(Kt(y[0],this,u))return Kt(y[1],this,u)}})}function Xy(e){return Eg(Pr(e,$))}function sc(e){return function(){return e}}function Zy(e,i){return e==null||e!==e?i:e}var Qy=bh(),e_=bh(!0);function dr(e){return e}function ac(e){return Yu(typeof e=="function"?e:Pr(e,$))}function t_(e){return Xu(Pr(e,$))}function r_(e,i){return Zu(e,Pr(i,$))}var i_=Ke(function(e,i){return function(a){return Hn(a,e,i)}}),n_=Ke(function(e,i){return function(a){return Hn(e,a,i)}});function oc(e,i,a){var u=kt(i),f=Zs(i,u);a==null&&!(bt(i)&&(f.length||!u.length))&&(a=i,i=e,e=this,f=Zs(i,kt(i)));var y=!(bt(a)&&"chain"in a)||!!a.chain,E=hi(e);return Cr(f,function(C){var U=i[C];e[C]=U,E&&(e.prototype[C]=function(){var Y=this.__chain__;if(y||Y){var X=e(this.__wrapped__),Q=X.__actions__=lr(this.__actions__);return Q.push({func:U,args:arguments,thisArg:e}),X.__chain__=Y,X}return U.apply(e,yi([this.value()],arguments))})}),e}function s_(){return Xe._===this&&(Xe._=Nd),this}function cc(){}function a_(e){return e=Me(e),Ke(function(i){return Qu(i,e)})}var o_=jo(yt),c_=jo(mu),u_=jo(uo);function yl(e){return Vo(e)?ho(Jr(e)):jg(e)}function h_(e){return function(i){return e==null?r:Hi(e,i)}}var l_=wh(),f_=wh(!0);function uc(){return[]}function hc(){return!1}function p_(){return{}}function d_(){return""}function g_(){return!0}function v_(e,i){if(e=Me(e),e<1||e>G)return[];var a=re,u=Jt(e,re);i=be(i),e-=re;for(var f=po(u,i);++a<e;)i(a);return f}function y_(e){return Te(e)?yt(e,Jr):mr(e)?[e]:lr(Lh(it(e)))}function __(e){var i=++Ad;return it(e)+i}var b_=na(function(e,i){return e+i},0),m_=zo("ceil"),w_=na(function(e,i){return e/i},1),E_=zo("floor");function D_(e){return e&&e.length?Xs(e,dr,Io):r}function S_(e,i){return e&&e.length?Xs(e,be(i,2),Io):r}function I_(e){return Du(e,dr)}function x_(e,i){return Du(e,be(i,2))}function C_(e){return e&&e.length?Xs(e,dr,Ao):r}function O_(e,i){return e&&e.length?Xs(e,be(i,2),Ao):r}var A_=na(function(e,i){return e*i},1),P_=zo("round"),N_=na(function(e,i){return e-i},0);function T_(e){return e&&e.length?fo(e,dr):0}function R_(e,i){return e&&e.length?fo(e,be(i,2)):0}return v.after=tv,v.ary=Wh,v.assign=Hv,v.assignIn=cl,v.assignInWith=ya,v.assignWith=Bv,v.at=Kv,v.before=Yh,v.bind=Zo,v.bindAll=Yy,v.bindKey=Jh,v.castArray=pv,v.chain=kh,v.chunk=E0,v.compact=D0,v.concat=S0,v.cond=Jy,v.conforms=Xy,v.constant=sc,v.countBy=T1,v.create=kv,v.curry=Xh,v.curryRight=Zh,v.debounce=Qh,v.defaults=Vv,v.defaultsDeep=Gv,v.defer=rv,v.delay=iv,v.difference=I0,v.differenceBy=x0,v.differenceWith=C0,v.drop=O0,v.dropRight=A0,v.dropRightWhile=P0,v.dropWhile=N0,v.fill=T0,v.filter=U1,v.flatMap=L1,v.flatMapDeep=M1,v.flatMapDepth=j1,v.flatten=qh,v.flattenDeep=R0,v.flattenDepth=U0,v.flip=nv,v.flow=Qy,v.flowRight=e_,v.fromPairs=F0,v.functions=ey,v.functionsIn=ty,v.groupBy=z1,v.initial=L0,v.intersection=M0,v.intersectionBy=j0,v.intersectionWith=z0,v.invert=iy,v.invertBy=ny,v.invokeMap=H1,v.iteratee=ac,v.keyBy=B1,v.keys=kt,v.keysIn=pr,v.map=la,v.mapKeys=ay,v.mapValues=oy,v.matches=t_,v.matchesProperty=r_,v.memoize=pa,v.merge=cy,v.mergeWith=ul,v.method=i_,v.methodOf=n_,v.mixin=oc,v.negate=da,v.nthArg=a_,v.omit=uy,v.omitBy=hy,v.once=sv,v.orderBy=K1,v.over=o_,v.overArgs=av,v.overEvery=c_,v.overSome=u_,v.partial=Qo,v.partialRight=el,v.partition=k1,v.pick=ly,v.pickBy=hl,v.property=yl,v.propertyOf=h_,v.pull=K0,v.pullAll=Bh,v.pullAllBy=k0,v.pullAllWith=V0,v.pullAt=G0,v.range=l_,v.rangeRight=f_,v.rearg=ov,v.reject=W1,v.remove=W0,v.rest=cv,v.reverse=Jo,v.sampleSize=J1,v.set=py,v.setWith=dy,v.shuffle=X1,v.slice=Y0,v.sortBy=ev,v.sortedUniq=r1,v.sortedUniqBy=i1,v.split=Ly,v.spread=uv,v.tail=n1,v.take=s1,v.takeRight=a1,v.takeRightWhile=o1,v.takeWhile=c1,v.tap=D1,v.throttle=hv,v.thru=ha,v.toArray=sl,v.toPairs=ll,v.toPairsIn=fl,v.toPath=y_,v.toPlainObject=ol,v.transform=gy,v.unary=lv,v.union=u1,v.unionBy=h1,v.unionWith=l1,v.uniq=f1,v.uniqBy=p1,v.uniqWith=d1,v.unset=vy,v.unzip=Xo,v.unzipWith=Kh,v.update=yy,v.updateWith=_y,v.values=wn,v.valuesIn=by,v.without=g1,v.words=gl,v.wrap=fv,v.xor=v1,v.xorBy=y1,v.xorWith=_1,v.zip=b1,v.zipObject=m1,v.zipObjectDeep=w1,v.zipWith=E1,v.entries=ll,v.entriesIn=fl,v.extend=cl,v.extendWith=ya,oc(v,v),v.add=b_,v.attempt=vl,v.camelCase=Dy,v.capitalize=pl,v.ceil=m_,v.clamp=my,v.clone=dv,v.cloneDeep=vv,v.cloneDeepWith=yv,v.cloneWith=gv,v.conformsTo=_v,v.deburr=dl,v.defaultTo=Zy,v.divide=w_,v.endsWith=Sy,v.eq=qr,v.escape=Iy,v.escapeRegExp=xy,v.every=R1,v.find=F1,v.findIndex=jh,v.findKey=Wv,v.findLast=$1,v.findLastIndex=zh,v.findLastKey=Yv,v.floor=E_,v.forEach=Vh,v.forEachRight=Gh,v.forIn=Jv,v.forInRight=Xv,v.forOwn=Zv,v.forOwnRight=Qv,v.get=rc,v.gt=bv,v.gte=mv,v.has=ry,v.hasIn=ic,v.head=Hh,v.identity=dr,v.includes=q1,v.indexOf=$0,v.inRange=wy,v.invoke=sy,v.isArguments=ki,v.isArray=Te,v.isArrayBuffer=wv,v.isArrayLike=fr,v.isArrayLikeObject=Pt,v.isBoolean=Ev,v.isBuffer=Si,v.isDate=Dv,v.isElement=Sv,v.isEmpty=Iv,v.isEqual=xv,v.isEqualWith=Cv,v.isError=ec,v.isFinite=Ov,v.isFunction=hi,v.isInteger=tl,v.isLength=ga,v.isMap=rl,v.isMatch=Av,v.isMatchWith=Pv,v.isNaN=Nv,v.isNative=Tv,v.isNil=Uv,v.isNull=Rv,v.isNumber=il,v.isObject=bt,v.isObjectLike=xt,v.isPlainObject=Wn,v.isRegExp=tc,v.isSafeInteger=Fv,v.isSet=nl,v.isString=va,v.isSymbol=mr,v.isTypedArray=mn,v.isUndefined=$v,v.isWeakMap=Lv,v.isWeakSet=Mv,v.join=q0,v.kebabCase=Cy,v.last=Tr,v.lastIndexOf=H0,v.lowerCase=Oy,v.lowerFirst=Ay,v.lt=jv,v.lte=zv,v.max=D_,v.maxBy=S_,v.mean=I_,v.meanBy=x_,v.min=C_,v.minBy=O_,v.stubArray=uc,v.stubFalse=hc,v.stubObject=p_,v.stubString=d_,v.stubTrue=g_,v.multiply=A_,v.nth=B0,v.noConflict=s_,v.noop=cc,v.now=fa,v.pad=Py,v.padEnd=Ny,v.padStart=Ty,v.parseInt=Ry,v.random=Ey,v.reduce=V1,v.reduceRight=G1,v.repeat=Uy,v.replace=Fy,v.result=fy,v.round=P_,v.runInContext=T,v.sample=Y1,v.size=Z1,v.snakeCase=$y,v.some=Q1,v.sortedIndex=J0,v.sortedIndexBy=X0,v.sortedIndexOf=Z0,v.sortedLastIndex=Q0,v.sortedLastIndexBy=e1,v.sortedLastIndexOf=t1,v.startCase=My,v.startsWith=jy,v.subtract=N_,v.sum=T_,v.sumBy=R_,v.template=zy,v.times=v_,v.toFinite=li,v.toInteger=Me,v.toLength=al,v.toLower=qy,v.toNumber=Rr,v.toSafeInteger=qv,v.toString=it,v.toUpper=Hy,v.trim=By,v.trimEnd=Ky,v.trimStart=ky,v.truncate=Vy,v.unescape=Gy,v.uniqueId=__,v.upperCase=Wy,v.upperFirst=nc,v.each=Vh,v.eachRight=Gh,v.first=Hh,oc(v,function(){var e={};return Wr(v,function(i,a){nt.call(v.prototype,a)||(e[a]=i)}),e}(),{chain:!1}),v.VERSION=s,Cr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){v[e].placeholder=v}),Cr(["drop","take"],function(e,i){Ye.prototype[e]=function(a){a=a===r?1:Bt(Me(a),0);var u=this.__filtered__&&!i?new Ye(this):this.clone();return u.__filtered__?u.__takeCount__=Jt(a,u.__takeCount__):u.__views__.push({size:Jt(a,re),type:e+(u.__dir__<0?"Right":"")}),u},Ye.prototype[e+"Right"]=function(a){return this.reverse()[e](a).reverse()}}),Cr(["filter","map","takeWhile"],function(e,i){var a=i+1,u=a==P||a==le;Ye.prototype[e]=function(f){var y=this.clone();return y.__iteratees__.push({iteratee:be(f,3),type:a}),y.__filtered__=y.__filtered__||u,y}}),Cr(["head","last"],function(e,i){var a="take"+(i?"Right":"");Ye.prototype[e]=function(){return this[a](1).value()[0]}}),Cr(["initial","tail"],function(e,i){var a="drop"+(i?"":"Right");Ye.prototype[e]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(dr)},Ye.prototype.find=function(e){return this.filter(e).head()},Ye.prototype.findLast=function(e){return this.reverse().find(e)},Ye.prototype.invokeMap=Ke(function(e,i){return typeof e=="function"?new Ye(this):this.map(function(a){return Hn(a,e,i)})}),Ye.prototype.reject=function(e){return this.filter(da(be(e)))},Ye.prototype.slice=function(e,i){e=Me(e);var a=this;return a.__filtered__&&(e>0||i<0)?new Ye(a):(e<0?a=a.takeRight(-e):e&&(a=a.drop(e)),i!==r&&(i=Me(i),a=i<0?a.dropRight(-i):a.take(i-e)),a)},Ye.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ye.prototype.toArray=function(){return this.take(re)},Wr(Ye.prototype,function(e,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),u=/^(?:head|last)$/.test(i),f=v[u?"take"+(i=="last"?"Right":""):i],y=u||/^find/.test(i);f&&(v.prototype[i]=function(){var E=this.__wrapped__,C=u?[1]:arguments,U=E instanceof Ye,Y=C[0],X=U||Te(E),Q=function(Ge){var Ze=f.apply(v,yi([Ge],C));return u&&oe?Ze[0]:Ze};X&&a&&typeof Y=="function"&&Y.length!=1&&(U=X=!1);var oe=this.__chain__,ve=!!this.__actions__.length,we=y&&!oe,qe=U&&!ve;if(!y&&X){E=qe?E:new Ye(this);var Ee=e.apply(E,C);return Ee.__actions__.push({func:ha,args:[Q],thisArg:r}),new Ar(Ee,oe)}return we&&qe?e.apply(this,C):(Ee=this.thru(Q),we?u?Ee.value()[0]:Ee.value():Ee)})}),Cr(["pop","push","shift","sort","splice","unshift"],function(e){var i=$s[e],a=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",u=/^(?:pop|shift)$/.test(e);v.prototype[e]=function(){var f=arguments;if(u&&!this.__chain__){var y=this.value();return i.apply(Te(y)?y:[],f)}return this[a](function(E){return i.apply(Te(E)?E:[],f)})}}),Wr(Ye.prototype,function(e,i){var a=v[i];if(a){var u=a.name+"";nt.call(gn,u)||(gn[u]=[]),gn[u].push({name:i,func:a})}}),gn[ia(r,se).name]=[{name:"wrapper",func:r}],Ye.prototype.clone=Gd,Ye.prototype.reverse=Wd,Ye.prototype.value=Yd,v.prototype.at=S1,v.prototype.chain=I1,v.prototype.commit=x1,v.prototype.next=C1,v.prototype.plant=A1,v.prototype.reverse=P1,v.prototype.toJSON=v.prototype.valueOf=v.prototype.value=N1,v.prototype.first=v.prototype.head,Fn&&(v.prototype[Fn]=O1),v},fn=xd();At?((At.exports=fn)._=fn,ct._=fn):Xe._=fn}).call(as)})(Vc,Vc.exports);var iD=Object.defineProperty,nD=Object.defineProperties,sD=Object.getOwnPropertyDescriptors,Lf=Object.getOwnPropertySymbols,aD=Object.prototype.hasOwnProperty,oD=Object.prototype.propertyIsEnumerable,Mf=(n,t,r)=>t in n?iD(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,ba=(n,t)=>{for(var r in t||(t={}))aD.call(t,r)&&Mf(n,r,t[r]);if(Lf)for(var r of Lf(t))oD.call(t,r)&&Mf(n,r,t[r]);return n},cD=(n,t)=>nD(n,sD(t));function $r(n,t,r){let s;const o=Gc(n);return t.rpcMap&&(s=t.rpcMap[o]),s||(s=`${rD}?chainId=eip155:${o}&projectId=${r}`),s}function Gc(n){return n.includes("eip155")?Number(n.split(":")[1]):Number(n)}function td(n){return n.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function uD(n,t){const r=Object.keys(t.namespaces).filter(o=>o.includes(n));if(!r.length)return[];const s=[];return r.forEach(o=>{const l=t.namespaces[o].accounts;s.push(...l)}),s}function hD(n={},t={}){const r=jf(n),s=jf(t);return Vc.exports.merge(r,s)}function jf(n){var t,r,s,o;const l={};if(!xn(n))return l;for(const[d,p]of Object.entries(n)){const g=lu(d)?[d]:p.chains,w=p.methods||[],S=p.events||[],$=p.rpcMap||{},z=Ea(d);l[z]=cD(ba(ba({},l[z]),p),{chains:vc(g,(t=l[z])==null?void 0:t.chains),methods:vc(w,(r=l[z])==null?void 0:r.methods),events:vc(S,(s=l[z])==null?void 0:s.events),rpcMap:ba(ba({},$),(o=l[z])==null?void 0:o.rpcMap)})}return l}function lD(n){return n.includes(":")?n.split(":")[2]:n}function fD(n){const t={};for(const[r,s]of Object.entries(n)){const o=s.methods||[],l=s.events||[],d=s.accounts||[],p=lu(r)?[r]:s.chains?s.chains:td(s.accounts);t[r]={chains:p,methods:o,events:l,accounts:d}}return t}const rd={},Rt=n=>rd[n],Oc=(n,t)=>{rd[n]=t};class pD{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||$r(`${this.name}:${t}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Ni.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||$r(t,this.namespace);return typeof s>"u"?void 0:new Ai(new Zi(s,Rt("disableProviderPing")))}}class dD{constructor(t){this.name="eip155",this.namespace=t.namespace,this.events=Rt("events"),this.client=Rt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,r){const s=Gc(t);if(!this.httpProviders[s]){const o=r||$r(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,o)}this.chainId=s,this.events.emit(Ni.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,r){const s=r||$r(`${this.name}:${t}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ai(new Zi(s,Rt("disableProviderPing")))}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const o=Gc(r);t[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const t=this.chainId,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}async handleSwitchChain(t){var r,s;let o=t.request.params?(r=t.request.params[0])==null?void 0:r.chainId:"0x0";o=o.startsWith("0x")?o:`0x${o}`;const l=parseInt(o,16);if(this.isChainApproved(l))this.setDefaultChain(`${l}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:o}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${l}`);else throw new Error(`Failed to switch to chain 'eip155:${l}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}}class gD{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||$r(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Ni.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||$r(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ai(new Zi(s,Rt("disableProviderPing")))}}class vD{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||$r(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Ni.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||$r(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ai(new Zi(s,Rt("disableProviderPing")))}}class yD{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||this.getCardanoRPCUrl(t);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Ni.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{const s=this.getCardanoRPCUrl(r);t[r]=this.createHttpProvider(r,s)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}getCardanoRPCUrl(t){const r=this.namespace.rpcMap;if(r)return r[t]}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||this.getCardanoRPCUrl(t);return typeof s>"u"?void 0:new Ai(new Zi(s,Rt("disableProviderPing")))}}class _D{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||$r(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Ni.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||$r(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ai(new Zi(s,Rt("disableProviderPing")))}}class bD{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||$r(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Ni.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||$r(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ai(new Zi(s,Rt("disableProviderPing")))}}var mD=Object.defineProperty,wD=Object.defineProperties,ED=Object.getOwnPropertyDescriptors,zf=Object.getOwnPropertySymbols,DD=Object.prototype.hasOwnProperty,SD=Object.prototype.propertyIsEnumerable,qf=(n,t,r)=>t in n?mD(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,ma=(n,t)=>{for(var r in t||(t={}))DD.call(t,r)&&qf(n,r,t[r]);if(zf)for(var r of zf(t))SD.call(t,r)&&qf(n,r,t[r]);return n},Ac=(n,t)=>wD(n,ED(t));class _u{constructor(t){this.events=new Dr.exports,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=t,this.logger=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(t==null?void 0:t.logger)||Ff})),this.disableProviderPing=(t==null?void 0:t.disableProviderPing)||!1}static async init(t){const r=new _u(t);return await r.initialize(),r}async request(t,r){const[s,o]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:ma({},t),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(t,r,s){this.request(t,s).then(o=>r(null,o)).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:Tt("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}removeListener(t,r){this.events.removeListener(t,r)}off(t,r){this.events.off(t,r)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(l=>{this.session=l,this.namespaces||(this.namespaces=fD(l.namespaces),this.persist("namespaces",this.namespaces))}).catch(l=>{if(l.message!==ed)throw l;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,r){try{if(!this.session)return;const[s,o]=this.validateChain(t);this.getProvider(s).setDefaultChain(o,r)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(ei(r)){for(const s of r)t.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await yu.init({logger:this.providerOpts.logger||Ff,relayUrl:this.providerOpts.relayUrl||Q2,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map(r=>Ea(r)))];Oc("client",this.client),Oc("events",this.events),Oc("disableProviderPing",this.disableProviderPing),t.forEach(r=>{if(!this.session)return;const s=uD(r,this.session),o=td(s),l=hD(this.namespaces,this.optionalNamespaces),d=Ac(ma({},l[r]),{accounts:s,chains:o});switch(r){case"eip155":this.rpcProviders[r]=new dD({namespace:d});break;case"solana":this.rpcProviders[r]=new gD({namespace:d});break;case"cosmos":this.rpcProviders[r]=new vD({namespace:d});break;case"polkadot":this.rpcProviders[r]=new pD({namespace:d});break;case"cip34":this.rpcProviders[r]=new yD({namespace:d});break;case"elrond":this.rpcProviders[r]=new _D({namespace:d});break;case"multiversx":this.rpcProviders[r]=new bD({namespace:d});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:r}=t,{event:s}=r;if(s.name==="accountsChanged"){const o=s.data;o&&ei(o)&&this.events.emit("accountsChanged",o.map(lD))}else s.name==="chainChanged"?this.onChainChanged(r.chainId):this.events.emit(s.name,s.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:r})=>{var s;const{namespaces:o}=r,l=(s=this.client)==null?void 0:s.session.get(t);this.session=Ac(ma({},l),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:r})}),this.client.on("session_delete",async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",Ac(ma({},Tt("USER_DISCONNECTED")),{data:t.topic}))}),this.on(Ni.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){if(!this.rpcProviders[t])throw new Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var r;this.getProvider(t).updateNamespace((r=this.session)==null?void 0:r.namespaces[t])})}setNamespaces(t){const{namespaces:r,optionalNamespaces:s,sessionProperties:o}=t;r&&Object.keys(r).length&&(this.namespaces=r),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=o,this.persist("namespaces",r),this.persist("optionalNamespaces",s)}validateChain(t){const[r,s]=(t==null?void 0:t.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,s];if(r&&!Object.keys(this.namespaces||{}).map(d=>Ea(d)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&s)return[r,s];const o=Ea(Object.keys(this.namespaces)[0]),l=this.rpcProviders[o].getDefaultChain();return[o,l]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,r=!1){var s;if(!this.namespaces)return;const[o,l]=this.validateChain(t);r||this.getProvider(o).setDefaultChain(l),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${l}`]).defaultChain=l,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",l)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(t,r){this.client.core.storage.setItem(`${$f}/${t}`,r)}async getFromStore(t){return await this.client.core.storage.getItem(`${$f}/${t}`)}}const ID=_u,xD="wc",CD="ethereum_provider",OD=`${xD}@2:${CD}:`,AD="https://rpc.walletconnect.com/v1/",Wc=["eth_sendTransaction","personal_sign"],PD=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Yc=["chainChanged","accountsChanged"],ND=["message","disconnect","connect"];var TD=Object.defineProperty,RD=Object.defineProperties,UD=Object.getOwnPropertyDescriptors,Hf=Object.getOwnPropertySymbols,FD=Object.prototype.hasOwnProperty,$D=Object.prototype.propertyIsEnumerable,Bf=(n,t,r)=>t in n?TD(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,os=(n,t)=>{for(var r in t||(t={}))FD.call(t,r)&&Bf(n,r,t[r]);if(Hf)for(var r of Hf(t))$D.call(t,r)&&Bf(n,r,t[r]);return n},Kf=(n,t)=>RD(n,UD(t));function Pa(n){return Number(n[0].split(":")[1])}function Pc(n){return`0x${n.toString(16)}`}function LD(n){const{chains:t,optionalChains:r,methods:s,optionalMethods:o,events:l,optionalEvents:d,rpcMap:p}=n;if(!ei(t))throw new Error("Invalid chains");const g={chains:t,methods:s||Wc,events:l||Yc,rpcMap:os({},t.length?{[Pa(t)]:p[Pa(t)]}:{})},w=l==null?void 0:l.filter(F=>!Yc.includes(F)),S=s==null?void 0:s.filter(F=>!Wc.includes(F));if(!r&&!d&&!o&&!(w!=null&&w.length)&&!(S!=null&&S.length))return{required:t.length?g:void 0};const $=(w==null?void 0:w.length)&&(S==null?void 0:S.length)||!r,z={chains:[...new Set($?g.chains.concat(r||[]):r)],methods:[...new Set(g.methods.concat(o!=null&&o.length?o:PD))],events:[...new Set(g.events.concat(d||ND))],rpcMap:p};return{required:t.length?g:void 0,optional:r.length?z:void 0}}class bu{constructor(){this.events=new Dr.exports.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=OD,this.on=(t,r)=>(this.events.on(t,r),this),this.once=(t,r)=>(this.events.once(t,r),this),this.removeListener=(t,r)=>(this.events.removeListener(t,r),this),this.off=(t,r)=>(this.events.off(t,r),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const r=new bu;return await r.initialize(t),r}async request(t){return await this.signer.request(t,this.formatChainId(this.chainId))}sendAsync(t,r){this.signer.sendAsync(t,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:r,optional:s}=LD(this.rpc);try{const o=await new Promise(async(d,p)=>{var g;this.rpc.showQrModal&&((g=this.modal)==null||g.subscribeModal(w=>{!w.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),p(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Kf(os({namespaces:os({},r&&{[this.namespace]:r})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:t==null?void 0:t.pairingTopic})).then(w=>{d(w)}).catch(w=>{p(new Error(w.message))})});if(!o)return;this.setChainIds(this.rpc.chains);const l=lw(o.namespaces,[this.namespace]);this.setAccounts(l),this.events.emit("connect",{chainId:Pc(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",t=>{const{params:r}=t,{event:s}=r;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",t)}),this.signer.on("chainChanged",t=>{const r=parseInt(t);this.chainId=r,this.events.emit("chainChanged",Pc(this.chainId)),this.persist()}),this.signer.on("session_update",t=>{this.events.emit("session_update",t)}),this.signer.on("session_delete",t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",Kf(os({},Tt("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",t=>{var r,s;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(s=this.modal)==null||s.openModal({uri:t})),this.events.emit("display_uri",t)})}switchEthereumChain(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return typeof t=="string"?t.startsWith(`${this.namespace}:`):!1}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const r=t.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",Pc(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const r=this.parseChainId(t);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(t){const[r,s,o]=t.split(":");return{chainId:`${r}:${s}`,address:o}}setAccounts(t){this.accounts=t.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var r,s;const o=(r=t==null?void 0:t.chains)!=null?r:[],l=(s=t==null?void 0:t.optionalChains)!=null?s:[],d=o.concat(l);if(!d.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const p=o.length?(t==null?void 0:t.methods)||Wc:[],g=o.length?(t==null?void 0:t.events)||Yc:[],w=(t==null?void 0:t.optionalMethods)||[],S=(t==null?void 0:t.optionalEvents)||[],$=(t==null?void 0:t.rpcMap)||this.buildRpcMap(d,t.projectId),z=(t==null?void 0:t.qrModalOptions)||void 0;return{chains:o==null?void 0:o.map(F=>this.formatChainId(F)),optionalChains:l.map(F=>this.formatChainId(F)),methods:p,events:g,optionalMethods:w,optionalEvents:S,rpcMap:$,showQrModal:!!(t!=null&&t.showQrModal),qrModalOptions:z,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,r){const s={};return t.forEach(o=>{s[o]=this.getRpcUrl(o,r)}),s}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=this.rpc.chains.length?Pa(this.rpc.chains):Pa(this.rpc.optionalChains),this.signer=await ID.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing,relayUrl:t.relayUrl,storageOptions:t.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:s}=await L_(()=>import("./index.84d191a4.js").then(o=>o.i),["./index.84d191a4.js","./index.e06fa583.js"],import.meta.url);r=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(os({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(t){if(!t)return;const{chains:r,optionalChains:s,rpcMap:o}=t;r&&ei(r)&&(this.rpc.chains=r.map(l=>this.formatChainId(l)),r.forEach(l=>{this.rpc.rpcMap[l]=(o==null?void 0:o[l])||this.getRpcUrl(l)})),s&&ei(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(l=>this.formatChainId(l)),s.forEach(l=>{this.rpc.rpcMap[l]=(o==null?void 0:o[l])||this.getRpcUrl(l)}))}getRpcUrl(t,r){var s;return((s=this.rpc.rpcMap)==null?void 0:s[t])||`${AD}?chainId=eip155:${t}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${t}`]?this.session.namespaces[`${this.namespace}:${t}`]:this.session.namespaces[this.namespace];this.setChainIds(t?[this.formatChainId(t)]:r==null?void 0:r.accounts),this.setAccounts(r==null?void 0:r.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return typeof t=="string"||t instanceof String?[this.parseAccount(t)]:t.map(r=>this.parseAccount(r))}}const zD=bu;export{zD as EthereumProvider,ND as OPTIONAL_EVENTS,PD as OPTIONAL_METHODS,Yc as REQUIRED_EVENTS,Wc as REQUIRED_METHODS,bu as default};
